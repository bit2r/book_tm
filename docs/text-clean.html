<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>5 . 정제(전처리) | R 텍스트마이닝</title>
<meta name="author" content="한국 R 사용자회">
<meta name="description" content="정제는 자료정보지식지혜(DIKW)위계론의 1차부호화 단계에 해당한다. 정제를 거친 자료를 분석하는 2차부호화 과정을 거쳐 자료가 정보로 가공된다. 광물 정제과정에 비유할 수 있다. 금광석 등 광물을 캐면 먼저 잘게 분쇄한다. 불순물을 제거하고, 규격화한 금괴로 가공한다. 마찬가지로 원자료를 분석할 수 있는 단위로 분쇄(토큰화)하고, 불순물을...">
<meta name="generator" content="bookdown 0.27 with bs4_book()">
<meta property="og:title" content="5 . 정제(전처리) | R 텍스트마이닝">
<meta property="og:type" content="book">
<meta property="og:description" content="정제는 자료정보지식지혜(DIKW)위계론의 1차부호화 단계에 해당한다. 정제를 거친 자료를 분석하는 2차부호화 과정을 거쳐 자료가 정보로 가공된다. 광물 정제과정에 비유할 수 있다. 금광석 등 광물을 캐면 먼저 잘게 분쇄한다. 불순물을 제거하고, 규격화한 금괴로 가공한다. 마찬가지로 원자료를 분석할 수 있는 단위로 분쇄(토큰화)하고, 불순물을...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="5 . 정제(전처리) | R 텍스트마이닝">
<meta name="twitter:description" content="정제는 자료정보지식지혜(DIKW)위계론의 1차부호화 단계에 해당한다. 정제를 거친 자료를 분석하는 2차부호화 과정을 거쳐 자료가 정보로 가공된다. 광물 정제과정에 비유할 수 있다. 금광석 등 광물을 캐면 먼저 잘게 분쇄한다. 불순물을 제거하고, 규격화한 금괴로 가공한다. 마찬가지로 원자료를 분석할 수 있는 단위로 분쇄(토큰화)하고, 불순물을...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">R 텍스트마이닝</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">들어가며</a></li>
<li><a class="" href="%EC%A0%80%EC%9E%91%EC%97%90-%EA%B8%B0%EC%97%AC%ED%95%98%EC%8B%A0-%EB%B6%84.html">저작에 기여하신 분</a></li>
<li class="book-part">환경설정</li>
<li><a class="" href="install-setup.html"><span class="header-section-number">1</span> 설치 및 환경설정</a></li>
<li><a class="" href="browse.html"><span class="header-section-number">2</span> 헬로 월드</a></li>
<li><a class="" href="view-text.html"><span class="header-section-number">3</span> 텍스트 살펴보기</a></li>
<li class="book-part">자료구조</li>
<li><a class="" href="text-processing.html"><span class="header-section-number">4</span> 텍스트 전처리</a></li>
<li><a class="active" href="text-clean.html"><span class="header-section-number">5</span> 정제(전처리)</a></li>
<li><a class="" href="tf-idf.html"><span class="header-section-number">6</span> 단어 빈도수</a></li>
<li class="book-part">텍스트 마이닝</li>
<li><a class="" href="sentiment.html"><span class="header-section-number">7</span> 감성분석</a></li>
<li><a class="" href="topic-modeling.html"><span class="header-section-number">8</span> 주제모형</a></li>
<li><a class="" href="anal4topic.html"><span class="header-section-number">9</span> 주제모형(공변인)</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="text-clean" class="section level1" number="5">
<h1>
<span class="header-section-number">5 . </span> 정제(전처리)<a class="anchor" aria-label="anchor" href="#text-clean"><i class="fas fa-link"></i></a>
</h1>
<p>정제는 자료정보지식지혜(DIKW)위계론의 1차부호화 단계에 해당한다. 정제를 거친 자료를 분석하는 2차부호화 과정을 거쳐 자료가 정보로 가공된다. 광물 정제과정에 비유할 수 있다. 금광석 등 광물을 캐면 먼저 잘게 분쇄한다. 불순물을 제거하고, 규격화한 금괴로 가공한다. 마찬가지로 원자료를 분석할 수 있는 단위로 분쇄(토큰화)하고, 불순물을 제거(불용어 제거)한 다음, 규격화한 양식으로 정규화한다.</p>
<ul>
<li>토큰화</li>
<li>불용어제거</li>
<li>정규화</li>
</ul>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pkg_l</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"tidyverse"</span>, <span class="st">"tidytext"</span>, <span class="st">"textdata"</span><span class="op">)</span></span>
<span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html">map</a></span><span class="op">(</span><span class="va">pkg_l</span>, <span class="va">require</span>, ch <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code>## [[1]]
## [1] TRUE
## 
## [[2]]
## [1] TRUE
## 
## [[3]]
## [1] TRUE
</code></pre>
<div id="토큰화" class="section level2" number="5.1">
<h2>
<span class="header-section-number">5.1</span> 토큰화<a class="anchor" aria-label="anchor" href="#%ED%86%A0%ED%81%B0%ED%99%94"><i class="fas fa-link"></i></a>
</h2>
<p>텍스트 원자료를 분석할 수 있도록 토큰(token)으로 잘게 나누는 단계다. 토큰의 단위는 분석 목적에 따라 글자, 단어, 엔그램(n-gram), 문장, 문단 등 다양하게 지정할 수 있다.</p>
<div id="unnest_tokensdf-output-input-token-words-format-ctext-man-latex-html-xml-to_lower-true-drop-true-collapse-null-..." class="section level3" number="5.1.1">
<h3>
<span class="header-section-number">5.1.1</span> <code>unnest_tokens(df, output, input, token = "words", format = c("text", "man", "latex", "html", "xml"), to_lower = TRUE, drop = TRUE, collapse = NULL, ...)</code><a class="anchor" aria-label="anchor" href="#unnest_tokensdf-output-input-token-words-format-ctext-man-latex-html-xml-to_lower-true-drop-true-collapse-null-..."><i class="fas fa-link"></i></a>
</h3>
<p>토큰으로 나누는 단위는 분석의 목적에 따라 다양한 단어, 글자, 문장 등 다양한 수준으로 설정할 수 있다.</p>
<ul>
<li>“characters” 글자 단위</li>
<li>“character_shingles” 복수의 글자 단위</li>
<li>“words” 단어 단위</li>
<li>“ngrams” 복수의 단어 단위</li>
<li>“regex” 정규표현식으로 지정</li>
</ul>
<p><code>tidytext</code>패키지에서는 <code><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens()</a></code>함수에서는 <code>token =</code>인자로 토큰 단위를 지정할 수 있다.</p>
<div id="단어" class="section level5" number="5.1.1.0.1">
<h5>
<span class="header-section-number">5.1.1.0.1</span> 단어<a class="anchor" aria-label="anchor" href="#%EB%8B%A8%EC%96%B4"><i class="fas fa-link"></i></a>
</h5>
<p><code><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens()</a></code>함수에서 토큰의 기본값으로 설정된 단위는 단어(“words”)다.</p>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">text_v</span> <span class="op">&lt;-</span> <span class="st">"You still fascinate and inspire me.</span></span>
<span><span class="st">You influence me for the better. </span></span>
<span><span class="st">You’re the object of my desire, the #1 Earthly reason for my existence."</span></span>
<span></span>
<span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">text_v</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span>output <span class="op">=</span> <span class="va">word</span>, input <span class="op">=</span> <span class="va">text</span>,</span>
<span>                token <span class="op">=</span> <span class="st">"words"</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code>## <span style="color: #555555;"># A tibble: 25 × 1</span>
##   word     
##   <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>    
## <span style="color: #555555;">1</span> you      
## <span style="color: #555555;">2</span> still    
## <span style="color: #555555;">3</span> fascinate
## <span style="color: #555555;">4</span> and      
## <span style="color: #555555;">5</span> inspire  
## <span style="color: #555555;">6</span> me       
## <span style="color: #555555;"># … with 19 more rows</span>
</code></pre>
</div>
<div id="글자-토큰" class="section level5" number="5.1.1.0.2">
<h5>
<span class="header-section-number">5.1.1.0.2</span> 글자 토큰<a class="anchor" aria-label="anchor" href="#%EA%B8%80%EC%9E%90-%ED%86%A0%ED%81%B0"><i class="fas fa-link"></i></a>
</h5>
<p><code>token =</code>인자에 “characters”를 투입하면 글자 단위로 토큰화한다.</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">text_v</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span>output <span class="op">=</span> <span class="va">word</span>, input <span class="op">=</span> <span class="va">text</span>,</span>
<span>                token <span class="op">=</span> <span class="st">"characters"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">word</span>, sort <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code>## <span style="color: #555555;"># A tibble: 21 × 2</span>
##   word      n
##   <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span> <span style="color: #555555; font-style: italic;">&lt;int&gt;</span>
## <span style="color: #555555;">1</span> e        20
## <span style="color: #555555;">2</span> t        10
## <span style="color: #555555;">3</span> o         8
## <span style="color: #555555;">4</span> r         8
## <span style="color: #555555;">5</span> i         7
## <span style="color: #555555;">6</span> n         7
## <span style="color: #555555;"># … with 15 more rows</span>
</code></pre>
</div>
<div id="복수의-글자" class="section level5" number="5.1.1.0.3">
<h5>
<span class="header-section-number">5.1.1.0.3</span> 복수의 글자<a class="anchor" aria-label="anchor" href="#%EB%B3%B5%EC%88%98%EC%9D%98-%EA%B8%80%EC%9E%90"><i class="fas fa-link"></i></a>
</h5>
<p>복수의 글자를 토큰의 단위로 할 때는 “character_shingles”을 <code>token =</code>인자에 투입한다. 기본값은 3글자.</p>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">text_v</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span>output <span class="op">=</span> <span class="va">word</span>, input <span class="op">=</span> <span class="va">text</span>,</span>
<span>                token <span class="op">=</span> <span class="st">"character_shingles"</span>, n <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">word</span>, sort <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code>## <span style="color: #555555;"># A tibble: 104 × 2</span>
##   word      n
##   <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span> <span style="color: #555555; font-style: italic;">&lt;int&gt;</span>
## <span style="color: #555555;">1</span> ence      2
## <span style="color: #555555;">2</span> ethe      2
## <span style="color: #555555;">3</span> reth      2
## <span style="color: #555555;">4</span> 1ear      1
## <span style="color: #555555;">5</span> andi      1
## <span style="color: #555555;">6</span> arth      1
## <span style="color: #555555;"># … with 98 more rows</span>
</code></pre>
</div>
<div id="복수의-단어n-gram" class="section level5" number="5.1.1.0.4">
<h5>
<span class="header-section-number">5.1.1.0.4</span> 복수의 단어(n-gram)<a class="anchor" aria-label="anchor" href="#%EB%B3%B5%EC%88%98%EC%9D%98-%EB%8B%A8%EC%96%B4n-gram"><i class="fas fa-link"></i></a>
</h5>
<p>복수의 단어를 토콘 단위로 나눌 때는 <code>token =</code>인자에 “ngrams”인자를 투입한다. 기본값은3개이다.</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">text_v</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span>output <span class="op">=</span> <span class="va">word</span>, input <span class="op">=</span> <span class="va">text</span>,</span>
<span>                token <span class="op">=</span> <span class="st">"ngrams"</span>, n <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">word</span>, sort <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code>## <span style="color: #555555;"># A tibble: 22 × 2</span>
##   word                         n
##   <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>                    <span style="color: #555555; font-style: italic;">&lt;int&gt;</span>
## <span style="color: #555555;">1</span> 1 earthly reason for         1
## <span style="color: #555555;">2</span> and inspire me you           1
## <span style="color: #555555;">3</span> better you’re the object     1
## <span style="color: #555555;">4</span> desire the 1 earthly         1
## <span style="color: #555555;">5</span> earthly reason for my        1
## <span style="color: #555555;">6</span> fascinate and inspire me     1
## <span style="color: #555555;"># … with 16 more rows</span>
</code></pre>
</div>
<div id="정규표현식" class="section level5" number="5.1.1.0.5">
<h5>
<span class="header-section-number">5.1.1.0.5</span> 정규표현식<a class="anchor" aria-label="anchor" href="#%EC%A0%95%EA%B7%9C%ED%91%9C%ED%98%84%EC%8B%9D"><i class="fas fa-link"></i></a>
</h5>
<p>정규표현식(regex: regular expressions)을 이용하면, 토콘을 보다 다양한 방식으로 나눌 수 있다.</p>
<p><code>token =</code>인자에 “regex”를 지정한다. <code>pattern =</code>에 정규표현식을 투입한다.</p>
<p>정규표현식에서 “new line”을 의미하는 <code>"\n"</code>를 이용해 토큰화할 경우 문장 단위로 토큰화할 경우, 수 있다. 만일 공백 단위로 토큰화한다면, 공백을 의미하는 <code>"\\s"</code>를 투입한다.</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">text_v</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span>output <span class="op">=</span> <span class="va">word</span>, input <span class="op">=</span> <span class="va">text</span>,</span>
<span>                token <span class="op">=</span> <span class="st">"regex"</span>, pattern <span class="op">=</span> <span class="st">"\n"</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code>## <span style="color: #555555;"># A tibble: 3 × 1</span>
##   word                                                     
##   <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>                                                    
## <span style="color: #555555;">1</span> <span style="color: #555555;">"</span>you still fascinate and inspire me.<span style="color: #555555;">"</span>                    
## <span style="color: #555555;">2</span> <span style="color: #555555;">"</span>you influence me for the better. <span style="color: #555555;">"</span>                      
## <span style="color: #555555;">3</span> <span style="color: #555555;">"</span>you’re the object of my desire, the #1 earthly reason f…
</code></pre>
</div>
</div>
<div id="format-ctext-man-latex-html-xml" class="section level3" number="5.1.2">
<h3>
<span class="header-section-number">5.1.2</span> <code>format = c("text", "man", "latex", "html", "xml")</code><a class="anchor" aria-label="anchor" href="#format-ctext-man-latex-html-xml"><i class="fas fa-link"></i></a>
</h3>
<p><code>format =</code>인자를 이용해 토큰화하는 문서의 형식을 지정할 수 있다.</p>
<p>“html”문서를 토큰화해보자.</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pp_html_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>text <span class="op">=</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_lines.html">read_lines</a></span><span class="op">(</span><span class="st">"https://www.gutenberg.org/files/1342/1342-h/1342-h.htm"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">pp_html_df</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>,<span class="op">]</span></span>
<span><span class="va">pp_html_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">text</span>, format <span class="op">=</span> <span class="st">"html"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">.</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>,<span class="op">]</span></span></code></pre></div>
</div>
<div id="to_lower-true" class="section level3" number="5.1.3">
<h3>
<span class="header-section-number">5.1.3</span> <code>to_lower = TRUE</code><a class="anchor" aria-label="anchor" href="#to_lower-true"><i class="fas fa-link"></i></a>
</h3>
<p>영문은 대문자와 소문자 구분이 있다. <code>to_lower =</code>인자의 기본값은 <code>TRUE</code>다. <code>FALSE</code>를 로 지정하면 대문자를 모두 소문자로 변경하지 않는다. 영문문서에서 사람이름이나 지명을 구분해야 한다면 토큰화 과정에서 모든 단어를 소문자화하지 말아야 한다.</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">text_v</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span>output <span class="op">=</span> <span class="va">word</span>, input <span class="op">=</span> <span class="va">text</span>,</span>
<span>                to_lower <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code>## <span style="color: #555555;"># A tibble: 25 × 1</span>
##   word     
##   <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>    
## <span style="color: #555555;">1</span> You      
## <span style="color: #555555;">2</span> still    
## <span style="color: #555555;">3</span> fascinate
## <span style="color: #555555;">4</span> and      
## <span style="color: #555555;">5</span> inspire  
## <span style="color: #555555;">6</span> me       
## <span style="color: #555555;"># … with 19 more rows</span>
</code></pre>
</div>
<div id="strip_punct" class="section level3" number="5.1.4">
<h3>
<span class="header-section-number">5.1.4</span> <code>strip_punct =</code><a class="anchor" aria-label="anchor" href="#strip_punct"><i class="fas fa-link"></i></a>
</h3>
<p>추가인자는 <code>tokenizers</code>함수로 전달해 다양한 설정을 할 수 있다. 예를 들어, <code>strip_punct =</code>인자에 <code>FALSE</code>를 투입하면, 문장부호를 제거하지 않는다.</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">text_v</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span>output <span class="op">=</span> <span class="va">word</span>, input <span class="op">=</span> <span class="va">text</span>,</span>
<span>                token <span class="op">=</span> <span class="st">"words"</span>,</span>
<span>                strip_punct <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code>## <span style="color: #555555;"># A tibble: 30 × 1</span>
##   word     
##   <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>    
## <span style="color: #555555;">1</span> you      
## <span style="color: #555555;">2</span> still    
## <span style="color: #555555;">3</span> fascinate
## <span style="color: #555555;">4</span> and      
## <span style="color: #555555;">5</span> inspire  
## <span style="color: #555555;">6</span> me       
## <span style="color: #555555;"># … with 24 more rows</span>
</code></pre>
</div>
</div>
<div id="불용어stop-words-제거" class="section level2" number="5.2">
<h2>
<span class="header-section-number">5.2</span> 불용어(stop words) 제거<a class="anchor" aria-label="anchor" href="#%EB%B6%88%EC%9A%A9%EC%96%B4stop-words-%EC%A0%9C%EA%B1%B0"><i class="fas fa-link"></i></a>
</h2>
<p>불용어는 말 그대로 사용하지 않는 단어다. 불용어를 문자 그대로 해석하면 사용하지 않는 단어에 국한된다. 넓은 의미로 해석하면, 사용빈도가 높아 분석에 의미가 없거나, 내용을 나타내는데 기여하지 않는 단어, 숫자, 특수문자, 구두점, 공백문자, 기호 등이 포함된다.</p>
<p>무엇이 불용어가 돼야 하는지는 상황에 따라 다르다. 에를 들어, 대명사는 대부분의 불용어사전에 불용어로 포함돼 있지만, 분석 목적에 따라서는 대명사는 분석의 핵심단위가 되기도 한다. 기호도 마찬가지다. 기호를 이용한 이모티콘은 문서의 의미를 전달하기 때문에 모든 기호를 일괄적으로 제거해서는 안된다.</p>
<p>앞서 제시한 연애편지를 문자 단위로 토큰화해 단어의 빈도를 계산해보자.</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">text_v</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span>output <span class="op">=</span> <span class="va">word</span>, input <span class="op">=</span> <span class="va">text</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">word</span>, sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code>## <span style="color: #555555;"># A tibble: 19 × 2</span>
##   word      n
##   <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span> <span style="color: #555555; font-style: italic;">&lt;int&gt;</span>
## <span style="color: #555555;">1</span> the       3
## <span style="color: #555555;">2</span> for       2
## <span style="color: #555555;">3</span> me        2
## <span style="color: #555555;">4</span> my        2
## <span style="color: #555555;">5</span> you       2
## <span style="color: #555555;">6</span> 1         1
## <span style="color: #555555;"># … with 13 more rows</span>
</code></pre>
<p><code>count</code>로 단어빈도를 계산한 결과를 보면 “the”가 3회, “for”, “me”, “my”, “you”가 각각 2회 사용됐다. 즉, 이 글은 너와 나에 대한 글이런 것을 알수 있다. 사랑고백이란 것이 너와 나의 일이므로 타당하다.</p>
<p>분석결과를 보면 단어빈도로 의미를 파악하는데 불필요한 단어도 있다. “the”, “for”, “of”, “and” 등과 같은 관사, 전치사, 접속사들처럼 자주 사용하는 단어들이다. 이런 단어는 불용어(stop words)로 처리해 분석대상에 제외하는 것이 보다 정확한 의미를 파악하는데 도움이 되는 경우도 있다.</p>
<p>불용어를 제거하는 방법은 크게 두가지가 있는데 혼용한다.</p>
<ul>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/filter-joins.html">anti_join()</a></code> 불용어목록을 데이터프레임에 저장한 다음, <code><a href="https://dplyr.tidyverse.org/reference/filter-joins.html">anti_join()</a></code>함수를 이용해 텍스트데이터프레임과 배제결합하는 방법이다. 두 데이터프레임에서 겹치는 행을 제외하고 결합(join)한다. 이 경우 불용어 목록에 포함된 행이 제외된다.</p></li>
<li><p><code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code>함수와 <code><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect()</a></code>함수를 함께 이용해 불용어 지정해 걸러내는 방법이다. 불용어사전에 포함돼 있지 않는 단어를 제거할 때 이용한다.</p></li>
</ul>
<div id="불용어-사전" class="section level3" number="5.2.1">
<h3>
<span class="header-section-number">5.2.1</span> 불용어 사전<a class="anchor" aria-label="anchor" href="#%EB%B6%88%EC%9A%A9%EC%96%B4-%EC%82%AC%EC%A0%84"><i class="fas fa-link"></i></a>
</h3>
<p>주로 사용되는 불용어목록은 불용어사전으로 제공된다. <code>tidytext</code>패키지는 <code>stop_words</code>에 불용어를 모아 놓았다. <code>stop_words</code>의 구조부터 살며보자.</p>
<p><code>kableExtra</code>패키지를 이용하면 데이터프레임을 깔끔하게 출력할 수 있다.(<a href="https://cran.r-project.org/web/packages/kableExtra/vignettes/awesome_table_in_html.html">사용법은 여기</a>)</p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"kableExtra"</span><span class="op">)</span></span></code></pre></div>
<p>데이터셋을 R세션에 올리는 함수는 <code><a href="https://rdrr.io/r/utils/data.html">data()</a></code>함수다.</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://haozhu233.github.io/kableExtra/">kableExtra</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">stop_words</span><span class="op">)</span></span>
<span><span class="va">stop_words</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code>## Rows: 1,149
## Columns: 2
## $ word    <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span> "a", "a's", "able", "about", "above", "acc…
## $ lexicon <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span> "SMART", "SMART", "SMART", "SMART", "SMART…
</code></pre>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">stop_words</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, <span class="fl">701</span><span class="op">:</span><span class="fl">703</span>, <span class="fl">1001</span><span class="op">:</span><span class="fl">1003</span><span class="op">)</span>,<span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kbl.html">kbl</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/kableExtra/man/kable_classic.html">kable_classic</a></span><span class="op">(</span>full_width <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span></code></pre></div>
<div class="inline-table"><table class=" lightable-classic" style='font-family: "Arial Narrow", "Source Sans Pro", sans-serif; width: auto !important; margin-left: auto; margin-right: auto;'>
<thead><tr>
<th style="text-align:left;">
word
</th>
<th style="text-align:left;">
lexicon
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
a
</td>
<td style="text-align:left;">
SMART
</td>
</tr>
<tr>
<td style="text-align:left;">
a’s
</td>
<td style="text-align:left;">
SMART
</td>
</tr>
<tr>
<td style="text-align:left;">
able
</td>
<td style="text-align:left;">
SMART
</td>
</tr>
<tr>
<td style="text-align:left;">
during
</td>
<td style="text-align:left;">
snowball
</td>
</tr>
<tr>
<td style="text-align:left;">
before
</td>
<td style="text-align:left;">
snowball
</td>
</tr>
<tr>
<td style="text-align:left;">
after
</td>
<td style="text-align:left;">
snowball
</td>
</tr>
<tr>
<td style="text-align:left;">
parted
</td>
<td style="text-align:left;">
onix
</td>
</tr>
<tr>
<td style="text-align:left;">
parting
</td>
<td style="text-align:left;">
onix
</td>
</tr>
<tr>
<td style="text-align:left;">
parts
</td>
<td style="text-align:left;">
onix
</td>
</tr>
</tbody>
</table></div>
<p><code>stop_words</code>는 행이 1,149개(불용어 1,149개)이고, 열이 2개(word와 lexicon)인 데이터프레임이다. word열에 있는 단어가 불용어고, lexicon열에 있는 값은 불용어 용어집의 이름이다. <code>tidytext</code>패키지의 <code>stop_words</code>에는 세 개의 불용어 용어집(SMART, snowball, onix) 이 포함돼 있다. <code>filter</code>함수로 특정 용어집에 있는 불용어 사전만 골라 이용할 수 있다.</p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">stop_words</span><span class="op">$</span><span class="va">lexicon</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">unique</span></span></code></pre></div>
<pre class="r-output"><code>## [1] "SMART"    "snowball" "onix"
</code></pre>
<p>불용어사전으로 불용어를 걸러낸 다음 단어빈도를 계산해보자.</p>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">stop_words</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">text_v</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span>output <span class="op">=</span> <span class="va">word</span>, input <span class="op">=</span> <span class="va">text</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html">anti_join</a></span><span class="op">(</span><span class="va">stop_words</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">word</span>, sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code>## <span style="color: #555555;"># A tibble: 10 × 2</span>
##   word          n
##   <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #555555; font-style: italic;">&lt;int&gt;</span>
## <span style="color: #555555;">1</span> 1             1
## <span style="color: #555555;">2</span> desire        1
## <span style="color: #555555;">3</span> earthly       1
## <span style="color: #555555;">4</span> existence     1
## <span style="color: #555555;">5</span> fascinate     1
## <span style="color: #555555;">6</span> influence     1
## <span style="color: #555555;"># … with 4 more rows</span>
</code></pre>
<p>결과를 보면 “you”등 대명사가 포함된 토큰은 모두 제거됐는데, “you’re”는 그대로 남아 있다. 불용어 사전에는 “you’re”로 홑따옴표(quotation mark)<code>'</code>를 이용했는데, 본문에는 “you’re”로 홑낫표(aphostrophe)<code>’</code>를 이용했기 때문이다. 불용어사전으로 본문의 “you’re”를 제거하기 위해서는 둘 중 한가지는 해야 한다. 본몬의 홑낫표를 홑따옴표로 변경하거나, 불용어사전을 수정한다.</p>
<div id="본문-수정" class="section level4" number="5.2.1.1">
<h4>
<span class="header-section-number">5.2.1.1</span> 본문 수정<a class="anchor" aria-label="anchor" href="#%EB%B3%B8%EB%AC%B8-%EC%88%98%EC%A0%95"><i class="fas fa-link"></i></a>
</h4>
<p>먼저 본문 수정을 해보자.</p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tapo_v</span> <span class="op">&lt;-</span> <span class="va">text_v</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html">str_replace_all</a></span><span class="op">(</span><span class="st">"’"</span>, <span class="st">"'"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">tapo_v</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span>output <span class="op">=</span> <span class="va">word</span>, input <span class="op">=</span> <span class="va">text</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html">anti_join</a></span><span class="op">(</span><span class="va">stop_words</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">word</span>, sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code>## <span style="color: #555555;"># A tibble: 9 × 2</span>
##   word          n
##   <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #555555; font-style: italic;">&lt;int&gt;</span>
## <span style="color: #555555;">1</span> 1             1
## <span style="color: #555555;">2</span> desire        1
## <span style="color: #555555;">3</span> earthly       1
## <span style="color: #555555;">4</span> existence     1
## <span style="color: #555555;">5</span> fascinate     1
## <span style="color: #555555;">6</span> influence     1
## <span style="color: #555555;"># … with 3 more rows</span>
</code></pre>
</div>
<div id="불용어-사전-수정1" class="section level4" number="5.2.1.2">
<h4>
<span class="header-section-number">5.2.1.2</span> 불용어 사전 수정1<a class="anchor" aria-label="anchor" href="#%EB%B6%88%EC%9A%A9%EC%96%B4-%EC%82%AC%EC%A0%84-%EC%88%98%EC%A0%951"><i class="fas fa-link"></i></a>
</h4>
<p>불용어 사전에 “you’re”를 추가해보자. 데이터프레임을 만들어 <code><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows()</a></code>로 데이터프레임을 결합할수도 있고, <code><a href="https://tibble.tidyverse.org/reference/add_row.html">add_row()</a></code>로 불용사전에 열을 곧바로 추가할수도 있다.</p>
<p>먼저 <code><a href="https://tibble.tidyverse.org/reference/add_row.html">add_row()</a></code>로 행에 곧바로 추가하는 방법을 이용해보자. 추가됐는지 확인이 수월하도록 첫째행 전에 추가하자.</p>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">stop_words</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/add_row.html">add_row</a></span><span class="op">(</span>word <span class="op">=</span> <span class="st">"you’re"</span>, lexicon <span class="op">=</span> <span class="st">"NEW"</span>, .before <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code>## <span style="color: #555555;"># A tibble: 3 × 2</span>
##   word   lexicon
##   <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>  
## <span style="color: #555555;">1</span> you’re NEW    
## <span style="color: #555555;">2</span> a      SMART  
## <span style="color: #555555;">3</span> a's    SMART
</code></pre>
<p>이번에는 데이터프레임을 결합해보자. 또한 숫자 “1”도 함께 불용어사전에 추가하자.
먼저 추가할 용어를 불용어사전과 같은 구조의 데이터프레임에 저장한다.</p>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">stop_words</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code>## [1] "word"    "lexicon"
</code></pre>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">stop_add</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>word <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"you’re"</span>, <span class="st">"1"</span><span class="op">)</span>,</span>
<span>                   lexicon <span class="op">=</span> <span class="st">"added"</span><span class="op">)</span></span>
<span><span class="va">stop_add</span></span></code></pre></div>
<pre class="r-output"><code>## <span style="color: #555555;"># A tibble: 2 × 2</span>
##   word   lexicon
##   <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>  
## <span style="color: #555555;">1</span> you’re added  
## <span style="color: #555555;">2</span> 1      added
</code></pre>
<p><code><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows()</a></code>함수로 불용어사전과 결합한다.</p>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">stop_words2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span><span class="op">(</span><span class="va">stop_words</span>, <span class="va">stop_add</span><span class="op">)</span></span>
<span><span class="va">stop_words2</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html">tail</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code>## <span style="color: #555555;"># A tibble: 6 × 2</span>
##   word     lexicon
##   <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>  
## <span style="color: #555555;">1</span> younger  onix   
## <span style="color: #555555;">2</span> youngest onix   
## <span style="color: #555555;">3</span> your     onix   
## <span style="color: #555555;">4</span> yours    onix   
## <span style="color: #555555;">5</span> you’re   added  
## <span style="color: #555555;">6</span> 1        added
</code></pre>
<p>새로 만든 불용어사전으로 정체한 후 단어 빈도를 계산해보자.</p>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">text_v</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span>output <span class="op">=</span> <span class="va">word</span>, input <span class="op">=</span> <span class="va">text</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html">anti_join</a></span><span class="op">(</span><span class="va">stop_words2</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">word</span>, sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code>## <span style="color: #555555;"># A tibble: 8 × 2</span>
##   word          n
##   <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #555555; font-style: italic;">&lt;int&gt;</span>
## <span style="color: #555555;">1</span> desire        1
## <span style="color: #555555;">2</span> earthly       1
## <span style="color: #555555;">3</span> existence     1
## <span style="color: #555555;">4</span> fascinate     1
## <span style="color: #555555;">5</span> influence     1
## <span style="color: #555555;">6</span> inspire       1
## <span style="color: #555555;"># … with 2 more rows</span>
</code></pre>
<p>“you’re”와 숫자가 모두 제거됐다.</p>
</div>
<div id="불용어-사전-수정2" class="section level4" number="5.2.1.3">
<h4>
<span class="header-section-number">5.2.1.3</span> 불용어 사전 수정2<a class="anchor" aria-label="anchor" href="#%EB%B6%88%EC%9A%A9%EC%96%B4-%EC%82%AC%EC%A0%84-%EC%88%98%EC%A0%952"><i class="fas fa-link"></i></a>
</h4>
<p>통상적으로 쓰이는 불용어 중에는 실은 문서의 의미를 파악하는데 중요한 단서를 제공하는 단어도 있다. “you” “me” “my” 등과 같은 대명사는 흔하게 사용되기 때문에 불용어로 분류되지만, 맥락를 파악하는데 중요한 역할을 하기도 한다. 불용어 사전에서 대명사를 찾아 불용어 사전에서 제거하자.</p>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">stop_words</span><span class="op">$</span><span class="va">word</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_subset.html">str_subset</a></span><span class="op">(</span><span class="st">"(^i$|^i[:punct:]+|^mys*|^me$|mine)"</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code>##  [1] "i"      "i'd"    "i'll"   "i'm"    "i've"   "me"    
##  [7] "my"     "myself" "i"      "me"     "my"     "myself"
## [13] "i'm"    "i've"   "i'd"    "i'll"   "i"      "me"    
## [19] "my"     "myself"
</code></pre>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">stop_words3</span> <span class="op">&lt;-</span> <span class="va">stop_words</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span></span>
<span>    <span class="op">!</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="va">word</span>, <span class="st">"(^i$|^i[:punct:]+|^mys*|^me$|^mine$)"</span><span class="op">)</span>,</span>
<span>    <span class="op">)</span></span>
<span><span class="va">stop_words3</span><span class="op">$</span><span class="va">word</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_subset.html">str_subset</a></span><span class="op">(</span><span class="st">"^i"</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code>##  [1] "ie"          "if"          "ignored"     "immediate"  
##  [5] "in"          "inasmuch"    "inc"         "indeed"     
##  [9] "indicate"    "indicated"   "indicates"   "inner"      
## [13] "insofar"     "instead"     "into"        "inward"     
## [17] "is"          "isn't"       "it"          "it'd"       
## [21] "it'll"       "it's"        "its"         "itself"     
## [25] "it"          "its"         "itself"      "is"         
## [29] "it's"        "isn't"       "if"          "into"       
## [33] "in"          "if"          "important"   "in"         
## [37] "interest"    "interested"  "interesting" "interests"  
## [41] "into"        "is"          "it"          "its"        
## [45] "itself"
</code></pre>
</div>
<div id="불용어-목록-만들기" class="section level4" number="5.2.1.4">
<h4>
<span class="header-section-number">5.2.1.4</span> 불용어 목록 만들기<a class="anchor" aria-label="anchor" href="#%EB%B6%88%EC%9A%A9%EC%96%B4-%EB%AA%A9%EB%A1%9D-%EB%A7%8C%EB%93%A4%EA%B8%B0"><i class="fas fa-link"></i></a>
</h4>
<p>제거하고 싶은 불용어를 최소화하고 싶을 때는 불용어 목록을 직접 만들수도 있다. “the, for, and”등이 포함된 불용어 목록을 만들어 정제해 보자. “the, for, and”등 불용어목록을 데이터프레임에 저장한 다음, <code><a href="https://dplyr.tidyverse.org/reference/filter-joins.html">anti_join()</a></code>함수를 이용해 토큰데이터프레임과 배제결합한다.</p>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">stop_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>word <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"the"</span>,<span class="st">"for"</span>, <span class="st">"and"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">text_v</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span>output <span class="op">=</span> <span class="va">word</span>, input <span class="op">=</span> <span class="va">text</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html">anti_join</a></span><span class="op">(</span><span class="va">stop_df</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="va">word</span>, <span class="st">"\\d+"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">word</span>, sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code>## <span style="color: #555555;"># A tibble: 15 × 2</span>
##   word        n
##   <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #555555; font-style: italic;">&lt;int&gt;</span>
## <span style="color: #555555;">1</span> me          2
## <span style="color: #555555;">2</span> my          2
## <span style="color: #555555;">3</span> you         2
## <span style="color: #555555;">4</span> better      1
## <span style="color: #555555;">5</span> desire      1
## <span style="color: #555555;">6</span> earthly     1
## <span style="color: #555555;"># … with 9 more rows</span>
</code></pre>
</div>
</div>
<div id="filter" class="section level3" number="5.2.2">
<h3>
<span class="header-section-number">5.2.2</span> <code>filter()</code><a class="anchor" aria-label="anchor" href="#filter"><i class="fas fa-link"></i></a>
</h3>
<p><code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code>함수를 이용해 불용어사전을 수정하지 않고 불용어를 추가로 제거할 수 있다.</p>
<p>예를 들어, 숫자를 불용어로 취급해 제거하는 상황에서 숫자를 불용어 사전에 넣지 말고 <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code>로 걸러보자. 정규표현식(regex: regular expression)에서 숫자를 의미하는 <code>[:digit:]</code> 또는 <code>\\d</code>를 이용해 <code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code>함수와 <code><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect()</a></code>함수 및 부정연산자 <code>!</code>를 이용해 걸러낸다.</p>
<p><code><a href="https://dplyr.tidyverse.org/reference/filter.html">filter()</a></code>함수를 <code><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect()</a></code>함수와 함께 이용하는 이유는 다음과 같다.</p>
<p><code><a href="https://stringr.tidyverse.org/reference/str_subset.html">str_subset()</a></code>함수는 패턴이 일치하는 문자를 출력하는 반면, <code><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect()</a></code>함수는 패턴이 일치하는 문자에 대한 논리값(TRUE or FALSE)을 출력한다.</p>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">text_v</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span>output <span class="op">=</span> <span class="va">word</span>, input <span class="op">=</span> <span class="va">text</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html">anti_join</a></span><span class="op">(</span><span class="va">stop_words</span><span class="op">)</span></span>
<span><span class="va">df</span><span class="op">$</span><span class="va">word</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_subset.html">str_subset</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"\\d+"</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code>## [1] "1"
</code></pre>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span><span class="op">$</span><span class="va">word</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span>pattern <span class="op">=</span> <span class="st">"\\d+"</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code>##  [1] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE
## [10] FALSE
</code></pre>
<p>불용어를 제거한 다음 추가로 본문에서 숫자와 홑낫표”’“가 포함된 문제를 제거하자.</p>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">text_v</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span>output <span class="op">=</span> <span class="va">word</span>, input <span class="op">=</span> <span class="va">text</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html">anti_join</a></span><span class="op">(</span><span class="va">stop_words</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span></span>
<span>    <span class="op">!</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="va">word</span>, pattern <span class="op">=</span> <span class="st">"\\d+"</span><span class="op">)</span>,</span>
<span>    <span class="op">!</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html">str_detect</a></span><span class="op">(</span><span class="va">word</span>, pattern <span class="op">=</span> <span class="st">"you’re"</span><span class="op">)</span></span>
<span>    <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">word</span>, sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code>## <span style="color: #555555;"># A tibble: 8 × 2</span>
##   word          n
##   <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #555555; font-style: italic;">&lt;int&gt;</span>
## <span style="color: #555555;">1</span> desire        1
## <span style="color: #555555;">2</span> earthly       1
## <span style="color: #555555;">3</span> existence     1
## <span style="color: #555555;">4</span> fascinate     1
## <span style="color: #555555;">5</span> influence     1
## <span style="color: #555555;">6</span> inspire       1
## <span style="color: #555555;"># … with 2 more rows</span>
</code></pre>
</div>
</div>
<div id="정규화normalization" class="section level2" number="5.3">
<h2>
<span class="header-section-number">5.3</span> 정규화(Normalization)<a class="anchor" aria-label="anchor" href="#%EC%A0%95%EA%B7%9C%ED%99%94normalization"><i class="fas fa-link"></i></a>
</h2>
<div id="개괄" class="section level3" number="5.3.1">
<h3>
<span class="header-section-number">5.3.1</span> 개괄<a class="anchor" aria-label="anchor" href="#%EA%B0%9C%EA%B4%84"><i class="fas fa-link"></i></a>
</h3>
<p>정규화는 추출한 단어를 일정한 틀로 규격화하는 작업이다. 한 단어는 문법적인 기능에 따라 다양한 표현이 있다. ‘먹다’에는 ’먹었니’ ‘먹었다’ ‘먹고’ 등의 표현이 있다. ‘I’는 격에 따라 ’my’ ‘me’ ‘mine’ 등의 변형이 있다. 다양한 표현이 같은 의미를 나타낸다면 정규화를 통해 일정한 틀로 규격화해야 한다.</p>
<p>정규화는 형태소(morpheme) 추출, 어간(stem) 추출, 표제어(lemme) 추출 등을 이용해 달성할 수 있다.</p>
<ul>
<li>단어(word): 형태소의 집합. 자립이 가능한 최소 형태(예: 사과나무)</li>
<li>형태소(morpheme): 뜻을 지닌 가장 작은 말의 단위. 예를 들어, ’사과나무’는 ’사과’와 ’나무’로 나눠도 뜻을 지니지만, ’사과’를 ’사’와 ’과’로 나누면 의미가 사라진다.</li>
<li>어기(base): 어근과 어간 등 단어에서 실질적인 의미를 나타내는 형태소
<ul>
<li>어근(root) 어미와 직접결합이 안되는 어기. 예: ‘급하다’의 ’급’ ‘시원하다’의 ’시원’.</li>
<li>어간(stem) 어미와 직접결합이 되는 어기. 예: ‘뛰어라’의 ’뛰-’. ‘먹다’의 ’먹-’.</li>
</ul>
</li>
<li>표제어(lemme) 사전에 등재된 대표단어. 원형 혹은 기본형(canonical form)이라고도 한다.</li>
</ul>
</div>
<div id="형태소morpheme" class="section level3" number="5.3.2">
<h3>
<span class="header-section-number">5.3.2</span> 형태소(morpheme)<a class="anchor" aria-label="anchor" href="#%ED%98%95%ED%83%9C%EC%86%8Cmorpheme"><i class="fas fa-link"></i></a>
</h3>
<p>형태소는 뜻을 지난 가장 작은 말의 단위다.
‘바지가 크다’는 문장에서 단어는 ’바지’ ‘가’ ‘크다’가 있다. 형태소는 ’바지’ ‘가’ ‘크’ ‘다’로 구분할 수 있다. 명사인 ’바지’를 ’바’와 ’지’로 나누면 ’아랫도리에 입는 옷’이란 의미가 사라진다. 반면 형용사인 ’크다’에는 어간인 ’크-’에 ’크다’는 의미가 담겨 있고,’-다’에는 문장을 마무리하는 의미가 담겨 있다.</p>
<div id="품사태깅parts-of-speech-tagging-pos-tagging" class="section level5" number="5.3.2.0.1">
<h5>
<span class="header-section-number">5.3.2.0.1</span> 품사태깅(Parts of Speech Tagging: PoS Tagging)<a class="anchor" aria-label="anchor" href="#%ED%92%88%EC%82%AC%ED%83%9C%EA%B9%85parts-of-speech-tagging-pos-tagging"><i class="fas fa-link"></i></a>
</h5>
<p>형태소를 추출하기 위해서 문장의 단어에 품사를 붙인다(tag).</p>
<p>형태소 분석기마다 품사태깅의 방법이 조금씩 다르다. 한나눔(Hannaum)은 크게 9개 품사로 분류한뒤 22개로 세부 분류했다. Mecab-ko는 43개로 분류했다.</p>
<ul>
<li><a href="https://docs.google.com/spreadsheets/d/1OGAjUvalBuX-oZvZ_-9tEfYD2gQe7hTGsgUpiiBSXI8/edit#gid=0">한국어 품사 태그 비교표</a></li>
</ul>
<p>한나눔과 MeCab-ko의 품사태그 (Table <a href="text-clean.html#tab:postag">5.1</a>).</p>
<div class="inline-table"><table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:postag">Table 5.1: </span>한나눔과 MeCab-ko의 한국어 품사 태그 비교
</caption>
<thead><tr>
<th style="text-align:left;">
Hannanum09
</th>
<th style="text-align:left;">
(ntags=9)
</th>
<th style="text-align:left;">
Hannanum22
</th>
<th style="text-align:left;">
(ntags=22)
</th>
<th style="text-align:left;">
Mecab-ko
</th>
<th style="text-align:left;">
(ntags=43)
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Tag
</td>
<td style="text-align:left;">
Description
</td>
<td style="text-align:left;">
Tag
</td>
<td style="text-align:left;">
Description
</td>
<td style="text-align:left;">
Tag
</td>
<td style="text-align:left;">
Description
</td>
</tr>
<tr>
<td style="text-align:left;">
N
</td>
<td style="text-align:left;">
체언
</td>
<td style="text-align:left;">
NC
</td>
<td style="text-align:left;">
보통명사
</td>
<td style="text-align:left;">
NNG
</td>
<td style="text-align:left;">
일반 명사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
NQ
</td>
<td style="text-align:left;">
고유명사
</td>
<td style="text-align:left;">
NNP
</td>
<td style="text-align:left;">
고유 명사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
NB
</td>
<td style="text-align:left;">
의존명사
</td>
<td style="text-align:left;">
NNB
</td>
<td style="text-align:left;">
의존 명사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
NNBC
</td>
<td style="text-align:left;">
단위를 나타내는 명사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
NN
</td>
<td style="text-align:left;">
수사
</td>
<td style="text-align:left;">
NR
</td>
<td style="text-align:left;">
수사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
NP
</td>
<td style="text-align:left;">
대명사
</td>
<td style="text-align:left;">
NP
</td>
<td style="text-align:left;">
대명사
</td>
</tr>
<tr>
<td style="text-align:left;">
P
</td>
<td style="text-align:left;">
용언
</td>
<td style="text-align:left;">
PV
</td>
<td style="text-align:left;">
동사
</td>
<td style="text-align:left;">
VV
</td>
<td style="text-align:left;">
동사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
PA
</td>
<td style="text-align:left;">
형용사
</td>
<td style="text-align:left;">
VA
</td>
<td style="text-align:left;">
형용사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
PX
</td>
<td style="text-align:left;">
보조 용언
</td>
<td style="text-align:left;">
VX
</td>
<td style="text-align:left;">
보조 용언
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
VCP
</td>
<td style="text-align:left;">
긍정 지정사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
VCN
</td>
<td style="text-align:left;">
부정 지정사
</td>
</tr>
<tr>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
수식언
</td>
<td style="text-align:left;">
MM
</td>
<td style="text-align:left;">
관형사
</td>
<td style="text-align:left;">
MM
</td>
<td style="text-align:left;">
관형사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
MA
</td>
<td style="text-align:left;">
부사
</td>
<td style="text-align:left;">
MAG
</td>
<td style="text-align:left;">
일반 부사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
MAJ
</td>
<td style="text-align:left;">
접속 부사
</td>
</tr>
<tr>
<td style="text-align:left;">
I
</td>
<td style="text-align:left;">
독립언
</td>
<td style="text-align:left;">
II
</td>
<td style="text-align:left;">
감탄사
</td>
<td style="text-align:left;">
IC
</td>
<td style="text-align:left;">
감탄사
</td>
</tr>
<tr>
<td style="text-align:left;">
J
</td>
<td style="text-align:left;">
관계언
</td>
<td style="text-align:left;">
JC
</td>
<td style="text-align:left;">
격조사
</td>
<td style="text-align:left;">
JKS
</td>
<td style="text-align:left;">
주격 조사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
JKC
</td>
<td style="text-align:left;">
보격 조사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
JKG
</td>
<td style="text-align:left;">
관형격 조사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
JKO
</td>
<td style="text-align:left;">
목적격 조사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
JKB
</td>
<td style="text-align:left;">
부사격 조사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
JKV
</td>
<td style="text-align:left;">
호격 조사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
JKQ
</td>
<td style="text-align:left;">
인용격 조사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
JC
</td>
<td style="text-align:left;">
접속 조사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
JX
</td>
<td style="text-align:left;">
보조사
</td>
<td style="text-align:left;">
JX
</td>
<td style="text-align:left;">
보조사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
JP
</td>
<td style="text-align:left;">
서술격 조사
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
E
</td>
<td style="text-align:left;">
어미
</td>
<td style="text-align:left;">
EP
</td>
<td style="text-align:left;">
선어말어미
</td>
<td style="text-align:left;">
EP
</td>
<td style="text-align:left;">
선어말어미
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
EF
</td>
<td style="text-align:left;">
종결 어미
</td>
<td style="text-align:left;">
EF
</td>
<td style="text-align:left;">
종결 어미
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
EC
</td>
<td style="text-align:left;">
연결 어미
</td>
<td style="text-align:left;">
EC
</td>
<td style="text-align:left;">
연결 어미
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
ET
</td>
<td style="text-align:left;">
전성 어미
</td>
<td style="text-align:left;">
ETN
</td>
<td style="text-align:left;">
명사형 전성 어미
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
ETM
</td>
<td style="text-align:left;">
관형형 전성 어미
</td>
</tr>
<tr>
<td style="text-align:left;">
X
</td>
<td style="text-align:left;">
접사
</td>
<td style="text-align:left;">
XP
</td>
<td style="text-align:left;">
접두사
</td>
<td style="text-align:left;">
XPN
</td>
<td style="text-align:left;">
체언 접두사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
XS
</td>
<td style="text-align:left;">
접미사
</td>
<td style="text-align:left;">
XSN
</td>
<td style="text-align:left;">
명사파생 접미사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
XSV
</td>
<td style="text-align:left;">
동사 파생 접미사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
XSA
</td>
<td style="text-align:left;">
형용사 파생 접미사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
XR
</td>
<td style="text-align:left;">
어근
</td>
</tr>
<tr>
<td style="text-align:left;">
S
</td>
<td style="text-align:left;">
기호
</td>
<td style="text-align:left;">
S
</td>
<td style="text-align:left;">
기호
</td>
<td style="text-align:left;">
SF
</td>
<td style="text-align:left;">
마침표, 물음표, 느낌표
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
SE
</td>
<td style="text-align:left;">
줄임표 …
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
SSO
</td>
<td style="text-align:left;">
여는 괄호 (, [ ]
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
SC
</td>
<td style="text-align:left;">
구분자 , · / :
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
SY
</td>
<td style="text-align:left;">
기타 기호
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
SH
</td>
<td style="text-align:left;">
한자
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
SL
</td>
<td style="text-align:left;">
외국어
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
SN
</td>
<td style="text-align:left;">
숫자
</td>
</tr>
<tr>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
외국어
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
외국어
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div id="형태소-추출" class="section level3" number="5.3.3">
<h3>
<span class="header-section-number">5.3.3</span> 형태소 추출<a class="anchor" aria-label="anchor" href="#%ED%98%95%ED%83%9C%EC%86%8C-%EC%B6%94%EC%B6%9C"><i class="fas fa-link"></i></a>
</h3>
<p>정규화는 형태소를 추출해 달성할 수 있다. R의 대표적인 형태소 분석기로는 <code>RcppMeCab</code>와 <code>KoNLP</code>가 있다.</p>
<div id="rcppmecab" class="section level4" number="5.3.3.1">
<h4>
<span class="header-section-number">5.3.3.1</span> <code>RcppMeCab</code><a class="anchor" aria-label="anchor" href="#rcppmecab"><i class="fas fa-link"></i></a>
</h4>
<p>한국어뿐 아니라 일본어와 중국어 형태소 분석도 가능하고 실행속도가 빠르다.<br>
일본교토대학정보학연구대학원과 일본전신전화의 커뮤니케이션기본과학연구소가 공동으로 개발한 오픈소스 형태소 분석기 <a href="https://taku910.github.io/mecab/"><code>MeCab</code></a> 기반이다. <a href="https://bitbucket.org/eunjeon/mecab-ko-dic/src/master/">은전</a> 프로젝트로 한국어 형태소를 분석할수 있게 개발했다. <a href="https://github.com/junhewk/RcppMeCab"><code>RcppMeCab</code>패키지</a>는 <code>MeCab</code>을 R에서 사용할 수 있도록 한 패키지다. 일본어 기반이라 띄어쓰기에 덜 민감하다.</p>
</div>
<div id="konlp" class="section level4" number="5.3.3.2">
<h4>
<span class="header-section-number">5.3.3.2</span> <code>KoNLP</code><a class="anchor" aria-label="anchor" href="#konlp"><i class="fas fa-link"></i></a>
</h4>
<p>Java 기반의 한나눔(Hannanum) 분석기 기반이다. 널리 사용되는 형태소분석기다. NIADic, Sejong등 사전을 선택할 수 있다. <a href="https://github.com/haven-jeon/KoNLP/blob/master/etcs/KoNLP-API.md">사용설명서</a>가 있고, 사용자 사전을 수정하기 용이하다.</p>
</div>
</div>
<div id="rcppmecab-1" class="section level3" number="5.3.4">
<h3>
<span class="header-section-number">5.3.4</span> RcppMeCab<a class="anchor" aria-label="anchor" href="#rcppmecab-1"><i class="fas fa-link"></i></a>
</h3>
<p><code>RcppMeCab</code>패키지를 설치하고 실행하자. 설치되는 기본폴더는 <code>C:\mecab</code>다. 설치폴더를 변경하지 않는다.</p>
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'RcppMeCab'</span><span class="op">)</span></span></code></pre></div>
<p><strong>주의</strong></p>
<p>C드라이브에 <code>C:\mecab</code>폴더가 생성됐는지 확인한다. 사전파일이 이곳에 있다. 만일 <code>C:\mecab</code>폴더가 생성되지 않았다면 설치가 안된것이다. RStudio를 관리자권한으로 실행해 설치한다.</p>
<p>만일, RStudio를 관리자권한으로 실행해 설치해도 <code>C:\mecab</code>가 생성되지 않는경우, <a href="https://1drv.ms/u/s!AkK5d7f0xyCHkH1yCmXI_sHq4T8V?e=uZWpey">이 링크</a>에서 사전파일을 다운로드 받아 파일을 압축해제해 복사한다. <code>C:\mecab</code>가 생성되고, 이 폴더 바로 아래에 <code>libmecab.dll</code>파일과 <code>mecab-ko-dic</code>폴더가 생성돼 있어야 한다.</p>
<p>기본함수는 <code><a href="https://rdrr.io/pkg/RcppMeCab/man/pos.html">pos()</a></code>다. 문자벡터를 받아 리스트로 산출한다.</p>
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">RcppMeCab</span><span class="op">)</span></span>
<span><span class="va">test</span> <span class="op">&lt;-</span> <span class="st">"한글 테스트 입니다."</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/RcppMeCab/man/pos.html">pos</a></span><span class="op">(</span><span class="va">test</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code>## $`한글 테스트 입니다.`
## [1] "한글/NNG"      "테스트/NNG"    "입니다/VCP+EF"
## [4] "./SF"
</code></pre>
<p>한글이 깨지는 경우가 있는데, 이는 한글인코딩 방식이 맞지 않기 때문이다. 윈도는 EUC-KR방식을 확장한 CP949방식을 사용하기 때문에 UTF-8방식과 호환이 안된다. 이 경우 <code>enc2utf8</code>함수를 이용해 한글인코딩 방식을 UTF-8으로 변경한다.</p>
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="va">test_v</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Encoding.html">enc2utf8</a></span><span class="op">(</span><span class="va">test</span><span class="op">)</span></span>
<span><span class="va">test_v</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">pos</span></span></code></pre></div>
<pre class="r-output"><code>## $`한글 테스트 입니다.`
## [1] "한글/NNG"      "테스트/NNG"    "입니다/VCP+EF"
## [4] "./SF"
</code></pre>
<p>참고: UTF-8을 CP949로 인코딩을 바꾸고 싶으면 <code>iconv</code>함수를 이용한다.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="text-clean.html#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">iconv</span>(x, <span class="at">from =</span> <span class="st">"UTF-8"</span>, <span class="at">to =</span> <span class="st">"CP949"</span>)<span class="st">`</span></span></code></pre></div>
<p><code>x</code>는 문자벡터. 자세한 사용법은 <code><a href="https://rdrr.io/r/base/iconv.html">?iconv</a></code> 참조.</p>
<div id="join-false" class="section level4" number="5.3.4.1">
<h4>
<span class="header-section-number">5.3.4.1</span> <code>join = FALSE</code><a class="anchor" aria-label="anchor" href="#join-false"><i class="fas fa-link"></i></a>
</h4>
<p><code>join = FALSE</code>인자를 이용하면 품사태그를 제외하고 형태소만 산출한다.</p>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">test_v</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/RcppMeCab/man/pos.html">pos</a></span><span class="op">(</span>join <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code>## $`한글 테스트 입니다.`
##      NNG      NNG   VCP+EF       SF 
##   "한글" "테스트" "입니다"      "."
</code></pre>
</div>
<div id="format-data.frame" class="section level4" number="5.3.4.2">
<h4>
<span class="header-section-number">5.3.4.2</span> <code>format = "data.frame"</code><a class="anchor" aria-label="anchor" href="#format-data.frame"><i class="fas fa-link"></i></a>
</h4>
<p><code>format = "data.frame"</code>을 지정하면 데이터프레임으로 산출한다.</p>
<div class="sourceCode" id="cb72"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">test_v</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/RcppMeCab/man/pos.html">pos</a></span><span class="op">(</span>format <span class="op">=</span> <span class="st">"data.frame"</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code>##   doc_id sentence_id token_id  token    pos subtype
## 1      1           1        1   한글    NNG        
## 2      1           1        2 테스트    NNG    행위
## 3      1           1        3 입니다 VCP+EF        
## 4      1           1        4      .     SF
</code></pre>
</div>
<div id="posparallelx" class="section level4" number="5.3.4.3">
<h4>
<span class="header-section-number">5.3.4.3</span> <code>posParallel(x)</code><a class="anchor" aria-label="anchor" href="#posparallelx"><i class="fas fa-link"></i></a>
</h4>
<p><code><a href="https://rdrr.io/pkg/RcppMeCab/man/posParallel.html">posParallel()</a></code>함수는 메모리를 많이 사용하지만 처리속도가 빠르다.</p>
<div class="sourceCode" id="cb73"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">test_v</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/RcppMeCab/man/posParallel.html">posParallel</a></span><span class="op">(</span>format <span class="op">=</span> <span class="st">"data.frame"</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code>##   doc_id sentence_id token_id  token    pos subtype
## 1      1           1        1   한글    NNG        
## 2      1           1        2 테스트    NNG    행위
## 3      1           1        3 입니다 VCP+EF        
## 4      1           1        4      .     SF
</code></pre>
</div>
</div>
<div id="konlp-1" class="section level3" number="5.3.5">
<h3>
<span class="header-section-number">5.3.5</span> <code>KoNLP</code><a class="anchor" aria-label="anchor" href="#konlp-1"><i class="fas fa-link"></i></a>
</h3>
<p>형태소 분석기 한나눔(Hannanum)을 R에서 사용할 수 있도록한 패키지다. CRAN에서 내려져 있기 때문에 <a href="https://github.com/haven-jeon/KoNLP">개발자 깃헙</a>에서 <code>remote</code>패키지의 <code>install_github()</code>함수를 이용해 설치한다.</p>
<p><code>KoNLP</code>를 설치하기 위해서는 자바와 <code>rtools</code>가 필요하다.</p>
<div id="자바jdk" class="section level4" number="5.3.5.1">
<h4>
<span class="header-section-number">5.3.5.1</span> 자바JDK<a class="anchor" aria-label="anchor" href="#%EC%9E%90%EB%B0%94jdk"><i class="fas fa-link"></i></a>
</h4>
<ol style="list-style-type: decimal">
<li>
<a href="https://www.oracle.com/java/technologies/javase-downloads.html">자바JDK</a>를 다운로드받아 설치한다.</li>
</ol>
<p><code>jdk</code>설치여부는 <code>C:\Program Files\Java\jdk-16</code>폴더에서 확인할 수 있다. Java SE 16보다 최신 버전이 있으면 최신버전으로 새로 설치한다.</p>
<ol start="2" style="list-style-type: decimal">
<li>윈도 <code>시스템 속성</code>창의 <code>환경변수</code>에서 <code>JAVA_HOME</code>을 설정한다.</li>
</ol>
<p><strong><code>시스템 속성</code>창 여는 방법</strong></p>
<ul>
<li>간단한 방법:</li>
</ul>
<p>윈도 실행창 단축키인 <code>윈도키</code>와 키보드의 <code>R</code>을 함께 누르면 윈도 실행창이 열린다. 실행창이 뜨면 <code>sysdm.cpl ,3</code>을 입력하고 엔터키를 누르면 <code>시스템 속성</code> 창이 열린다.</p>
<ul>
<li>복잡한 방법 (윈도10 기준):</li>
</ul>
<ol style="list-style-type: decimal">
<li><p>윈도탐색기에서 <code>내 PC</code>에 마우스 커서를 놓고 마우스 오른쪽 버튼 클릭 -&gt; <code>속성(R)</code> 클릭해 윈도설정에서 <code>정보</code>창이 열린다.</p></li>
<li><p>윈도설정에서 <code>정보</code>창이 열리면 <code>관련설정</code> 항목에서 <code>고급 시스템 설정</code> 클릭하면 <code>시스템 속성</code> 창의 <code>고급</code> 탭이 열린다.</p></li>
</ol>
<p><strong><code>환경변수</code> 설정하기</strong></p>
<ol style="list-style-type: decimal">
<li><p><code>시스템 속성</code>창 하단의 <code>환경설정</code>버튼을 클릭한다. <code>환경변수</code>창이 열리면 <code>시스템변수(S)</code>아래의 <code>새로만들기(W)</code>버튼을 클릭한다.</p></li>
<li><p><code>새 시스템 변수</code> 창이 열리면 <code>변수 이름(N):</code>에 <code>JAVA_HOME</code>을 기입하고, <code>변수 값(V)</code>에서 JDK설치 경로 <code>C:\Program Files\Java\jdk-16\</code>를 기입하고 <code>확인</code>을 클릭한다.</p></li>
</ol>
</div>
<div id="rtools" class="section level4" number="5.3.5.2">
<h4>
<span class="header-section-number">5.3.5.2</span> <code>rtools</code><a class="anchor" aria-label="anchor" href="#rtools"><i class="fas fa-link"></i></a>
</h4>
<ol style="list-style-type: decimal">
<li><p>CRAN의 <a href="https://cran.r-project.org/bin/windows/Rtools/"><code>rtools</code>페이지</a>에 접속한다.</p></li>
<li><p>설치된 R버전과 일치하는 버전의 <code>rtools</code>를 다운로드받는다. R이 4.0대 버전이면 <code>rtools40</code>을 설치한다.</p></li>
</ol>
<ul>
<li>
<code>rtools</code>는 다른 패키지와 달리 <code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages()</a></code>함수로 설치하지 않고, 설치파일을 컴퓨터에서 직접 실행해 설치한다.</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>설치할때 경로변경하지 말고 <code>C:/Rtools</code>에 설치한다. 실치과정에서 <code>Add rtools to system PATH</code>가 체크돼 있는지 확인한다.</li>
</ol>
<ul>
<li>기타 KoNLP 설치이슈에 대해서는 <a href="https://www.facebook.com/notes/r-korea-krugkorean-r-user-group/konlp-%EC%84%A4%EC%B9%98-%EC%9D%B4%EC%8A%88-%EA%B3%B5%EC%9C%A0/1847510068715020/">이 문서</a> 참조</li>
</ul>
</div>
<div id="의존패키지" class="section level4" number="5.3.5.3">
<h4>
<span class="header-section-number">5.3.5.3</span> 의존패키지<a class="anchor" aria-label="anchor" href="#%EC%9D%98%EC%A1%B4%ED%8C%A8%ED%82%A4%EC%A7%80"><i class="fas fa-link"></i></a>
</h4>
<p>설치할 때 오류가 나는 경우가 있다. 의존패키지(패키지작동에 필요한 다른 패키지)가 설치돼 있지 않기 때문이다. 다음은 KoNLP의존 패키지다.</p>
<ul>
<li>rJava (&gt;= 0.9-8),</li>
<li>utils (&gt;= 3.3.1),</li>
<li>stringr (&gt;= 1.1.0),</li>
<li>hash (&gt;= 2.2.6),</li>
<li>tau (&gt;= 0.0-18),</li>
<li>Sejong (&gt;= 0.01),</li>
<li>RSQLite (&gt;= 1.0.0),</li>
<li>devtools (&gt;= 1.12.0)</li>
</ul>
<p>아래 코드로 필요한 패키지가 이미 설치돼 있는지 확인할 수 있다.</p>
<div class="sourceCode" id="cb74"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">package_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"rJava"</span>, <span class="st">"utils"</span>, <span class="st">"stringr"</span>, <span class="st">"hash"</span>, <span class="st">"remote"</span>,</span>
<span>                  <span class="st">"tau"</span>, <span class="st">"Sejong"</span>, <span class="st">"RSQLite"</span>, <span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="op">(</span> <span class="va">package_list_installed</span> <span class="op">&lt;-</span> <span class="va">package_list</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/installed.packages.html">installed.packages</a></span><span class="op">(</span><span class="op">)</span><span class="op">[</span>,<span class="st">"Package"</span><span class="op">]</span> <span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code>## [1] FALSE  TRUE  TRUE FALSE FALSE FALSE FALSE  TRUE  TRUE
</code></pre>
<div class="sourceCode" id="cb75"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span> <span class="va">new_pkg</span> <span class="op">&lt;-</span> <span class="va">package_list</span><span class="op">[</span><span class="op">!</span><span class="va">package_list_installed</span><span class="op">]</span> <span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code>## [1] "rJava"  "hash"   "remote" "tau"    "Sejong"
</code></pre>
<p>아래 코드로 미설치된 패키지를 한번에 설치할 수 있다. 만일 설치가 안되면 이 교재 <a href="https://bookdown.org/ahn_media/bookdown-demo/prep.html#%EC%98%A4%EB%A5%98error"><code>2.4 오류</code></a>를 참고해 개별적으로 설치한다.</p>
<div class="sourceCode" id="cb76"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">new_pkg</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="va">new_pkg</span><span class="op">)</span></span></code></pre></div>
<p>의존성 패키지가 의존하는 패키지가 있다. 만일 오류메시지가 나오면 메시지를 잘 읽어보고, 필요한 패키지를 추가로 설치한다.</p>
<p>KoNLP설치 준비가 됐으면 아래 코드로 설치한다.</p>
<div class="sourceCode" id="cb77"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">'haven-jeon/KoNLP'</span>, </span>
<span>                        upgrade <span class="op">=</span> <span class="st">"never"</span>, </span>
<span>                        INSTALL_opts<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"--no-multiarch"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>제대로 설치됐는지 확인해보자.</p>
<div class="sourceCode" id="cb78"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># library(KoNLP)</span></span>
<span><span class="co"># extractNoun("한글테스트입니다.")</span></span>
<span><span class="co"># SimplePos09("한글테스트입니다.")</span></span></code></pre></div>
<p><code>KoNLP</code>에서 사용할 사전을 설치하자. <code>NIADic</code>이 <code>SejongDic</code>보다 더 많은 형태소를 포함하고 있다. 설치과정에서 기 설치된 패키지 업데이트 여부를 묻는다. 모두 최신버전으로 업데이트한다.</p>
<div class="sourceCode" id="cb79"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">useNIADic</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>한글띄어쓰기가 안돼 있는 문서는 <code>autoSpacing = T</code>인자를 투입한다.</p>
<div class="sourceCode" id="cb80"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="st">"아버지가가방에들어가신다"</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">SimplePos09</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="st">"아버지가가방에들어가신다"</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">SimplePos09</span><span class="op">(</span>autoSpacing <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></code></pre></div>
<p>띄어쓰기 안된 문서의 행태소 분석에는 <code>MeCab</code>이 유리하다.</p>
<div class="sourceCode" id="cb81"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="st">"한글테스트입니다"</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">SimplePos09</span><span class="op">(</span>autoSpacing <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span>
<span><span class="st">"한글테스트입니다"</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/Encoding.html">enc2utf8</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">RcppMeCab</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/RcppMeCab/man/pos.html">pos</a></span><span class="op">(</span><span class="op">)</span> </span>
<span><span class="st">"아버지가가방에들어가신다"</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/Encoding.html">enc2utf8</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">RcppMeCab</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/RcppMeCab/man/pos.html">pos</a></span><span class="op">(</span><span class="op">)</span> </span></code></pre></div>
<p><code>KoNLP</code>를 이용해 띄어쓰기가 잘 안된 문서를 분석할 때는 <code>KoSpacing</code>패키지로 띄어쓰기를 조절할 수 있다(설치과정이 복잡하므로 선택 사항.)</p>
<div class="sourceCode" id="cb82"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># remotes::install_github("haven-jeon/KoSpacing")</span></span>
<span><span class="co"># library(KoSpacing)</span></span>
<span><span class="co"># set_env()</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># spacing("한글테스트입니다.")</span></span></code></pre></div>
<p><code>KoNLP</code>의 장점은 기존 사전에 사용자사전을 추가할 수 있다는데 있다.</p>
<div class="sourceCode" id="cb83"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="st">"힣탈로미를 어떻게 할까요"</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">SimplePos09</span></span></code></pre></div>
<div class="sourceCode" id="cb84"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">buildDictionary</span><span class="op">(</span>ext_dic <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'sejong'</span>, <span class="st">'woorimalsam'</span><span class="op">)</span>,</span>
<span>                user_dic <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>term<span class="op">=</span><span class="st">"전작권"</span>, tag<span class="op">=</span><span class="st">'ncn'</span><span class="op">)</span>,</span>
<span>                category_dic_nms<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">'political'</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">buildDictionary</span><span class="op">(</span>ext_dic <span class="op">=</span> <span class="st">"woorimalsam"</span>, </span>
<span>                user_dic<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span><span class="st">"힣탈로미"</span>, <span class="st">"ncn"</span><span class="op">)</span>,</span>
<span>                replace_usr_dic <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div id="konlpy" class="section level3" number="5.3.6">
<h3>
<span class="header-section-number">5.3.6</span> <code>KoNLPy</code><a class="anchor" aria-label="anchor" href="#konlpy"><i class="fas fa-link"></i></a>
</h3>
<p>형태소 분석기로는 한나눔(Hannanum)과 MeCab외 꼬꼬마(Kkma), 코모란(Komoran), Okt 등의 형태소는 파이썬 패키지인 <code>KoNLPy</code>로 추출가능하다.</p>
<p>구글 colab에서 파이썬을 구동하면 <code>KoNLPy</code>패키지를 설치해 다양한 패키지로 형태소를 분석할 수 있다.</p>
</div>
<div id="연습-1" class="section level3" number="5.3.7">
<h3>
<span class="header-section-number">5.3.7</span> 연습<a class="anchor" aria-label="anchor" href="#%EC%97%B0%EC%8A%B5-1"><i class="fas fa-link"></i></a>
</h3>
<p>이상의 <code>오감도</code>를 <code>KoNLP</code>와 <code>RcppMeCab</code>을 이용해 각각 형태소분석해 자주 사용된 단어의 빈도를 비교하자. 이 결과를 형태소를 추출하지 않은 결과와도 비교하자.</p>
<div class="sourceCode" id="cb85"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ogamdo_txt</span> <span class="op">&lt;-</span> <span class="st">"13인의 아해가 도로로 질주하오.</span></span>
<span><span class="st">(길은 막다른 골목이 적당하오.)</span></span>
<span><span class="st"></span></span>
<span><span class="st">제1의 아해가 무섭다고 그리오.</span></span>
<span><span class="st">제2의 아해도 무섭다고 그리오.</span></span>
<span><span class="st">제3의 아해도 무섭다고 그리오.</span></span>
<span><span class="st">제4의 아해도 무섭다고 그리오.</span></span>
<span><span class="st">제5의 아해도 무섭다고 그리오.</span></span>
<span><span class="st">제6의 아해도 무섭다고 그리오.</span></span>
<span><span class="st">제7의 아해도 무섭다고 그리오.</span></span>
<span><span class="st">제8의 아해도 무섭다고 그리오.</span></span>
<span><span class="st">제9의 아해도 무섭다고 그리오.</span></span>
<span><span class="st">제10의 아해도 무섭다고 그리오.</span></span>
<span><span class="st">제11의 아해가 무섭다고 그리오.</span></span>
<span><span class="st">제12의 아해도 무섭다고 그리오.</span></span>
<span><span class="st">제13의 아해도 무섭다고 그리오.</span></span>
<span><span class="st">13인의 아해는 무서운 아해와 무서워하는 아해와 그렇게뿐이 모였소.(다른 사정은 없는 것이 차라리 나았소)</span></span>
<span><span class="st"></span></span>
<span><span class="st">그중에 1인의 아해가 무서운 아해라도 좋소.</span></span>
<span><span class="st">그중에 2인의 아해가 무서운 아해라도 좋소.</span></span>
<span><span class="st">그중에 2인의 아해가 무서워하는 아해라도 좋소.</span></span>
<span><span class="st">그중에 1인의 아해가 무서워하는 아해라도 좋소.</span></span>
<span><span class="st"></span></span>
<span><span class="st">(길은 뚫린 골목이라도 적당하오.)</span></span>
<span><span class="st">13인의 아해가 도로로 질주하지 아니하여도 좋소."</span></span></code></pre></div>
<div id="konlp-2" class="section level4" number="5.3.7.1">
<h4>
<span class="header-section-number">5.3.7.1</span> <code>KoNLP</code><a class="anchor" aria-label="anchor" href="#konlp-2"><i class="fas fa-link"></i></a>
</h4>
<p><code>KoNLP</code>의 <code>SimplePos09()</code>함수를 <code>unnset_tokens()</code>의 <code>token =</code>인자로 투입하면 오류가 발생한다.</p>
<div class="sourceCode" id="cb86"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ogamdo_txt</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">.</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">text</span>, token <span class="op">=</span> <span class="va">SimplePos09</span><span class="op">)</span></span></code></pre></div>
<p>문자벡터에서 형태소 추출해 데이터프레임으로 저장한다.</p>
<div class="sourceCode" id="cb87"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ogamdo_txt</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">SimplePos09</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/flatten.html">flatten_dfc</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html">everything</a></span><span class="op">(</span><span class="op">)</span>, names_to <span class="op">=</span> <span class="st">"header"</span>, values_to <span class="op">=</span> <span class="st">"value"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/separate_rows.html">separate_rows</a></span><span class="op">(</span><span class="va">value</span>, sep <span class="op">=</span> <span class="st">"\\+"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/separate.html">separate</a></span><span class="op">(</span><span class="va">value</span>, into <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"word"</span>, <span class="st">"pos"</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">"/"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">word</span>, sort <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_length.html">str_length</a></span><span class="op">(</span><span class="va">word</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_max</a></span><span class="op">(</span><span class="va">n</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>word <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html">reorder</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><code>KoNLP</code>의 <code>extractNoun()</code>함수 이용</p>
<div class="sourceCode" id="cb88"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ogamdo_txt</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">extractNoun</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">.</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="rcppmecab-2" class="section level4" number="5.3.7.2">
<h4>
<span class="header-section-number">5.3.7.2</span> <code>RcppMeCab</code><a class="anchor" aria-label="anchor" href="#rcppmecab-2"><i class="fas fa-link"></i></a>
</h4>
<p><code>RcppMeCab</code>의 <code><a href="https://rdrr.io/pkg/RcppMeCab/man/pos.html">pos()</a></code>함수 이용</p>
<div class="sourceCode" id="cb89"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Encoding.html">enc2utf8</a></span><span class="op">(</span><span class="va">ogamdo_txt</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/RcppMeCab/man/pos.html">pos</a></span><span class="op">(</span>format <span class="op">=</span> <span class="st">"data.frame"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">token</span><span class="op">:</span><span class="va">pos</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">token</span>, sort <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_length.html">str_length</a></span><span class="op">(</span><span class="va">token</span><span class="op">)</span> <span class="op">&gt;</span><span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_max</a></span><span class="op">(</span><span class="va">n</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>token <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html">reorder</a></span><span class="op">(</span><span class="va">token</span>, <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="va">ggplot</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">token</span>, <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="21-text-cleansing_files/figure-html/clean45-1.png" width="576" style="display: block; margin: auto;"></div>
<p><code>RcppMeCab</code>의 <code><a href="https://rdrr.io/pkg/RcppMeCab/man/pos.html">pos()</a></code>함수는 <code><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens()</a></code>의 <code>token =</code>인자에 투입해도 된다.</p>
<div class="sourceCode" id="cb90"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ogamdo_txt</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">enc2utf8</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">.</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">text</span>, token <span class="op">=</span> <span class="va">pos</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/separate.html">separate</a></span><span class="op">(</span>col <span class="op">=</span> <span class="va">word</span>, </span>
<span>           into <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"word"</span>, <span class="st">"morph"</span><span class="op">)</span>, </span>
<span>           sep <span class="op">=</span> <span class="st">"/"</span> <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">word</span>, sort <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_length.html">str_length</a></span><span class="op">(</span><span class="va">word</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_max</a></span><span class="op">(</span><span class="va">n</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>word <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html">reorder</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="21-text-cleansing_files/figure-html/clean46-1.png" width="576" style="display: block; margin: auto;"></div>
</div>
<div id="형태소-미추출" class="section level4" number="5.3.7.3">
<h4>
<span class="header-section-number">5.3.7.3</span> 형태소 미추출<a class="anchor" aria-label="anchor" href="#%ED%98%95%ED%83%9C%EC%86%8C-%EB%AF%B8%EC%B6%94%EC%B6%9C"><i class="fas fa-link"></i></a>
</h4>
<div class="sourceCode" id="cb91"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ogamdo_txt</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">.</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">text</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">word</span>, sort <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_length.html">str_length</a></span><span class="op">(</span><span class="va">word</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_max</a></span><span class="op">(</span><span class="va">n</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>word <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html">reorder</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="inline-figure"><img src="21-text-cleansing_files/figure-html/clean47-1.png" width="576" style="display: block; margin: auto;"></div>
</div>
<div id="비교" class="section level4" number="5.3.7.4">
<h4>
<span class="header-section-number">5.3.7.4</span> 비교<a class="anchor" aria-label="anchor" href="#%EB%B9%84%EA%B5%90"><i class="fas fa-link"></i></a>
</h4>
<p>먼저 데이터프레임으로 결합한 후 행과 열 확인.</p>
<div class="sourceCode" id="cb92"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">KoNLP_df</span> <span class="op">&lt;-</span> <span class="va">ogamdo_txt</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">SimplePos09</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://purrr.tidyverse.org/reference/flatten.html">flatten_dfc</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html">pivot_longer</a></span><span class="op">(</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/everything.html">everything</a></span><span class="op">(</span><span class="op">)</span>, names_to <span class="op">=</span> <span class="st">"header"</span>, values_to <span class="op">=</span> <span class="st">"value"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/separate_rows.html">separate_rows</a></span><span class="op">(</span><span class="va">value</span>, sep <span class="op">=</span> <span class="st">"\\+"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/separate.html">separate</a></span><span class="op">(</span><span class="va">value</span>, into <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"word"</span>, <span class="st">"pos"</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">"/"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">word</span>, sort <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_length.html">str_length</a></span><span class="op">(</span><span class="va">word</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_max</a></span><span class="op">(</span><span class="va">n</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="va">MeCab_df</span> <span class="op">&lt;-</span> <span class="va">ogamdo_txt</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="va">enc2utf8</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">.</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">text</span>, token <span class="op">=</span> <span class="va">pos</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/separate.html">separate</a></span><span class="op">(</span>col <span class="op">=</span> <span class="va">word</span>, </span>
<span>           into <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"word"</span>, <span class="st">"morph"</span><span class="op">)</span>, </span>
<span>           sep <span class="op">=</span> <span class="st">"/"</span> <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">word</span>, sort <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_length.html">str_length</a></span><span class="op">(</span><span class="va">word</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_max</a></span><span class="op">(</span><span class="va">n</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="va">word_df</span> <span class="op">&lt;-</span> <span class="va">ogamdo_txt</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">.</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">text</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">word</span>, sort <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_length.html">str_length</a></span><span class="op">(</span><span class="va">word</span><span class="op">)</span> <span class="op">&gt;</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_max</a></span><span class="op">(</span><span class="va">n</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="va">KoNLP_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">MeCab_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">word_df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>행의 수와 열의 이름이 같으므로 세 데이터프레임을 행방향 결합할 수 있다. 결합한 데이터프레임으로 막대도표로 시각화한다.</p>
<div class="sourceCode" id="cb93"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span><span class="op">(</span>KoNLP <span class="op">=</span> <span class="va">KoNLP_df</span>, MeCab <span class="op">=</span> <span class="va">MeCab_df</span>, word <span class="op">=</span> <span class="va">word_df</span>, .id <span class="op">=</span> <span class="st">"ID"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>word <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html">reorder</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">n</span>, fill <span class="op">=</span> <span class="va">ID</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>세 경우에 대해 <code>ID</code>열로 값이 부여돼 있으므로 <code><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap()</a></code>함수로 구분할 수 있다.</p>
<div class="sourceCode" id="cb94"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>word <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html">reorder</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">n</span>, fill <span class="op">=</span> <span class="va">ID</span><span class="op">)</span>, show.legend <span class="op">=</span> <span class="cn">F</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">ID</span><span class="op">)</span></span></code></pre></div>
<p>라벨을 세개의 도표에 분리해 표시하자. scales =인자를 “free”로 지정한다. 기본값은 “fixed”다.</p>
<div class="sourceCode" id="cb95"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>word <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html">reorder</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">n</span>, fill <span class="op">=</span> <span class="va">ID</span><span class="op">)</span>, show.legend <span class="op">=</span> <span class="cn">F</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">ID</span>, scales <span class="op">=</span> <span class="st">"free"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"형태소분석기 비교"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">"단어"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"빈도"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">24</span>, hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>        axis.title.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">18</span><span class="op">)</span>,</span>
<span>        axis.title.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">18</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div id="어간stem-추출" class="section level3" number="5.3.8">
<h3>
<span class="header-section-number">5.3.8</span> 어간(stem) 추출<a class="anchor" aria-label="anchor" href="#%EC%96%B4%EA%B0%84stem-%EC%B6%94%EC%B6%9C"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li><p>단어(word): 형태소의 집합. 자립이 가능한 최소 형태(예: 사과나무)</p></li>
<li><p>형태소(morpheme): 뜻을 지닌 가장 작은 말의 단위. 예를 들어, ’사과나무’는 ’사과’와 ’나무’로 나눠도 뜻을 지니지만, ’사과’를 ’사’와 ’과’로 나누면 의미가 사라진다.</p></li>
<li>
<p>어기(base): 어근과 어간 등 단어에서 실질적인 의미를 나타내는 형태소</p>
<ul>
<li><p>어근(root) 어미와 직접결합이 안되는 어기. 예: ‘급하다’의 ’급’ ‘시원하다’의 ’시원.’</p></li>
<li><p>어간(stem) 어미와 직접결합이 되는 어기. 예: ‘뛰어라’의 ’뛰-.’ ‘먹다’의 ’먹-.’</p></li>
</ul>
</li>
<li><p>표제어(lemme) 사전에 등재된 대표단어. 원형 혹은 기본형(canonical form)이라고도 한다.</p></li>
</ul>
<p>어간추출과 표제어 추출에 대한 설명 <a href="https://smltar.com/stemming.html">참고 문헌</a></p>
<p><strong>어간추출 패키지</strong></p>
<ul>
<li><code>SnowballC</code></li>
</ul>
<p>어간추출로 널리 사용되는 알고리듬인 포터 알고리듬 스테밍을 적용.</p>
<ul>
<li><code>hunspell</code></li>
</ul>
<p>포터알고리즘에 사전 방식 결합</p>
<p><code>SnowballC</code>와 <code>hunspell</code>은 <code>tidytext</code> 등 텍스트분석 패키지와 패키지로 함께 설치되나 함께 부착되지는 않는다.</p>
<div class="sourceCode" id="cb96"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">love_v</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"love"</span>, <span class="st">"loves"</span>, <span class="st">"loved"</span>,<span class="st">"love's"</span> ,<span class="st">"lovely"</span>, </span>
<span>            <span class="st">"loving"</span>, <span class="st">"lovingly"</span>, <span class="st">"lover"</span>, <span class="st">"lovers"</span>, <span class="st">"lovers'"</span>, <span class="st">"go"</span>, <span class="st">"went"</span><span class="op">)</span> </span>
<span></span>
<span><span class="fu">SnowballC</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/SnowballC/man/wordStem.html">wordStem</a></span><span class="op">(</span><span class="va">love_v</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code>##  [1] "love"     "love"     "love"     "love'"    "love"    
##  [6] "love"     "lovingli" "lover"    "lover"    "lovers'" 
## [11] "go"       "went"
</code></pre>
<div class="sourceCode" id="cb97"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">hunspell</span><span class="fu">::</span><span class="fu"><a href="https://docs.ropensci.org/hunspell/reference/hunspell.html">hunspell_stem</a></span><span class="op">(</span><span class="va">love_v</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code>## [[1]]
## [1] "love"
## 
## [[2]]
## [1] "love"
## 
## [[3]]
## [1] "loved" "love" 
## 
## [[4]]
## [1] "love"
## 
## [[5]]
## [1] "lovely" "love"  
## 
## [[6]]
## [1] "loving" "love"  
## 
## [[7]]
## [1] "loving"
## 
## [[8]]
## [1] "lover" "love" 
## 
## [[9]]
## [1] "love"
## 
## [[10]]
## character(0)
## 
## [[11]]
## [1] "go"
## 
## [[12]]
## [1] "went"
</code></pre>
<p><code>hunspell</code>은 리스트로 산출하므로 <code><a href="https://tidyr.tidyverse.org/reference/nest.html">unnest()</a></code>함수로 리스트구조를 풀어준다. <code><a href="https://tidyr.tidyverse.org/reference/nest.html">unnest()</a></code>는 <code>flatten_()</code>계열과 달리 데이터프레임을 입력값으로 받는다.</p>
<div class="sourceCode" id="cb98"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/hunspell/">hunspell</a></span><span class="op">)</span></span>
<span><span class="va">love_v</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">.</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">text</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>hunspell <span class="op">=</span> <span class="fu"><a href="https://docs.ropensci.org/hunspell/reference/hunspell.html">hunspell_stem</a></span><span class="op">(</span><span class="va">word</span><span class="op">)</span><span class="op">)</span> </span></code></pre></div>
<pre class="r-output"><code>## <span style="color: #555555;"># A tibble: 12 × 2</span>
##   word   hunspell 
##   <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #555555; font-style: italic;">&lt;list&gt;</span>   
## <span style="color: #555555;">1</span> love   <span style="color: #555555;">&lt;chr [1]&gt;</span>
## <span style="color: #555555;">2</span> loves  <span style="color: #555555;">&lt;chr [1]&gt;</span>
## <span style="color: #555555;">3</span> loved  <span style="color: #555555;">&lt;chr [2]&gt;</span>
## <span style="color: #555555;">4</span> love's <span style="color: #555555;">&lt;chr [1]&gt;</span>
## <span style="color: #555555;">5</span> lovely <span style="color: #555555;">&lt;chr [2]&gt;</span>
## <span style="color: #555555;">6</span> loving <span style="color: #555555;">&lt;chr [2]&gt;</span>
## <span style="color: #555555;"># … with 6 more rows</span>
</code></pre>
<p><code><a href="https://tidyr.tidyverse.org/reference/nest.html">unnest()</a></code>로 리스트를 풀면 토큰의 수가 늘어난다. <code><a href="https://docs.ropensci.org/hunspell/reference/hunspell.html">hunspell_stem()</a></code>함수가 스테밍 전후의 단어를 모두 산출하기 때문이다. <code>hunspell</code>로 어간추출할때는 주의해야 한다. <code>hunspell</code>패키지의 목적이 텍스트분석이 아니라 철자확인이다.</p>
<div class="sourceCode" id="cb99"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/nalimilan/R.TeMiS">SnowballC</a></span><span class="op">)</span></span>
<span><span class="va">love_v</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">.</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">text</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>SnowballC <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/SnowballC/man/wordStem.html">wordStem</a></span><span class="op">(</span><span class="va">word</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>hunspell <span class="op">=</span> <span class="fu"><a href="https://docs.ropensci.org/hunspell/reference/hunspell.html">hunspell_stem</a></span><span class="op">(</span><span class="va">word</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/nest.html">unnest</a></span><span class="op">(</span><span class="va">hunspell</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code>## <span style="color: #555555;"># A tibble: 16 × 3</span>
##   word   SnowballC hunspell
##   <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>   
## <span style="color: #555555;">1</span> love   love      love    
## <span style="color: #555555;">2</span> loves  love      love    
## <span style="color: #555555;">3</span> loved  love      loved   
## <span style="color: #555555;">4</span> loved  love      love    
## <span style="color: #555555;">5</span> love's love'     love    
## <span style="color: #555555;">6</span> lovely love      lovely  
## <span style="color: #555555;"># … with 10 more rows</span>
</code></pre>
</div>
<div id="표제어lemme-추출" class="section level3" number="5.3.9">
<h3>
<span class="header-section-number">5.3.9</span> 표제어(lemme) 추출<a class="anchor" aria-label="anchor" href="#%ED%91%9C%EC%A0%9C%EC%96%B4lemme-%EC%B6%94%EC%B6%9C"><i class="fas fa-link"></i></a>
</h3>
<div id="어간stem과-표제어lemme의-차이" class="section level4" number="5.3.9.1">
<h4>
<span class="header-section-number">5.3.9.1</span> 어간(stem)과 표제어(lemme)의 차이<a class="anchor" aria-label="anchor" href="#%EC%96%B4%EA%B0%84stem%EA%B3%BC-%ED%91%9C%EC%A0%9C%EC%96%B4lemme%EC%9D%98-%EC%B0%A8%EC%9D%B4"><i class="fas fa-link"></i></a>
</h4>
<p>어근은 단어의 일부로서 변하지 않는다. 예를 들어, “produced” “producing” “production”의 표제어는 “produce”이고 어근은 “produc-”다.</p>
<p>“me”와 “my” 그리고, “you”와 “you’re”는 형태는 다르지만, 같은 의미를 공유하하고 있다. 각각 같은 의미이므로 하나로 묶어 줄 필요가 있지만, 어근추출로는 그 목적을 달성할 수 없다. 형태가 달라 어근추출처럼 규칙성을 찾을 수 없기 때문이다.</p>
<div class="sourceCode" id="cb100"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">word_v</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"love"</span>, <span class="st">"loves"</span>, <span class="st">"loved"</span>, <span class="st">"You"</span>, <span class="st">"You're"</span>, <span class="st">"You'll"</span>, <span class="st">"me"</span>, <span class="st">"my"</span>, <span class="st">"myself"</span>, <span class="st">"go"</span>, <span class="st">"went"</span><span class="op">)</span> </span>
<span></span>
<span><span class="fu">SnowballC</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/SnowballC/man/wordStem.html">wordStem</a></span><span class="op">(</span><span class="va">word_v</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code>##  [1] "love"   "love"   "love"   "You"    "You'r"  "You'll"
##  [7] "me"     "my"     "myself" "go"     "went"
</code></pre>
</div>
<div id="spacyr" class="section level4" number="5.3.9.2">
<h4>
<span class="header-section-number">5.3.9.2</span> <code>spacyr</code><a class="anchor" aria-label="anchor" href="#spacyr"><i class="fas fa-link"></i></a>
</h4>
<p>표제어 추출에 사용하는 패키지는 <code>spacyr</code>이다. <a href="https://cran.r-project.org/web/packages/spacyr/vignettes/using_spacyr.html">사용자설명서</a></p>
<div id="미니콘다-설치" class="section level5" number="5.3.9.2.1">
<h5>
<span class="header-section-number">5.3.9.2.1</span> 미니콘다 설치<a class="anchor" aria-label="anchor" href="#%EB%AF%B8%EB%8B%88%EC%BD%98%EB%8B%A4-%EC%84%A4%EC%B9%98"><i class="fas fa-link"></i></a>
</h5>
<p>(아나콘다 혹은 미니콘다가 이미 컴퓨터에 설치돼 있으면 곧바로 <code>spacyr</code> 패키지 설치로 이동)</p>
<p><code>spacyr</code>은 파이썬 <code>spaCy</code>패키지를 R에서 사용할 수 있도록한 패키지이므로, <code>spacyr</code>을 이용하기 위해서는 컴퓨터에 파이썬과 필요한 패키지가 설치돼 있어야 한다. 파이썬과 자주사용하는 패키지를 한번에 설치할 수 있는 것이 아나콘다와 미니콘다이다.</p>
<ul>
<li>아나콘다: 파이썬 + 자주 사용하는 패키지 1500여개 설치(3GB 이상 설치공간 필요)</li>
<li>미니콘다: 파이썬 + 필수 패키지 700여개 설치(260MB 설치공간 필요)
(<a href="https://docs.conda.io/en/latest/miniconda.html">미니콘다 설치 안내</a>)</li>
</ul>
<p>미니콘다 설치 안내 페이지에서 본인의 운영체제에 맞는 파일을 선택해 컴퓨터에 설치한다. 관리자권한으로 설치한다 (다운로드받은 파일에 마우스커서 올려 놓고 오른쪽 버튼 클릭해 ‘관리자권한으로 실행’ 선택)</p>
<p>설치후 Anaconda Prompt를 연다.</p>
<ul>
<li>윈도화면 왼쪽 아래의 <code>시작</code>버튼을 클릭하면 윈도 시작 메뉴가 열린다. 상단 ’최근에 추가한 앱’에서 Anaconda Prompt(Miniconda 3)을 클릭하면 Anaconda Prompt가 열린다. (Anaconda Powershell Prompt를 이용해도 된다)</li>
</ul>
<p>프롬프트가 열리면 <code>conda --version</code>을 입력한다. <code>conda 4.9.2</code>처럼 콘다의 버전 정보가 뜨면 설치에 성공.</p>
</div>
<div id="spacyr-패키지-설치" class="section level5" number="5.3.9.2.2">
<h5>
<span class="header-section-number">5.3.9.2.2</span> <code>spacyr</code> 패키지 설치<a class="anchor" aria-label="anchor" href="#spacyr-%ED%8C%A8%ED%82%A4%EC%A7%80-%EC%84%A4%EC%B9%98"><i class="fas fa-link"></i></a>
</h5>
<p><code>spacyr</code> 패키지를 설치하고 구동한다. (패키지 설치할 때는 R이나 RStudio를 관리자 권한으로 실행해 설치한다.)</p>
<div class="sourceCode" id="cb101"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("spacyr")</span></span>
<span><span class="co"># library(spacyr)</span></span></code></pre></div>
<p>패키지를 설치하고 구동했으면 <code>spacy_install()</code>을 실행한다. 콘솔에 Proceed여부를 묻는 화면이 나면 <code>2: Yes</code>를 선택해 진행한다.</p>
<div class="sourceCode" id="cb102"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">spacy_install</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><code>spacy_install()</code>은 시스템 파이썬(또는 아나콘다 파이썬)과는 별개로 R환경에서 파이썬을 실행할 수 있는 콘다환경이 생성된다.</p>
</div>
<div id="reticulate-패키지-설치" class="section level5" number="5.3.9.2.3">
<h5>
<span class="header-section-number">5.3.9.2.3</span> <code>reticulate</code> 패키지 설치<a class="anchor" aria-label="anchor" href="#reticulate-%ED%8C%A8%ED%82%A4%EC%A7%80-%EC%84%A4%EC%B9%98"><i class="fas fa-link"></i></a>
</h5>
<p>파이썬 모듈을 R환경에서 실행할 수 있도록 하는 파이썬-R 인터페이스 패키지다.</p>
<div class="sourceCode" id="cb103"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"reticulate"</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="spacy_initialize" class="section level5" number="5.3.9.2.4">
<h5>
<span class="header-section-number">5.3.9.2.4</span> <code>spacy_initialize()</code><a class="anchor" aria-label="anchor" href="#spacy_initialize"><i class="fas fa-link"></i></a>
</h5>
<p><code>spacy_initialize()</code>로 R에서 <code>spaCy</code>를 초기화한다.</p>
<div class="sourceCode" id="cb104"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># library(spacyr)</span></span>
<span><span class="co"># spacy_initialize() </span></span></code></pre></div>
</div>
<div id="파이썬-설정-오류" class="section level5" number="5.3.9.2.5">
<h5>
<span class="header-section-number">5.3.9.2.5</span> 파이썬 설정 오류<a class="anchor" aria-label="anchor" href="#%ED%8C%8C%EC%9D%B4%EC%8D%AC-%EC%84%A4%EC%A0%95-%EC%98%A4%EB%A5%98"><i class="fas fa-link"></i></a>
</h5>
<p>과거에 파이썬을 설치했었거나 혹은 파이썬에 의존하는 R패키지를 설치했었던 경우 오류가 발생할 수있다.</p>
<p><code>spacy_initialize()</code>를 실행하면 아래와 같은 파이썬 설정 오류가 발생할 수 있다.</p>
<pre><code>spacy python option is already set, spacyr will use:
    condaenv = "spacy_condaenv"
ERROR: The requested version of Python
('C:\Users\[사용자ID]\AppData\Local\r-miniconda\envs\spacy_condaenv\python.exe')
cannot be used, as another version of Python
('새로 설치한 미니콘다 경로') has
already been initialized . Please restart the R
session if you need to attach reticulate to a
different version of Python.
Error in use_python(python, required = required) : 
  failed to initialize requested version of Python</code></pre>
<p><code>spacy_initialize()</code>함수가 파이썬을 <code>C:\Users\[사용자ID]\AppData\Local\r-miniconda\envs\spacy_condaenv\python.exe</code>에서 찾는다는 의미다.</p>
<p>이 곳으로 파이썬 환경을 설정한다. 세 가지 방법이 있다. (이 위치는 사용자별로 파이썬이 설치된 환경에 따라 다르다.)</p>
<div id="rstudio에서-설정" class="section level6" number="5.3.9.2.5.1">
<h6>
<span class="header-section-number">5.3.9.2.5.1</span> RStudio에서 설정<a class="anchor" aria-label="anchor" href="#rstudio%EC%97%90%EC%84%9C-%EC%84%A4%EC%A0%95"><i class="fas fa-link"></i></a>
</h6>
<ol style="list-style-type: decimal">
<li>RStudio의 <code>Tools</code> 메뉴 선택.</li>
<li>드롭다운 메뉴가 열리면, <code>Global Options</code> 선택</li>
<li>
<code>Options</code> 창이 뜨면 왼쪽 메뉴 하단의 <code>Python</code>선택</li>
<li>
<code>Python interpreter:</code>의 <code>Select</code>버튼 클릭</li>
<li>
<code>Python interpreter</code>를 선택할 수 있는 창이 열리면, <code>spacy_initialize()</code>함수가 찾는 파이썬 경로 선택(예: <code>C:\Users\[사용자ID]\AppData\Local\r-miniconda\envs\spacy_condaenv\python.exe</code>)</li>
</ol>
</div>
<div id="sys.setevn-함수-이용" class="section level6" number="5.3.9.2.5.2">
<h6>
<span class="header-section-number">5.3.9.2.5.2</span> <code>Sys.setevn()</code> 함수 이용<a class="anchor" aria-label="anchor" href="#sys.setevn-%ED%95%A8%EC%88%98-%EC%9D%B4%EC%9A%A9"><i class="fas fa-link"></i></a>
</h6>
<pre><code>Sys.setenv(RETICULATE_PYTHON = "`spacy_initialize()`함수가 찾는 파이썬 경로")

예:

Sys.setenv(RETICULATE_PYTHON = "C:\Users\[사용자ID]\AppData\Local\r-miniconda\envs\spacy_condaenv\python.exe")
</code></pre>
</div>
<div id="reticulateuse_python-함수-이용" class="section level6" number="5.3.9.2.5.3">
<h6>
<span class="header-section-number">5.3.9.2.5.3</span> <code><a href="https://rstudio.github.io/reticulate/reference/use_python.html">reticulate::use_python()</a></code> 함수 이용<a class="anchor" aria-label="anchor" href="#reticulateuse_python-%ED%95%A8%EC%88%98-%EC%9D%B4%EC%9A%A9"><i class="fas fa-link"></i></a>
</h6>
<pre><code>reticulate::use_python("`spacy_initialize()`함수가 찾는 파이썬 경로")

예: 

reticulate::use_python("C:\Users\[사용자ID]\AppData\Local\r-miniconda\envs\spacy_condaenv\python.exe")
</code></pre>
</div>
<div id="설정-변경-확인" class="section level6" number="5.3.9.2.5.4">
<h6>
<span class="header-section-number">5.3.9.2.5.4</span> 설정 변경 확인<a class="anchor" aria-label="anchor" href="#%EC%84%A4%EC%A0%95-%EB%B3%80%EA%B2%BD-%ED%99%95%EC%9D%B8"><i class="fas fa-link"></i></a>
</h6>
<p><code><a href="https://rstudio.github.io/reticulate/reference/py_config.html">reticulate::py_config()</a></code>를 실행하면 파이썬 설정 환경을 확인할 수 있다.</p>
<pre><code>python: C:\Users\[사용자ID]\AppData\Local\r-miniconda\envs\spacy_condaenv\python.exe
...
</code></pre>
</div>
</div>
<div id="spacyr-설치-확인" class="section level5" number="5.3.9.2.6">
<h5>
<span class="header-section-number">5.3.9.2.6</span> <code>spacyr</code> 설치 확인<a class="anchor" aria-label="anchor" href="#spacyr-%EC%84%A4%EC%B9%98-%ED%99%95%EC%9D%B8"><i class="fas fa-link"></i></a>
</h5>
<div class="sourceCode" id="cb109"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># word_v &lt;- c("love", "loves", "loved", "You", "You're", "You'll", "me", "my", "myself", "go", "went")</span></span>
<span><span class="co"># </span></span>
<span><span class="co"># library(spacyr)</span></span>
<span><span class="co"># spacy_initialize()</span></span>
<span><span class="co"># </span></span>
<span></span>
<span><span class="co"># word_v %&gt;% spacy_parse()</span></span></code></pre></div>
<p>어간추출과 달리, went의 표제어인 go로 산출한다. me에 대해서는 I를 표제어로 산출하나, my에 대해서는 my를 표제어로 제시한다.</p>
</div>
</div>
</div>
<div id="연습-2" class="section level3" number="5.3.10">
<h3>
<span class="header-section-number">5.3.10</span> 연습<a class="anchor" aria-label="anchor" href="#%EC%97%B0%EC%8A%B5-2"><i class="fas fa-link"></i></a>
</h3>
<p>셰익스피어의 소네트27을 <code>SnowbalC</code>와 <code>spacyr</code>을 이용해 분석해 보자</p>
<div class="sourceCode" id="cb110"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">s27_v</span> <span class="op">&lt;-</span> <span class="st">"Weary with toil I haste me to my bed,</span></span>
<span><span class="st">The dear repose for limbs with travel tired;</span></span>
<span><span class="st">But then begins a journey in my head</span></span>
<span><span class="st">To work my mind when body's work's expired;</span></span>
<span><span class="st">For then my thoughts, from far where I abide,</span></span>
<span><span class="st">Intend a zealous pilgrimage to thee,</span></span>
<span><span class="st">And keep my drooping eyelids open wide</span></span>
<span><span class="st">Looking on darkness which the blind do see:</span></span>
<span><span class="st">Save that my soul's imaginary sight</span></span>
<span><span class="st">Presents thy shadow to my sightless view,</span></span>
<span><span class="st">Which like a jewel hung in ghastly night</span></span>
<span><span class="st">Makes black night beauteous and her old face new.</span></span>
<span><span class="st">Lo! thus by day my limbs, by night my mind,</span></span>
<span><span class="st">For thee, and for myself, no quietness find."</span></span></code></pre></div>
<div id="snowballc" class="section level4" number="5.3.10.1">
<h4>
<span class="header-section-number">5.3.10.1</span> <code>SnowballC</code><a class="anchor" aria-label="anchor" href="#snowballc"><i class="fas fa-link"></i></a>
</h4>
<p><code><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens()</a></code>의 <code>token =</code>인자에 <code><a href="https://rdrr.io/pkg/SnowballC/man/wordStem.html">wordStem()</a></code>함수를 투입하면 오류 발생.</p>
<div class="sourceCode" id="cb111"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/nalimilan/R.TeMiS">SnowballC</a></span><span class="op">)</span></span>
<span><span class="va">s27_v</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">.</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">text</span>, token <span class="op">=</span> <span class="va">wordStem</span><span class="op">)</span></span></code></pre></div>
<p>어근추츨(stemming)을 먼저 한 다음 정돈텍스트(tidy text)로 전환한다.</p>
<ul>
<li>행(row) 하나에 토큰(token)이 하나만 할당 (one-token-per-row).</li>
</ul>
<div class="sourceCode" id="cb112"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">s27_v</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">SnowballC</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/SnowballC/man/wordStem.html">wordStem</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code>## [1] "Weary with toil I haste me to my bed,\nThe dear repose for limbs with travel tired;\nBut then begins a journey in my head\nTo work my mind when body's work's expired;\nFor then my thoughts, from far where I abide,\nIntend a zealous pilgrimage to thee,\nAnd keep my drooping eyelids open wide\nLooking on darkness which the blind do see:\nSave that my soul's imaginary sight\nPresents thy shadow to my sightless view,\nWhich like a jewel hung in ghastly night\nMakes black night beauteous and her old face new.\nLo! thus by day my limbs, by night my mind,\nFor thee, and for myself, no quietness find."
</code></pre>
<p>토큰화를 먼저 한 다음에 어간을 추출한다.</p>
<div class="sourceCode" id="cb113"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">s27_v</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">.</span> <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">text</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>stemmed <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/SnowballC/man/wordStem.html">wordStem</a></span><span class="op">(</span><span class="va">word</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">stemmed</span>, sort <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></code></pre></div>
<pre class="r-output"><code>## <span style="color: #555555;"># A tibble: 81 × 2</span>
##   stemmed     n
##   <span style="color: #555555; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #555555; font-style: italic;">&lt;int&gt;</span>
## <span style="color: #555555;">1</span> my          9
## <span style="color: #555555;">2</span> for         4
## <span style="color: #555555;">3</span> to          4
## <span style="color: #555555;">4</span> a           3
## <span style="color: #555555;">5</span> and         3
## <span style="color: #555555;">6</span> night       3
## <span style="color: #555555;"># … with 75 more rows</span>
</code></pre>
</div>
<div id="spacyr-1" class="section level4" number="5.3.10.2">
<h4>
<span class="header-section-number">5.3.10.2</span> <code>spacyr</code><a class="anchor" aria-label="anchor" href="#spacyr-1"><i class="fas fa-link"></i></a>
</h4>
<p><code>spacy_parse()</code>는 표제어(lemme)와 품사 태그(pos) 등의 정보가 포함된 데이터프레임으로 산출한다.</p>
<div class="sourceCode" id="cb114"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">s27_v</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">spacy_parse</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>분석에 필요한 열만 선택한다.</p>
<div class="sourceCode" id="cb115"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">s27_v</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">spacy_parse</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">token</span><span class="op">:</span><span class="va">pos</span><span class="op">)</span> </span></code></pre></div>
<p><code><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens()</a></code>로 출력 형식 통일</p>
<div class="sourceCode" id="cb116"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">s27_v</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">spacy_parse</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">token</span><span class="op">:</span><span class="va">pos</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">lemma</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">word</span>, sort <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></code></pre></div>
</div>
<div id="비교-1" class="section level4" number="5.3.10.3">
<h4>
<span class="header-section-number">5.3.10.3</span> 비교<a class="anchor" aria-label="anchor" href="#%EB%B9%84%EA%B5%90-1"><i class="fas fa-link"></i></a>
</h4>
<p>불용어를 제거하지 않고 SnowballC 및 spacyr를 이용한 정규화 결과와 정규화하지 않은 결과를 비교해보자.</p>
<div class="sourceCode" id="cb117"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">SnowballC_df</span> <span class="op">&lt;-</span> <span class="va">s27_v</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">.</span> <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">text</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>stemmed <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/SnowballC/man/wordStem.html">wordStem</a></span><span class="op">(</span><span class="va">word</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">stemmed</span>, sort <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_max</a></span><span class="op">(</span><span class="va">n</span>, n <span class="op">=</span> <span class="fl">15</span><span class="op">)</span></span>
<span></span>
<span><span class="va">spacyr_df</span> <span class="op">&lt;-</span> <span class="va">s27_v</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">spacy_parse</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">token</span><span class="op">:</span><span class="va">pos</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">lemma</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">word</span>, sort <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_max</a></span><span class="op">(</span><span class="va">n</span>, n <span class="op">=</span> <span class="fl">15</span><span class="op">)</span></span>
<span></span>
<span><span class="va">noNor_df</span> <span class="op">&lt;-</span> <span class="va">SnowballC_df</span> <span class="op">&lt;-</span> <span class="va">s27_v</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">.</span> <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">text</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">word</span>, sort <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice_max</a></span><span class="op">(</span><span class="va">n</span>, n <span class="op">=</span> <span class="fl">15</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span><span class="op">(</span>SnowballC <span class="op">=</span> <span class="va">SnowballC_df</span>, spacyr <span class="op">=</span> <span class="va">spacyr_df</span>, noNor <span class="op">=</span> <span class="va">noNor_df</span>,</span>
<span>                .id <span class="op">=</span> <span class="st">"ID"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb118"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>word <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html">reorder</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">n</span>, fill <span class="op">=</span> <span class="va">ID</span><span class="op">)</span>, show.legend <span class="op">=</span> <span class="cn">F</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">ID</span>, scales <span class="op">=</span> <span class="st">"free"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"정규화 결과 비교"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">"단어"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"빈도"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">24</span>, hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>        axis.title.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">18</span><span class="op">)</span>,</span>
<span>        axis.title.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">18</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>불용어를 제거하고 SnowballC 및 spacyr를 이용한 정규화 결과와 정규화하지 않은 결과를 비교해보자.</p>
<div class="sourceCode" id="cb119"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">SnowballC_df</span> <span class="op">&lt;-</span> <span class="va">s27_v</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">.</span> <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">text</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>stemmed <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/SnowballC/man/wordStem.html">wordStem</a></span><span class="op">(</span><span class="va">word</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html">anti_join</a></span><span class="op">(</span><span class="va">stop_words</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">stemmed</span>, sort <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">20</span><span class="op">)</span></span>
<span></span>
<span><span class="va">spacyr_df</span> <span class="op">&lt;-</span> <span class="va">s27_v</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">spacy_parse</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">token</span><span class="op">:</span><span class="va">pos</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">lemma</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html">anti_join</a></span><span class="op">(</span><span class="va">stop_words</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">word</span>, sort <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">20</span><span class="op">)</span></span>
<span></span>
<span><span class="va">noNor_df</span> <span class="op">&lt;-</span> <span class="va">SnowballC_df</span> <span class="op">&lt;-</span> <span class="va">s27_v</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">.</span> <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">text</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html">anti_join</a></span><span class="op">(</span><span class="va">stop_words</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">word</span>, sort <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">20</span><span class="op">)</span></span>
<span></span>
<span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_rows</a></span><span class="op">(</span>SnowballC <span class="op">=</span> <span class="va">SnowballC_df</span>, spacyr <span class="op">=</span> <span class="va">spacyr_df</span>, noNor <span class="op">=</span> <span class="va">noNor_df</span>,</span>
<span>                .id <span class="op">=</span> <span class="st">"ID"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb120"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>word <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html">reorder</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">n</span>, fill <span class="op">=</span> <span class="va">ID</span><span class="op">)</span>, show.legend <span class="op">=</span> <span class="cn">F</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">ID</span>, scales <span class="op">=</span> <span class="st">"free"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ggtitle</a></span><span class="op">(</span><span class="st">"정규화 결과 비교"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">"단어"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"빈도"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">24</span>, hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>        axis.title.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">18</span><span class="op">)</span>,</span>
<span>        axis.title.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">18</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>막대도표 대신 표를 만들어 비교해 보자. 이를 위해서는 데이터프레임을 행방향으로 결합해야 한다.</p>
<p>행결합하면 행의 이름이 구분할 필요가 있으므로, <code><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens()</a></code>함수에서 <code>output =</code>인자를 설정할 때 해당 패키지 이름으로 설정한다.</p>
<p>불용어 처리 전과 후를 구분해서 비교해보자.</p>
<div class="sourceCode" id="cb121"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">SnowballC_df</span> <span class="op">&lt;-</span> <span class="va">s27_v</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">.</span> <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span><span class="va">SnowballC</span>, <span class="va">text</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>SnowballC <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/SnowballC/man/wordStem.html">wordStem</a></span><span class="op">(</span><span class="va">SnowballC</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">SnowballC</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">SnowballC</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">40</span><span class="op">)</span></span>
<span></span>
<span><span class="va">spacyr_df</span> <span class="op">&lt;-</span> <span class="va">s27_v</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">spacy_parse</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">lemma</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span><span class="va">spacyr</span>, <span class="va">lemma</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">spacyr</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">spacyr</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">40</span><span class="op">)</span></span>
<span></span>
<span><span class="va">noNor_df</span> <span class="op">&lt;-</span> <span class="va">s27_v</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">.</span> <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span><span class="va">noNor</span>, <span class="va">text</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">noNor</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">noNor</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">40</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_cols</a></span><span class="op">(</span><span class="va">noNor_df</span>, <span class="va">SnowballC_df</span>, <span class="va">spacyr_df</span><span class="op">)</span></span></code></pre></div>
<p>불용어 처리한 다음에도 결과를 비교해보자.</p>
<div class="sourceCode" id="cb122"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">SnowballC2_df</span> <span class="op">&lt;-</span> <span class="va">s27_v</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">.</span> <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span><span class="va">SnowballC</span>, <span class="va">text</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>word <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/SnowballC/man/wordStem.html">wordStem</a></span><span class="op">(</span><span class="va">SnowballC</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html">anti_join</a></span><span class="op">(</span><span class="va">stop_words</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>SnowballC <span class="op">=</span> <span class="va">word</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">SnowballC</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">SnowballC</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">40</span><span class="op">)</span></span>
<span></span>
<span><span class="va">spacyr2_df</span> <span class="op">&lt;-</span> <span class="va">s27_v</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu">spacy_parse</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">lemma</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">lemma</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html">anti_join</a></span><span class="op">(</span><span class="va">stop_words</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html">rename</a></span><span class="op">(</span>spacyr <span class="op">=</span> <span class="va">word</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">spacyr</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">spacyr</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">40</span><span class="op">)</span></span>
<span></span>
<span><span class="va">noNor2_df</span> <span class="op">&lt;-</span> <span class="va">s27_v</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">.</span> <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/tidytext/man/unnest_tokens.html">unnest_tokens</a></span><span class="op">(</span><span class="va">word</span>, <span class="va">text</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html">anti_join</a></span><span class="op">(</span><span class="va">stop_words</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">word</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">word</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="fl">40</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind.html">bind_cols</a></span><span class="op">(</span><span class="va">noNor2_df</span>, <span class="va">SnowballC2_df</span>, <span class="va">spacyr2_df</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb123"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">s27_v</span> <span class="op">&lt;-</span> <span class="st">"Weary with toil I haste me to my bed,</span></span>
<span><span class="st">The dear repose for limbs with travel tired;</span></span>
<span><span class="st">But then begins a journey in my head</span></span>
<span><span class="st">To work my mind when body's work's expired;</span></span>
<span><span class="st">For then my thoughts, from far where I abide,</span></span>
<span><span class="st">Intend a zealous pilgrimage to thee,</span></span>
<span><span class="st">And keep my drooping eyelids open wide</span></span>
<span><span class="st">Looking on darkness which the blind do see:</span></span>
<span><span class="st">Save that my soul's imaginary sight</span></span>
<span><span class="st">Presents thy shadow to my sightless view,</span></span>
<span><span class="st">Which like a jewel hung in ghastly night</span></span>
<span><span class="st">Makes black night beauteous and her old face new.</span></span>
<span><span class="st">Lo! thus by day my limbs, by night my mind,</span></span>
<span><span class="st">For thee, and for myself, no quietness find."</span></span></code></pre></div>
</div>
</div>
<div id="과제-1" class="section level3" number="5.3.11">
<h3>
<span class="header-section-number">5.3.11</span> 과제<a class="anchor" aria-label="anchor" href="#%EA%B3%BC%EC%A0%9C-1"><i class="fas fa-link"></i></a>
</h3>
<p>구텐베르크 프로젝트에서 영문 문서 한편을 선택해 두 가지 방식의 정규화(<code>SnowballC</code>를 이용한 어근 추출과 <code>spacyr</code>을 이용한 표제어 추출)한 결과와 정규화하지 않은 결과를 비교한다.</p>
<ol style="list-style-type: decimal">
<li>막대도표로 시각화해 비교</li>
<li>표로 만들어 비교</li>
<li>3건의 결과에 대해 간략하게 설명</li>
</ol>
</div>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="text-processing.html"><span class="header-section-number">4</span> 텍스트 전처리</a></div>
<div class="next"><a href="tf-idf.html"><span class="header-section-number">6</span> 단어 빈도수</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#text-clean"><span class="header-section-number">5</span> 정제(전처리)</a></li>
<li>
<a class="nav-link" href="#%ED%86%A0%ED%81%B0%ED%99%94"><span class="header-section-number">5.1</span> 토큰화</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#unnest_tokensdf-output-input-token-words-format-ctext-man-latex-html-xml-to_lower-true-drop-true-collapse-null-..."><span class="header-section-number">5.1.1</span> unnest_tokens(df, output, input, token = "words", format = c("text", "man", "latex", "html", "xml"), to_lower = TRUE, drop = TRUE, collapse = NULL, ...)</a></li>
<li><a class="nav-link" href="#format-ctext-man-latex-html-xml"><span class="header-section-number">5.1.2</span> format = c("text", "man", "latex", "html", "xml")</a></li>
<li><a class="nav-link" href="#to_lower-true"><span class="header-section-number">5.1.3</span> to_lower = TRUE</a></li>
<li><a class="nav-link" href="#strip_punct"><span class="header-section-number">5.1.4</span> strip_punct =</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#%EB%B6%88%EC%9A%A9%EC%96%B4stop-words-%EC%A0%9C%EA%B1%B0"><span class="header-section-number">5.2</span> 불용어(stop words) 제거</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%EB%B6%88%EC%9A%A9%EC%96%B4-%EC%82%AC%EC%A0%84"><span class="header-section-number">5.2.1</span> 불용어 사전</a></li>
<li><a class="nav-link" href="#filter"><span class="header-section-number">5.2.2</span> filter()</a></li>
</ul>
</li>
<li>
<a class="nav-link" href="#%EC%A0%95%EA%B7%9C%ED%99%94normalization"><span class="header-section-number">5.3</span> 정규화(Normalization)</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#%EA%B0%9C%EA%B4%84"><span class="header-section-number">5.3.1</span> 개괄</a></li>
<li><a class="nav-link" href="#%ED%98%95%ED%83%9C%EC%86%8Cmorpheme"><span class="header-section-number">5.3.2</span> 형태소(morpheme)</a></li>
<li><a class="nav-link" href="#%ED%98%95%ED%83%9C%EC%86%8C-%EC%B6%94%EC%B6%9C"><span class="header-section-number">5.3.3</span> 형태소 추출</a></li>
<li><a class="nav-link" href="#rcppmecab-1"><span class="header-section-number">5.3.4</span> RcppMeCab</a></li>
<li><a class="nav-link" href="#konlp-1"><span class="header-section-number">5.3.5</span> KoNLP</a></li>
<li><a class="nav-link" href="#konlpy"><span class="header-section-number">5.3.6</span> KoNLPy</a></li>
<li><a class="nav-link" href="#%EC%97%B0%EC%8A%B5-1"><span class="header-section-number">5.3.7</span> 연습</a></li>
<li><a class="nav-link" href="#%EC%96%B4%EA%B0%84stem-%EC%B6%94%EC%B6%9C"><span class="header-section-number">5.3.8</span> 어간(stem) 추출</a></li>
<li><a class="nav-link" href="#%ED%91%9C%EC%A0%9C%EC%96%B4lemme-%EC%B6%94%EC%B6%9C"><span class="header-section-number">5.3.9</span> 표제어(lemme) 추출</a></li>
<li><a class="nav-link" href="#%EC%97%B0%EC%8A%B5-2"><span class="header-section-number">5.3.10</span> 연습</a></li>
<li><a class="nav-link" href="#%EA%B3%BC%EC%A0%9C-1"><span class="header-section-number">5.3.11</span> 과제</a></li>
</ul>
</li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>R 텍스트마이닝</strong>" was written by 한국 R 사용자회. It was last built on 2022-07-23.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
