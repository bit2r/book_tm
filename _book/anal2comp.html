<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 9 분석2: 상대빈도 | 사회과학도를 위한 텍스트마이닝</title>
  <meta name="description" content="텍스트마이닝 준비" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 9 분석2: 상대빈도 | 사회과학도를 위한 텍스트마이닝" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="텍스트마이닝 준비" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 9 분석2: 상대빈도 | 사회과학도를 위한 텍스트마이닝" />
  
  <meta name="twitter:description" content="텍스트마이닝 준비" />
  

<meta name="author" content="안도현" />


<meta name="date" content="2021-06-27" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="anal1freq.html"/>
<link rel="next" href="anal3topic.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">데이터커뮤니케이션:텍스트마이닝</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#머리말"><i class="fa fa-check"></i><b>0.1</b> 머리말</a></li>
<li class="chapter" data-level="0.2" data-path="index.html"><a href="index.html#구성"><i class="fa fa-check"></i><b>0.2</b> 구성</a></li>
<li class="chapter" data-level="0.3" data-path="index.html"><a href="index.html#도움받은-자료"><i class="fa fa-check"></i><b>0.3</b> 도움받은 자료</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="author.html"><a href="author.html"><i class="fa fa-check"></i>Author</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> 도입</a>
<ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#사회과학-방법론"><i class="fa fa-check"></i><b>1.1</b> 사회과학 방법론</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#내용분석content-analysis"><i class="fa fa-check"></i><b>1.2</b> 내용분석(Content Analysis)</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="intro.html"><a href="intro.html#내용분석의-정의"><i class="fa fa-check"></i><b>1.2.1</b> 내용분석의 정의</a></li>
<li class="chapter" data-level="1.2.2" data-path="intro.html"><a href="intro.html#컴퓨터보조-내용분석"><i class="fa fa-check"></i><b>1.2.2</b> 컴퓨터보조 내용분석</a></li>
<li class="chapter" data-level="1.2.3" data-path="intro.html"><a href="intro.html#근거이론grounded-theory"><i class="fa fa-check"></i><b>1.2.3</b> 근거이론(grounded theory)</a></li>
<li class="chapter" data-level="1.2.4" data-path="intro.html"><a href="intro.html#컴퓨터-기반-근거이론"><i class="fa fa-check"></i><b>1.2.4</b> 컴퓨터 기반 근거이론</a></li>
<li class="chapter" data-level="1.2.5" data-path="intro.html"><a href="intro.html#전산사회과학computational-social-science-디지털인문학digital-humanities"><i class="fa fa-check"></i><b>1.2.5</b> 전산사회과학(Computational Social Science) 디지털인문학(Digital Humanities)</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#텍스트마이닝"><i class="fa fa-check"></i><b>1.3</b> 텍스트마이닝</a></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#텍스트데이터"><i class="fa fa-check"></i><b>1.4</b> 텍스트데이터</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="intro.html"><a href="intro.html#텍스트의-단위"><i class="fa fa-check"></i><b>1.4.1</b> 텍스트의 단위</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="prep1.html"><a href="prep1.html"><i class="fa fa-check"></i><b>2</b> 준비1: R기초</a>
<ul>
<li class="chapter" data-level="2.1" data-path="prep1.html"><a href="prep1.html#기본-개념"><i class="fa fa-check"></i><b>2.1</b> 기본 개념</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="prep1.html"><a href="prep1.html#컴퓨터"><i class="fa fa-check"></i><b>2.1.1</b> 컴퓨터</a></li>
<li class="chapter" data-level="2.1.2" data-path="prep1.html"><a href="prep1.html#r"><i class="fa fa-check"></i><b>2.1.2</b> R</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="prep1.html"><a href="prep1.html#r시작하기"><i class="fa fa-check"></i><b>2.2</b> R시작하기</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="prep1.html"><a href="prep1.html#로컬컴퓨터에-설치하기"><i class="fa fa-check"></i><b>2.2.1</b> 로컬컴퓨터에 설치하기</a></li>
<li class="chapter" data-level="2.2.2" data-path="prep1.html"><a href="prep1.html#r의-기능구현"><i class="fa fa-check"></i><b>2.2.2</b> R의 기능구현</a></li>
<li class="chapter" data-level="2.2.3" data-path="prep1.html"><a href="prep1.html#작업공간workspace"><i class="fa fa-check"></i><b>2.2.3</b> 작업공간(workspace)</a></li>
<li class="chapter" data-level="2.2.4" data-path="prep1.html"><a href="prep1.html#중요-작업디렉토리working-directory"><i class="fa fa-check"></i><b>2.2.4</b> 중요: 작업디렉토리(working directory)</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="prep1.html"><a href="prep1.html#ide통합개발환경-integrated-development-environment"><i class="fa fa-check"></i><b>2.3</b> IDE(통합개발환경: Integrated Development Environment)</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="prep1.html"><a href="prep1.html#rstudio-설치"><i class="fa fa-check"></i><b>2.3.1</b> RStudio 설치</a></li>
<li class="chapter" data-level="2.3.2" data-path="prep1.html"><a href="prep1.html#프로젝트-만들기"><i class="fa fa-check"></i><b>2.3.2</b> 프로젝트 만들기</a></li>
<li class="chapter" data-level="2.3.3" data-path="prep1.html"><a href="prep1.html#편집창-열기"><i class="fa fa-check"></i><b>2.3.3</b> 편집창 열기</a></li>
<li class="chapter" data-level="2.3.4" data-path="prep1.html"><a href="prep1.html#코드-실행"><i class="fa fa-check"></i><b>2.3.4</b> 코드 실행</a></li>
<li class="chapter" data-level="2.3.5" data-path="prep1.html"><a href="prep1.html#한글사용-설정"><i class="fa fa-check"></i><b>2.3.5</b> 한글사용 설정</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="prep1.html"><a href="prep1.html#데이터의-유형data-type"><i class="fa fa-check"></i><b>2.4</b> 데이터의 유형(data type)</a></li>
<li class="chapter" data-level="2.5" data-path="prep1.html"><a href="prep1.html#데이터구조"><i class="fa fa-check"></i><b>2.5</b> 데이터구조</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="prep1.html"><a href="prep1.html#벡터-c"><i class="fa fa-check"></i><b>2.5.1</b> 벡터 <code>c()</code></a></li>
<li class="chapter" data-level="2.5.2" data-path="prep1.html"><a href="prep1.html#데이터프레임-data.frame"><i class="fa fa-check"></i><b>2.5.2</b> 데이터프레임 <code>data.frame()</code></a></li>
<li class="chapter" data-level="2.5.3" data-path="prep1.html"><a href="prep1.html#리스트-list"><i class="fa fa-check"></i><b>2.5.3</b> 리스트 <code>list()</code></a></li>
<li class="chapter" data-level="2.5.4" data-path="prep1.html"><a href="prep1.html#매트릭스와-어레이"><i class="fa fa-check"></i><b>2.5.4</b> 매트릭스와 어레이</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="prep1.html"><a href="prep1.html#시각화"><i class="fa fa-check"></i><b>2.6</b> 시각화</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="prep1.html"><a href="prep1.html#시각화를-하는-이유"><i class="fa fa-check"></i><b>2.6.1</b> 시각화를 하는 이유</a></li>
<li class="chapter" data-level="2.6.2" data-path="prep1.html"><a href="prep1.html#ggplot2"><i class="fa fa-check"></i><b>2.6.2</b> <code>ggplot2</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="prep2.html"><a href="prep2.html"><i class="fa fa-check"></i><b>3</b> 준비2</a>
<ul>
<li class="chapter" data-level="3.1" data-path="prep2.html"><a href="prep2.html#패키지package"><i class="fa fa-check"></i><b>3.1</b> 패키지(Package)</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="prep2.html"><a href="prep2.html#rtools"><i class="fa fa-check"></i><b>3.1.1</b> <code>rtools</code></a></li>
<li class="chapter" data-level="3.1.2" data-path="prep2.html"><a href="prep2.html#tidyverse"><i class="fa fa-check"></i><b>3.1.2</b> tidyverse</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="prep2.html"><a href="prep2.html#오류error"><i class="fa fa-check"></i><b>3.2</b> 오류(error)</a></li>
<li class="chapter" data-level="3.3" data-path="prep2.html"><a href="prep2.html#흔한-오류"><i class="fa fa-check"></i><b>3.3</b> 흔한 오류</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="prep2.html"><a href="prep2.html#오자와-탈자"><i class="fa fa-check"></i><b>3.3.1</b> 오자와 탈자</a></li>
<li class="chapter" data-level="3.3.2" data-path="prep2.html"><a href="prep2.html#괄호의-불일치"><i class="fa fa-check"></i><b>3.3.2</b> 괄호의 불일치</a></li>
<li class="chapter" data-level="3.3.3" data-path="prep2.html"><a href="prep2.html#보이지-않는-코드"><i class="fa fa-check"></i><b>3.3.3</b> 보이지 않는 코드</a></li>
<li class="chapter" data-level="3.3.4" data-path="prep2.html"><a href="prep2.html#패키지-설치시-겪을-수-있는-오류"><i class="fa fa-check"></i><b>3.3.4</b> 패키지 설치시 겪을 수 있는 오류</a></li>
<li class="chapter" data-level="3.3.5" data-path="prep2.html"><a href="prep2.html#실행할-때-겪을-수-있는-오류"><i class="fa fa-check"></i><b>3.3.5</b> 실행할 때 겪을 수 있는 오류</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="prep2.html"><a href="prep2.html#여러-패키지-한번에-설치"><i class="fa fa-check"></i><b>3.4</b> 여러 패키지 한번에 설치</a></li>
<li class="chapter" data-level="3.5" data-path="prep2.html"><a href="prep2.html#코딩-스타일"><i class="fa fa-check"></i><b>3.5</b> 코딩 스타일</a></li>
<li class="chapter" data-level="3.6" data-path="prep2.html"><a href="prep2.html#파일경로path-표시"><i class="fa fa-check"></i><b>3.6</b> 파일경로(path) 표시</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="prep2.html"><a href="prep2.html#슬래시"><i class="fa fa-check"></i><b>3.6.1</b> 슬래시 /</a></li>
<li class="chapter" data-level="3.6.2" data-path="prep2.html"><a href="prep2.html#마침표-.-.."><i class="fa fa-check"></i><b>3.6.2</b> 마침표 . ..</a></li>
<li class="chapter" data-level="3.6.3" data-path="prep2.html"><a href="prep2.html#물결"><i class="fa fa-check"></i><b>3.6.3</b> 물결 ~</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="prep2.html"><a href="prep2.html#파일과-객체"><i class="fa fa-check"></i><b>3.7</b> 파일과 객체</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="prep2.html"><a href="prep2.html#하드디스크에-있는-파일을-다루는-함수"><i class="fa fa-check"></i><b>3.7.1</b> 하드디스크에 있는 파일을 다루는 함수</a></li>
<li class="chapter" data-level="3.7.2" data-path="prep2.html"><a href="prep2.html#r환경내-객체를-다루는-함수"><i class="fa fa-check"></i><b>3.7.2</b> R환경내 객체를 다루는 함수</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="prep2.html"><a href="prep2.html#따옴표와-백틱"><i class="fa fa-check"></i><b>3.8</b> 따옴표와 백틱</a>
<ul>
<li class="chapter" data-level="3.8.1" data-path="prep2.html"><a href="prep2.html#겹따옴표-홑따옴표"><i class="fa fa-check"></i><b>3.8.1</b> 겹따옴표 홑따옴표</a></li>
<li class="chapter" data-level="3.8.2" data-path="prep2.html"><a href="prep2.html#백틱backquotebacktick-주의중요-글꼴-기타-na와null의-차이"><i class="fa fa-check"></i><b>3.8.2</b> 백틱(backquote/backtick) <code>## 주의(중요) ### 글꼴  ## 기타 ###</code>NA<code>와</code>NULL`의 차이</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="browse.html"><a href="browse.html"><i class="fa fa-check"></i><b>4</b> 틀잡기</a>
<ul>
<li class="chapter" data-level="4.1" data-path="browse.html"><a href="browse.html#수집"><i class="fa fa-check"></i><b>4.1</b> 수집</a></li>
<li class="chapter" data-level="4.2" data-path="browse.html"><a href="browse.html#정제전처리"><i class="fa fa-check"></i><b>4.2</b> 정제(전처리)</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="browse.html"><a href="browse.html#정돈텍스트tidy-text"><i class="fa fa-check"></i><b>4.2.1</b> 정돈텍스트(tidy text)</a></li>
<li class="chapter" data-level="4.2.2" data-path="browse.html"><a href="browse.html#토큰화-unnest_tokens-함수"><i class="fa fa-check"></i><b>4.2.2</b> 토큰화: <code>unnest_tokens</code> 함수</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="browse.html"><a href="browse.html#분석"><i class="fa fa-check"></i><b>4.3</b> 분석</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="browse.html"><a href="browse.html#빈도-count-함수"><i class="fa fa-check"></i><b>4.3.1</b> 빈도: <code>count</code> 함수</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="browse.html"><a href="browse.html#소통"><i class="fa fa-check"></i><b>4.4</b> 소통</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="browse.html"><a href="browse.html#시각화-1"><i class="fa fa-check"></i><b>4.4.1</b> 시각화</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="browse.html"><a href="browse.html#연습-2"><i class="fa fa-check"></i><b>4.5</b> 연습</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="browse.html"><a href="browse.html#과제"><i class="fa fa-check"></i><b>4.5.1</b> 과제</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>5</b> 수집: 불러오기</a>
<ul>
<li class="chapter" data-level="5.1" data-path="data.html"><a href="data.html#바이너리-파일"><i class="fa fa-check"></i><b>5.1</b> 바이너리 파일</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="data.html"><a href="data.html#불러오기이입-import"><i class="fa fa-check"></i><b>5.1.1</b> 불러오기(이입: import)</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="data.html"><a href="data.html#일반텍스트plain-text-파일"><i class="fa fa-check"></i><b>5.2</b> 일반텍스트(plain text) 파일</a></li>
<li class="chapter" data-level="5.3" data-path="data.html"><a href="data.html#html-파일"><i class="fa fa-check"></i><b>5.3</b> HTML 파일</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="data.html"><a href="data.html#html문서-불러오기-read_html"><i class="fa fa-check"></i><b>5.3.1</b> HTML문서 불러오기 <code>read_html()</code></a></li>
<li class="chapter" data-level="5.3.2" data-path="data.html"><a href="data.html#htlm요소-추출하기-html_node"><i class="fa fa-check"></i><b>5.3.2</b> HTLM요소 추출하기 <code>html_node()</code></a></li>
<li class="chapter" data-level="5.3.3" data-path="data.html"><a href="data.html#내용-추출하기-html_text"><i class="fa fa-check"></i><b>5.3.3</b> 내용 추출하기 <code>html_text</code></a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="data.html"><a href="data.html#내보내기export-이출"><i class="fa fa-check"></i><b>5.4</b> 내보내기(export: 이출)</a></li>
<li class="chapter" data-level="5.5" data-path="data.html"><a href="data.html#인코딩encoding-부호화"><i class="fa fa-check"></i><b>5.5</b> 인코딩(encoding: 부호화)</a></li>
<li class="chapter" data-level="5.6" data-path="data.html"><a href="data.html#테이블구조-문서"><i class="fa fa-check"></i><b>5.6</b> 테이블구조 문서</a></li>
<li class="chapter" data-level="5.7" data-path="data.html"><a href="data.html#기타-파일-형식"><i class="fa fa-check"></i><b>5.7</b> 기타 파일 형식</a></li>
<li class="chapter" data-level="5.8" data-path="data.html"><a href="data.html#연습-3"><i class="fa fa-check"></i><b>5.8</b> 연습</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="data.html"><a href="data.html#과제-1"><i class="fa fa-check"></i><b>5.8.1</b> 과제</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="cleantool.html"><a href="cleantool.html"><i class="fa fa-check"></i><b>6</b> 정제도구</a>
<ul>
<li class="chapter" data-level="6.1" data-path="cleantool.html"><a href="cleantool.html#stringr"><i class="fa fa-check"></i><b>6.1</b> <code>stringr</code></a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="cleantool.html"><a href="cleantool.html#개괄"><i class="fa fa-check"></i><b>6.1.1</b> 개괄</a></li>
<li class="chapter" data-level="6.1.2" data-path="cleantool.html"><a href="cleantool.html#탐지와-찾기detect-locate-1"><i class="fa fa-check"></i><b>6.1.2</b> 탐지와 찾기(detect &amp; locate)</a></li>
<li class="chapter" data-level="6.1.3" data-path="cleantool.html"><a href="cleantool.html#부분선택-추출-일치subset-extract-match-1"><i class="fa fa-check"></i><b>6.1.3</b> 부분선택, 추출, 일치(subset, extract &amp; match)</a></li>
<li class="chapter" data-level="6.1.4" data-path="cleantool.html"><a href="cleantool.html#문자열-변환mutate-strings-1"><i class="fa fa-check"></i><b>6.1.4</b> 문자열 변환(Mutate Strings)</a></li>
<li class="chapter" data-level="6.1.5" data-path="cleantool.html"><a href="cleantool.html#결합과-분리join-and-split-1"><i class="fa fa-check"></i><b>6.1.5</b> 결합과 분리(Join and Split)</a></li>
<li class="chapter" data-level="6.1.6" data-path="cleantool.html"><a href="cleantool.html#공백문자whitespace-1"><i class="fa fa-check"></i><b>6.1.6</b> 공백문자(Whitespace)</a></li>
<li class="chapter" data-level="6.1.7" data-path="cleantool.html"><a href="cleantool.html#과제-2"><i class="fa fa-check"></i><b>6.1.7</b> 과제</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="cleantool.html"><a href="cleantool.html#dplyr"><i class="fa fa-check"></i><b>6.2</b> <code>dplyr</code></a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="cleantool.html"><a href="cleantool.html#개괄-1"><i class="fa fa-check"></i><b>6.2.1</b> 개괄</a></li>
<li class="chapter" data-level="6.2.2" data-path="cleantool.html"><a href="cleantool.html#dplyr의-구성"><i class="fa fa-check"></i><b>6.2.2</b> <code>dplyr</code>의 구성</a></li>
<li class="chapter" data-level="6.2.3" data-path="cleantool.html"><a href="cleantool.html#묶음-동사group-cases-1"><i class="fa fa-check"></i><b>6.2.3</b> 묶음 동사(group cases)</a></li>
<li class="chapter" data-level="6.2.4" data-path="cleantool.html"><a href="cleantool.html#요약-동사와-요약-함수"><i class="fa fa-check"></i><b>6.2.4</b> 요약 동사와 요약 함수</a></li>
<li class="chapter" data-level="6.2.5" data-path="cleantool.html"><a href="cleantool.html#행-조작-동사manipulate-cases-1"><i class="fa fa-check"></i><b>6.2.5</b> 행 조작 동사(manipulate cases)</a></li>
<li class="chapter" data-level="6.2.6" data-path="cleantool.html"><a href="cleantool.html#열-조작-동사manipulate-variables-1"><i class="fa fa-check"></i><b>6.2.6</b> 열 조작 동사(manipulate variables)</a></li>
<li class="chapter" data-level="6.2.7" data-path="cleantool.html"><a href="cleantool.html#벡터-함수vector-functions-1"><i class="fa fa-check"></i><b>6.2.7</b> 벡터 함수(vector functions)</a></li>
<li class="chapter" data-level="6.2.8" data-path="cleantool.html"><a href="cleantool.html#테이블-결합동사행방향"><i class="fa fa-check"></i><b>6.2.8</b> 테이블 결합동사(행방향)</a></li>
<li class="chapter" data-level="6.2.9" data-path="cleantool.html"><a href="cleantool.html#테이블-결합동사열방향"><i class="fa fa-check"></i><b>6.2.9</b> 테이블 결합동사(열방향)</a></li>
<li class="chapter" data-level="6.2.10" data-path="cleantool.html"><a href="cleantool.html#연습1"><i class="fa fa-check"></i><b>6.2.10</b> 연습1</a></li>
<li class="chapter" data-level="6.2.11" data-path="cleantool.html"><a href="cleantool.html#연습2"><i class="fa fa-check"></i><b>6.2.11</b> 연습2</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="cleantool.html"><a href="cleantool.html#purrr"><i class="fa fa-check"></i><b>6.3</b> <code>purrr</code></a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="cleantool.html"><a href="cleantool.html#개괄-2"><i class="fa fa-check"></i><b>6.3.1</b> 개괄</a></li>
<li class="chapter" data-level="6.3.2" data-path="cleantool.html"><a href="cleantool.html#반복계산-1"><i class="fa fa-check"></i><b>6.3.2</b> 반복계산</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="cleantool.html"><a href="cleantool.html#tidyr"><i class="fa fa-check"></i><b>6.4</b> <code>tidyr</code></a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="cleantool.html"><a href="cleantool.html#개괄-3"><i class="fa fa-check"></i><b>6.4.1</b> 개괄</a></li>
<li class="chapter" data-level="6.4.2" data-path="cleantool.html"><a href="cleantool.html#축전환pivoting-1"><i class="fa fa-check"></i><b>6.4.2</b> 축전환(pivoting)</a></li>
<li class="chapter" data-level="6.4.3" data-path="cleantool.html"><a href="cleantool.html#분리와-결합-1"><i class="fa fa-check"></i><b>6.4.3</b> 분리와 결합</a></li>
<li class="chapter" data-level="6.4.4" data-path="cleantool.html"><a href="cleantool.html#연습1-1"><i class="fa fa-check"></i><b>6.4.4</b> 연습1</a></li>
<li class="chapter" data-level="6.4.5" data-path="cleantool.html"><a href="cleantool.html#연습2-1"><i class="fa fa-check"></i><b>6.4.5</b> 연습2</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="cleantool.html"><a href="cleantool.html#연산자operators"><i class="fa fa-check"></i><b>6.5</b> 연산자(operators)</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="cleantool.html"><a href="cleantool.html#산술연산자arithmatic-operators"><i class="fa fa-check"></i><b>6.5.1</b> 산술연산자(Arithmatic Operators)</a></li>
<li class="chapter" data-level="6.5.2" data-path="cleantool.html"><a href="cleantool.html#관계연산자relational-operators"><i class="fa fa-check"></i><b>6.5.2</b> 관계연산자(Relational Operators)</a></li>
<li class="chapter" data-level="6.5.3" data-path="cleantool.html"><a href="cleantool.html#논리연산자logical-operators"><i class="fa fa-check"></i><b>6.5.3</b> 논리연산자(Logical Operators)</a></li>
<li class="chapter" data-level="6.5.4" data-path="cleantool.html"><a href="cleantool.html#포함-연산자inclusion-operator"><i class="fa fa-check"></i><b>6.5.4</b> 포함 연산자(Inclusion Operator)</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="cleantool.html"><a href="cleantool.html#정규표현식regular-expressions"><i class="fa fa-check"></i><b>6.6</b> 정규표현식(regular expressions)</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="cleantool.html"><a href="cleantool.html#일반문자와-기능문자"><i class="fa fa-check"></i><b>6.6.1</b> 일반문자와 기능문자</a></li>
<li class="chapter" data-level="6.6.2" data-path="cleantool.html"><a href="cleantool.html#일치하는-문자match-characters"><i class="fa fa-check"></i><b>6.6.2</b> 일치하는 문자(Match Characters)</a></li>
<li class="chapter" data-level="6.6.3" data-path="cleantool.html"><a href="cleantool.html#공백문자whitespace-2"><i class="fa fa-check"></i><b>6.6.3</b> 공백문자(whitespace)</a></li>
<li class="chapter" data-level="6.6.4" data-path="cleantool.html"><a href="cleantool.html#또는"><i class="fa fa-check"></i><b>6.6.4</b> 또는</a></li>
<li class="chapter" data-level="6.6.5" data-path="cleantool.html"><a href="cleantool.html#묶음"><i class="fa fa-check"></i><b>6.6.5</b> 묶음</a></li>
<li class="chapter" data-level="6.6.6" data-path="cleantool.html"><a href="cleantool.html#앵커"><i class="fa fa-check"></i><b>6.6.6</b> 앵커</a></li>
<li class="chapter" data-level="6.6.7" data-path="cleantool.html"><a href="cleantool.html#주변look-around-1"><i class="fa fa-check"></i><b>6.6.7</b> 주변(look around)</a></li>
<li class="chapter" data-level="6.6.8" data-path="cleantool.html"><a href="cleantool.html#반복일치"><i class="fa fa-check"></i><b>6.6.8</b> 반복일치</a></li>
<li class="chapter" data-level="6.6.9" data-path="cleantool.html"><a href="cleantool.html#유용한-정규표현식"><i class="fa fa-check"></i><b>6.6.9</b> 유용한 정규표현식</a></li>
<li class="chapter" data-level="6.6.10" data-path="cleantool.html"><a href="cleantool.html#연습-4"><i class="fa fa-check"></i><b>6.6.10</b> 연습</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="clean.html"><a href="clean.html"><i class="fa fa-check"></i><b>7</b> 정제(전처리)</a>
<ul>
<li class="chapter" data-level="7.1" data-path="clean.html"><a href="clean.html#토큰화"><i class="fa fa-check"></i><b>7.1</b> 토큰화</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="clean.html"><a href="clean.html#unnest_tokensdf-output-input-token-words-format-ctext-man-latex-html-xml-to_lower-true-drop-true-collapse-null-..."><i class="fa fa-check"></i><b>7.1.1</b> <code>unnest_tokens(df, output, input, token = "words", format = c("text", "man", "latex", "html", "xml"), to_lower = TRUE, drop = TRUE, collapse = NULL, ...)</code></a></li>
<li class="chapter" data-level="7.1.2" data-path="clean.html"><a href="clean.html#format-ctext-man-latex-html-xml"><i class="fa fa-check"></i><b>7.1.2</b> <code>format = c("text", "man", "latex", "html", "xml")</code></a></li>
<li class="chapter" data-level="7.1.3" data-path="clean.html"><a href="clean.html#to_lower-true"><i class="fa fa-check"></i><b>7.1.3</b> <code>to_lower = TRUE</code></a></li>
<li class="chapter" data-level="7.1.4" data-path="clean.html"><a href="clean.html#strip_punct"><i class="fa fa-check"></i><b>7.1.4</b> <code>strip_punct =</code></a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="clean.html"><a href="clean.html#불용어stop-words-제거-1"><i class="fa fa-check"></i><b>7.2</b> 불용어(stop words) 제거</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="clean.html"><a href="clean.html#불용어-사전"><i class="fa fa-check"></i><b>7.2.1</b> 불용어 사전</a></li>
<li class="chapter" data-level="7.2.2" data-path="clean.html"><a href="clean.html#filter"><i class="fa fa-check"></i><b>7.2.2</b> <code>filter()</code></a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="clean.html"><a href="clean.html#정규화normalization-1"><i class="fa fa-check"></i><b>7.3</b> 정규화(Normalization)</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="clean.html"><a href="clean.html#개괄-4"><i class="fa fa-check"></i><b>7.3.1</b> 개괄</a></li>
<li class="chapter" data-level="7.3.2" data-path="clean.html"><a href="clean.html#형태소morpheme"><i class="fa fa-check"></i><b>7.3.2</b> 형태소(morpheme)</a></li>
<li class="chapter" data-level="7.3.3" data-path="clean.html"><a href="clean.html#형태소-추출"><i class="fa fa-check"></i><b>7.3.3</b> 형태소 추출</a></li>
<li class="chapter" data-level="7.3.4" data-path="clean.html"><a href="clean.html#rcppmecab-1"><i class="fa fa-check"></i><b>7.3.4</b> RcppMeCab</a></li>
<li class="chapter" data-level="7.3.5" data-path="clean.html"><a href="clean.html#konlp-1"><i class="fa fa-check"></i><b>7.3.5</b> <code>KoNLP</code></a></li>
<li class="chapter" data-level="7.3.6" data-path="clean.html"><a href="clean.html#konlpy"><i class="fa fa-check"></i><b>7.3.6</b> <code>KoNLPy</code></a></li>
<li class="chapter" data-level="7.3.7" data-path="clean.html"><a href="clean.html#연습-5"><i class="fa fa-check"></i><b>7.3.7</b> 연습</a></li>
<li class="chapter" data-level="7.3.8" data-path="clean.html"><a href="clean.html#어간stem-추출"><i class="fa fa-check"></i><b>7.3.8</b> 어간(stem) 추출</a></li>
<li class="chapter" data-level="7.3.9" data-path="clean.html"><a href="clean.html#표제어lemme-추출"><i class="fa fa-check"></i><b>7.3.9</b> 표제어(lemme) 추출</a></li>
<li class="chapter" data-level="7.3.10" data-path="clean.html"><a href="clean.html#연습-6"><i class="fa fa-check"></i><b>7.3.10</b> 연습</a></li>
<li class="chapter" data-level="7.3.11" data-path="clean.html"><a href="clean.html#과제-5"><i class="fa fa-check"></i><b>7.3.11</b> 과제</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="anal1freq.html"><a href="anal1freq.html"><i class="fa fa-check"></i><b>8</b> 분석1: 감정어 빈도</a>
<ul>
<li class="chapter" data-level="8.1" data-path="anal1freq.html"><a href="anal1freq.html#국문-감정사전"><i class="fa fa-check"></i><b>8.1</b> 국문 감정사전</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="anal1freq.html"><a href="anal1freq.html#사전-데이터프레임-만들기"><i class="fa fa-check"></i><b>8.1.1</b> 사전 데이터프레임 만들기</a></li>
<li class="chapter" data-level="8.1.2" data-path="anal1freq.html"><a href="anal1freq.html#연습-7"><i class="fa fa-check"></i><b>8.1.2</b> 연습</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="anal1freq.html"><a href="anal1freq.html#감정분석"><i class="fa fa-check"></i><b>8.2</b> 감정분석</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="anal1freq.html"><a href="anal1freq.html#수집-1"><i class="fa fa-check"></i><b>8.2.1</b> 수집</a></li>
<li class="chapter" data-level="8.2.2" data-path="anal1freq.html"><a href="anal1freq.html#정제"><i class="fa fa-check"></i><b>8.2.2</b> 정제</a></li>
<li class="chapter" data-level="8.2.3" data-path="anal1freq.html"><a href="anal1freq.html#분석-및-소통"><i class="fa fa-check"></i><b>8.2.3</b> 분석 및 소통</a></li>
<li class="chapter" data-level="8.2.4" data-path="anal1freq.html"><a href="anal1freq.html#문서의-감정점수-계산"><i class="fa fa-check"></i><b>8.2.4</b> 문서의 감정점수 계산</a></li>
<li class="chapter" data-level="8.2.5" data-path="anal1freq.html"><a href="anal1freq.html#감정-극성별-단어빈도"><i class="fa fa-check"></i><b>8.2.5</b> 감정 극성별 단어빈도</a></li>
<li class="chapter" data-level="8.2.6" data-path="anal1freq.html"><a href="anal1freq.html#단어구름에-극성별-단어빈도-표시"><i class="fa fa-check"></i><b>8.2.6</b> 단어구름에 극성별 단어빈도 표시</a></li>
<li class="chapter" data-level="8.2.7" data-path="anal1freq.html"><a href="anal1freq.html#문장-전개에-따른-감정-변화"><i class="fa fa-check"></i><b>8.2.7</b> 문장 전개에 따른 감정 변화</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="anal2comp.html"><a href="anal2comp.html"><i class="fa fa-check"></i><b>9</b> 분석2: 상대빈도</a>
<ul>
<li class="chapter" data-level="9.1" data-path="anal2comp.html"><a href="anal2comp.html#개관"><i class="fa fa-check"></i><b>9.1</b> 개관</a></li>
<li class="chapter" data-level="9.2" data-path="anal2comp.html"><a href="anal2comp.html#tf_idf"><i class="fa fa-check"></i><b>9.2</b> tf_idf</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="anal2comp.html"><a href="anal2comp.html#공식"><i class="fa fa-check"></i><b>9.2.1</b> 공식</a></li>
<li class="chapter" data-level="9.2.2" data-path="anal2comp.html"><a href="anal2comp.html#적용"><i class="fa fa-check"></i><b>9.2.2</b> 적용</a></li>
<li class="chapter" data-level="9.2.3" data-path="anal2comp.html"><a href="anal2comp.html#bind_tf_idftbl-term-document-n"><i class="fa fa-check"></i><b>9.2.3</b> <code>bind_tf_idf(tbl, term, document, n)</code></a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="anal2comp.html"><a href="anal2comp.html#승산비odds-ratio"><i class="fa fa-check"></i><b>9.3</b> 승산비(odds ratio)</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="anal2comp.html"><a href="anal2comp.html#자료준비"><i class="fa fa-check"></i><b>9.3.1</b> 자료준비</a></li>
<li class="chapter" data-level="9.3.2" data-path="anal2comp.html"><a href="anal2comp.html#로그승산비"><i class="fa fa-check"></i><b>9.3.2</b> 로그승산비</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="anal2comp.html"><a href="anal2comp.html#가중로그승산비"><i class="fa fa-check"></i><b>9.4</b> 가중로그승산비</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="anal2comp.html"><a href="anal2comp.html#bind_log_oddstbl-set-feature-n-uninformative-false-unweighted-false"><i class="fa fa-check"></i><b>9.4.1</b> <code>bind_log_odds(tbl, set, feature, n, uninformative = FALSE, unweighted = FALSE)</code></a></li>
<li class="chapter" data-level="9.4.2" data-path="anal2comp.html"><a href="anal2comp.html#지표-비교"><i class="fa fa-check"></i><b>9.4.2</b> 지표 비교</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="anal2comp.html"><a href="anal2comp.html#연습-8"><i class="fa fa-check"></i><b>9.5</b> 연습</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="anal2comp.html"><a href="anal2comp.html#빅카인즈"><i class="fa fa-check"></i><b>9.5.1</b> 빅카인즈</a></li>
<li class="chapter" data-level="9.5.2" data-path="anal2comp.html"><a href="anal2comp.html#정제-1"><i class="fa fa-check"></i><b>9.5.2</b> 정제</a></li>
<li class="chapter" data-level="9.5.3" data-path="anal2comp.html"><a href="anal2comp.html#분석-및-소통-1"><i class="fa fa-check"></i><b>9.5.3</b> 분석 및 소통</a></li>
<li class="chapter" data-level="9.5.4" data-path="anal2comp.html"><a href="anal2comp.html#총빈도와-상대빈도-비교"><i class="fa fa-check"></i><b>9.5.4</b> 총빈도와 상대빈도 비교</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="anal3topic.html"><a href="anal3topic.html"><i class="fa fa-check"></i><b>10</b> 분석3: 주제모형</a>
<ul>
<li class="chapter" data-level="10.1" data-path="anal3topic.html"><a href="anal3topic.html#개관-1"><i class="fa fa-check"></i><b>10.1</b> 개관</a></li>
<li class="chapter" data-level="10.2" data-path="anal3topic.html"><a href="anal3topic.html#자료-준비-1"><i class="fa fa-check"></i><b>10.2</b> 자료 준비</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="anal3topic.html"><a href="anal3topic.html#자료-이입"><i class="fa fa-check"></i><b>10.2.1</b> 자료 이입</a></li>
<li class="chapter" data-level="10.2.2" data-path="anal3topic.html"><a href="anal3topic.html#정제-2"><i class="fa fa-check"></i><b>10.2.2</b> 정제</a></li>
<li class="chapter" data-level="10.2.3" data-path="anal3topic.html"><a href="anal3topic.html#stm-말뭉치"><i class="fa fa-check"></i><b>10.2.3</b> stm 말뭉치</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="anal3topic.html"><a href="anal3topic.html#분석-1"><i class="fa fa-check"></i><b>10.3</b> 분석</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="anal3topic.html"><a href="anal3topic.html#주제의-수k-설정"><i class="fa fa-check"></i><b>10.3.1</b> 주제의 수(K) 설정</a></li>
<li class="chapter" data-level="10.3.2" data-path="anal3topic.html"><a href="anal3topic.html#주제모형-구성"><i class="fa fa-check"></i><b>10.3.2</b> 주제모형 구성</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="anal3topic.html"><a href="anal3topic.html#소통-1"><i class="fa fa-check"></i><b>10.4</b> 소통</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="anal3topic.html"><a href="anal3topic.html#주제별-단어-분포"><i class="fa fa-check"></i><b>10.4.1</b> 주제별 단어 분포</a></li>
<li class="chapter" data-level="10.4.2" data-path="anal3topic.html"><a href="anal3topic.html#주제별-문서-분포"><i class="fa fa-check"></i><b>10.4.2</b> 주제별 문서 분포</a></li>
<li class="chapter" data-level="10.4.3" data-path="anal3topic.html"><a href="anal3topic.html#주제별-단어-문서-분포"><i class="fa fa-check"></i><b>10.4.3</b> 주제별 단어-문서 분포</a></li>
<li class="chapter" data-level="10.4.4" data-path="anal3topic.html"><a href="anal3topic.html#과제-7"><i class="fa fa-check"></i><b>10.4.4</b> 과제</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="anal4topic.html"><a href="anal4topic.html"><i class="fa fa-check"></i><b>11</b> 분석4: 주제모형(공변인)</a>
<ul>
<li class="chapter" data-level="11.1" data-path="anal4topic.html"><a href="anal4topic.html#주제-명명과-공변인-주제모형"><i class="fa fa-check"></i><b>11.1</b> 주제 명명과 공변인 주제모형</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="anal4topic.html"><a href="anal4topic.html#개관-2"><i class="fa fa-check"></i><b>11.1.1</b> 개관</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="anal4topic.html"><a href="anal4topic.html#자료-준비-2"><i class="fa fa-check"></i><b>11.2</b> 자료 준비</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="anal4topic.html"><a href="anal4topic.html#수집-2"><i class="fa fa-check"></i><b>11.2.1</b> 수집</a></li>
<li class="chapter" data-level="11.2.2" data-path="anal4topic.html"><a href="anal4topic.html#선택-표집"><i class="fa fa-check"></i><b>11.2.2</b> (선택) 표집</a></li>
<li class="chapter" data-level="11.2.3" data-path="anal4topic.html"><a href="anal4topic.html#정제-3"><i class="fa fa-check"></i><b>11.2.3</b> 정제</a></li>
<li class="chapter" data-level="11.2.4" data-path="anal4topic.html"><a href="anal4topic.html#stm말뭉치"><i class="fa fa-check"></i><b>11.2.4</b> <code>stm</code>말뭉치</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="anal4topic.html"><a href="anal4topic.html#분석-2"><i class="fa fa-check"></i><b>11.3</b> 분석</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="anal4topic.html"><a href="anal4topic.html#주제topic의-수-설정"><i class="fa fa-check"></i><b>11.3.1</b> 주제(topic)의 수 설정</a></li>
<li class="chapter" data-level="11.3.2" data-path="anal4topic.html"><a href="anal4topic.html#모형-구성"><i class="fa fa-check"></i><b>11.3.2</b> 모형 구성</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="anal4topic.html"><a href="anal4topic.html#주제-이름짓기"><i class="fa fa-check"></i><b>11.4</b> 주제 이름짓기</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="anal4topic.html"><a href="anal4topic.html#주제별-단어와-원문-결합"><i class="fa fa-check"></i><b>11.4.1</b> 주제별 단어와 원문 결합</a></li>
<li class="chapter" data-level="11.4.2" data-path="anal4topic.html"><a href="anal4topic.html#주제-이름-목록"><i class="fa fa-check"></i><b>11.4.2</b> 주제 이름 목록</a></li>
<li class="chapter" data-level="11.4.3" data-path="anal4topic.html"><a href="anal4topic.html#주제별-단어-분포도"><i class="fa fa-check"></i><b>11.4.3</b> 주제별 단어 분포도</a></li>
<li class="chapter" data-level="11.4.4" data-path="anal4topic.html"><a href="anal4topic.html#주제별-문서-분포도"><i class="fa fa-check"></i><b>11.4.4</b> 주제별 문서 분포도</a></li>
<li class="chapter" data-level="11.4.5" data-path="anal4topic.html"><a href="anal4topic.html#주제별-단어-문서-분포-1"><i class="fa fa-check"></i><b>11.4.5</b> 주제별 단어-문서 분포</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="anal4topic.html"><a href="anal4topic.html#공변인-분석"><i class="fa fa-check"></i><b>11.5</b> 공변인 분석</a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="anal4topic.html"><a href="anal4topic.html#문서-내용-확인"><i class="fa fa-check"></i><b>11.5.1</b> 문서 내용 확인</a></li>
<li class="chapter" data-level="11.5.2" data-path="anal4topic.html"><a href="anal4topic.html#공변인-분석-시각화"><i class="fa fa-check"></i><b>11.5.2</b> 공변인 분석 시각화</a></li>
<li class="chapter" data-level="11.5.3" data-path="anal4topic.html"><a href="anal4topic.html#주제-사이-상관성"><i class="fa fa-check"></i><b>11.5.3</b> 주제 사이 상관성</a></li>
<li class="chapter" data-level="11.5.4" data-path="anal4topic.html"><a href="anal4topic.html#과제-8"><i class="fa fa-check"></i><b>11.5.4</b> 과제</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">사회과학도를 위한 텍스트마이닝</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="anal2comp" class="section level1" number="9">
<h1><span class="header-section-number">Chapter 9</span> 분석2: 상대빈도</h1>
<div id="개관" class="section level2" number="9.1">
<h2><span class="header-section-number">9.1</span> 개관</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="anal2comp.html#cb1-1" aria-hidden="true" tabindex="-1"></a>pkg_v <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;tidyverse&quot;</span>, <span class="st">&quot;tidytext&quot;</span>,<span class="st">&quot;RcppMeCab&quot;</span>)</span>
<span id="cb1-2"><a href="anal2comp.html#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(pkg_v, require, <span class="at">ch =</span> T)</span></code></pre></div>
<pre><code>## [[1]]
## [1] TRUE
## 
## [[2]]
## [1] TRUE
## 
## [[3]]
## [1] TRUE</code></pre>
<p>단어(term) - 문서(document) - 말뭉치(corpus)</p>
<p>문서에 사용된 단어(term)를 통해 그 문서의 주제를 추론할 수 있다. 말뭉치는 문서들의 ’뭉치’다. 신문 말뭉치는 여러 신문들의 기사를 모아놓은 것이고, 소설말뭉치는 여러 소설을 모아놓은 문서들의 집합이다. 말뭉치는 상대적인 개념이다. 예를 들어, 소설집을 말뭉치라고 하면 개별 소설이 문서가 된다. 반면, 소설 한편을 말뭉치라고 하면, 소설의 각 장이 문서가 된다.</p>
<p>개별 문서의 주제를 추론하려면 모든 문서에 걸쳐 사용빈도가 높은 단어보다는 개별 문서에서만 사용빈도가 높은 단어를 찾아야 한다. 즉, 개별 문서에 등장하는 단어의 상대빈도가 높은 단어가 개별 문서의 의미를 잘 나타낸다.</p>
<p>상대빈도를 계산하는 방법으로 널리 사용되는 지표가 tf_idf, 승산비, 가중로그승산비 등이다.</p>
<ul>
<li>tf_idf</li>
</ul>
<p>널리 사용되는 상대빈도 지표. 문서 전반에 걸쳐 등장하는 단어의 점수를 낮게 계산하고, 특정 문서에서 등장하는 빈도에 점수를 높게 부여해 상대 빈도를 계산한다. 예를 들어, ‘운수좋은 날’과 ’사랑손님과 어머니’ 등 2편으로 이뤄진 소설집 말뭉치가 있다고 하자. “은/는/이/가”와 같은 단어는 이 말뭉치에가 사용빈도가 꽤 높지만, 각 소설의 주제를 파악하는데 크게 기여하지 못한다. 반면 ’어머니’와 같은 단어는 ’운수좋은 날’에는 등장하지 않고, ’사랑손님과 어머니’에는 많이 등장해, 해당 문서의 주제를 파악하는데 크게 기여한다.</p>
<ul>
<li>승산비(odds ratio)</li>
</ul>
<p>승산(odds)의 비를 이용해 복수의 문서에 등장한 단어의 상대적인 빈도를 계산한다. 2종의 문서에 대해서만 사용할 수 있다.</p>
<ul>
<li>가중 로그 승산비(weighted log odds)</li>
</ul>
<p>베이지언 확률모형으로 가중치를 계산해 단어의 상대적인 빈도를 계산한다. tf_idf와 승산비의 단점을 보완한 방법이다.</p>
</div>
<div id="tf_idf" class="section level2" number="9.2">
<h2><span class="header-section-number">9.2</span> tf_idf</h2>
<p>단어빈도-역문서빈도(term frequency-inverse document frequency: tf_idf).</p>
<p>말 그대로 개별 문서의 단어빈도(tf)와 문서전반에 걸쳐 사용된 정도의 역수(idf)를 곱해 구한다.</p>
<div id="공식" class="section level3" number="9.2.1">
<h3><span class="header-section-number">9.2.1</span> 공식</h3>
<p>tf_idf의 요소인 tf와 idf에 대해 각각 알아보자.</p>
<div id="tfterm-frequency" class="section level5" number="9.2.1.0.1">
<h5><span class="header-section-number">9.2.1.0.1</span> tf(term frequency)</h5>
<p>개별 문서(d)에 등장하는 단어(t)의 수를 각 문서에 등장한 모든 단어의 수로 나눈 값.</p>
<p><span class="math display">\[
tf(t, d) = \frac{tf_{document}}{tf_{total}}
\]</span></p>
<ul>
<li><span class="math inline">\(tf_{document}\)</span>: 각 문서에 등장한 해당 단어의 빈도</li>
<li><span class="math inline">\(tf_{total}\)</span>: 각 문서에 등장한 모든 단어의 수</li>
</ul>
</div>
<div id="dfdocument-frequency" class="section level5" number="9.2.1.0.2">
<h5><span class="header-section-number">9.2.1.0.2</span> df(document frequency)</h5>
<p>특정 단어(t)가 나타난 문서(D)의 수. df가 높다면 ’은/는/이/가’처럼 대부분의 문서에서 사용되는 단어임을 나타낸다.</p>
<p><span class="math display">\[
df(t, D)
\]</span></p>
</div>
<div id="idfinverse-document-frequency" class="section level5" number="9.2.1.0.3">
<h5><span class="header-section-number">9.2.1.0.3</span> idf(inverse document frequency)</h5>
<p>전체 문서의 수(N)를 해당 단어의 df로 나눈 뒤 로그를 취한 값. 값이 클수록 특정 문서에서만 등장하는 특이한 단어라는 의미가 된다.</p>
<p><span class="math display">\[
idf(t, D) = log(\frac{N}{df})
\]</span></p>
</div>
<div id="tf_idf-1" class="section level5" number="9.2.1.0.4">
<h5><span class="header-section-number">9.2.1.0.4</span> tf_idf</h5>
<p>tf와 idf를 곱하면 tf_idf를 구할 수 있다.</p>
<p><span class="math display">\[
  tfidf(t, d, D) = tf(t, d) \times idf(t, D)
\]</span></p>
<ul>
<li><code>t</code>: 단어</li>
<li><code>d</code>: 개별 문서</li>
<li><code>D</code>: 개별 문서의 집합(말뭉치)</li>
</ul>
</div>
</div>
<div id="적용" class="section level3" number="9.2.2">
<h3><span class="header-section-number">9.2.2</span> 적용</h3>
<p>짧은 문장을 이용해 tf_idf의 원리를 파악해 보자. 먼저 토큰화한다. 여기서 각 행은 개별 문서에 해당하고, 4개 행의 합의 말뭉치에 해당한다. 각 행을 식별하기 위해 문장별로 토큰화해 ID를 부여하자.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="anal2comp.html#cb3-1" aria-hidden="true" tabindex="-1"></a>sky_v <span class="ot">&lt;-</span>  <span class="fu">c</span>( <span class="st">&quot;The sky is blue.&quot;</span>, </span>
<span id="cb3-2"><a href="anal2comp.html#cb3-2" aria-hidden="true" tabindex="-1"></a>           <span class="st">&quot;The sun is bright today.&quot;</span>,</span>
<span id="cb3-3"><a href="anal2comp.html#cb3-3" aria-hidden="true" tabindex="-1"></a>           <span class="st">&quot;The sun in the sky is bright.&quot;</span>, </span>
<span id="cb3-4"><a href="anal2comp.html#cb3-4" aria-hidden="true" tabindex="-1"></a>           <span class="st">&quot;We can see the shining sun, the bright sun.&quot;</span>)</span>
<span id="cb3-5"><a href="anal2comp.html#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="anal2comp.html#cb3-6" aria-hidden="true" tabindex="-1"></a>sky_doc <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">text =</span> sky_v) <span class="sc">%&gt;%</span> </span>
<span id="cb3-7"><a href="anal2comp.html#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(sentence, text, <span class="at">token =</span> <span class="st">&quot;sentences&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb3-8"><a href="anal2comp.html#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">lineID =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb3-9"><a href="anal2comp.html#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">lineID =</span> <span class="fu">as.factor</span>(lineID))</span>
<span id="cb3-10"><a href="anal2comp.html#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="anal2comp.html#cb3-11" aria-hidden="true" tabindex="-1"></a>sky_doc</span></code></pre></div>
<pre><code>## # A tibble: 4 x 2
##   sentence                                    lineID
##   &lt;chr&gt;                                       &lt;fct&gt; 
## 1 the sky is blue.                            1     
## 2 the sun is bright today.                    2     
## 3 the sun in the sky is bright.               3     
## 4 we can see the shining sun, the bright sun. 4</code></pre>
<div id="tf" class="section level4" number="9.2.2.1">
<h4><span class="header-section-number">9.2.2.1</span> tf</h4>
<p>개별 문서(d)에 등장하는 단어(t)의 수를 각 문서에 등장한 모든 단어의 수로 나눈 값.</p>
<p><span class="math display">\[
tf(t, d) = \frac{tf_{document}}{tf_{total}}
\]</span></p>
<ul>
<li><span class="math inline">\(tf_{document}\)</span>: 각 문서에 등장한 해당 단어의 빈도</li>
<li><span class="math inline">\(tf_{total}\)</span>: 각 문서에 등장한 모든 단어의 수</li>
</ul>
<p>tf의 분자인 <span class="math inline">\(tf_{document}\)</span>(각 문서에 등장한 해당 단어의 빈도)를 구한다. 여기서 각 문서는 각 행이다. 따라서 각 행에서 등장한 단어의 빈도를 계산하면 된다.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="anal2comp.html#cb5-1" aria-hidden="true" tabindex="-1"></a>sky_tfd <span class="ot">&lt;-</span> </span>
<span id="cb5-2"><a href="anal2comp.html#cb5-2" aria-hidden="true" tabindex="-1"></a>sky_doc <span class="sc">%&gt;%</span> </span>
<span id="cb5-3"><a href="anal2comp.html#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, sentence) <span class="sc">%&gt;%</span> </span>
<span id="cb5-4"><a href="anal2comp.html#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(stop_words) <span class="sc">%&gt;%</span> </span>
<span id="cb5-5"><a href="anal2comp.html#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(lineID, word) <span class="sc">%&gt;%</span> </span>
<span id="cb5-6"><a href="anal2comp.html#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">tfdoc =</span> n)</span></code></pre></div>
<pre><code>## Joining, by = &quot;word&quot;</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="anal2comp.html#cb7-1" aria-hidden="true" tabindex="-1"></a>sky_tfd</span></code></pre></div>
<pre><code>## # A tibble: 10 x 3
##    lineID word    tfdoc
##    &lt;fct&gt;  &lt;chr&gt;   &lt;int&gt;
##  1 1      blue        1
##  2 1      sky         1
##  3 2      bright      1
##  4 2      sun         1
##  5 3      bright      1
##  6 3      sky         1
##  7 3      sun         1
##  8 4      bright      1
##  9 4      shining     1
## 10 4      sun         2</code></pre>
<p>tf의 분모 <span class="math inline">\(tf_{total}\)</span>(각 문서에 등장한 모든 단어의 수)를 구한다. 각 행을 이루는 모든 단어의 수를 계산하면 된다.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="anal2comp.html#cb9-1" aria-hidden="true" tabindex="-1"></a>sky_tft <span class="ot">&lt;-</span> sky_tfd <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href="anal2comp.html#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">N =</span> <span class="fu">length</span>(<span class="fu">unique</span>(lineID))) <span class="sc">%&gt;%</span>  <span class="co">#total number of documnets</span></span>
<span id="cb9-3"><a href="anal2comp.html#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(lineID) <span class="sc">%&gt;%</span> </span>
<span id="cb9-4"><a href="anal2comp.html#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">tftotal =</span> n)</span>
<span id="cb9-5"><a href="anal2comp.html#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="anal2comp.html#cb9-6" aria-hidden="true" tabindex="-1"></a>sky_tft</span></code></pre></div>
<pre><code>## # A tibble: 4 x 2
##   lineID tftotal
##   &lt;fct&gt;    &lt;int&gt;
## 1 1            2
## 2 2            2
## 3 3            3
## 4 4            3</code></pre>
<p><span class="math inline">\(tf_{document}\)</span>(각 문서에 등장한 해당 단어의 빈도)를 <span class="math inline">\(tf_{total}\)</span>(각 문서에 등장한 모든 단어의 수)로 나눈다.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="anal2comp.html#cb11-1" aria-hidden="true" tabindex="-1"></a>sky_tf <span class="ot">&lt;-</span> <span class="fu">left_join</span>(sky_tfd, sky_tft) <span class="sc">%&gt;%</span> </span>
<span id="cb11-2"><a href="anal2comp.html#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tf =</span> tfdoc<span class="sc">/</span>tftotal)</span></code></pre></div>
<pre><code>## Joining, by = &quot;lineID&quot;</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="anal2comp.html#cb13-1" aria-hidden="true" tabindex="-1"></a>sky_tf</span></code></pre></div>
<pre><code>## # A tibble: 10 x 5
##    lineID word    tfdoc tftotal    tf
##    &lt;fct&gt;  &lt;chr&gt;   &lt;int&gt;   &lt;int&gt; &lt;dbl&gt;
##  1 1      blue        1       2 0.5  
##  2 1      sky         1       2 0.5  
##  3 2      bright      1       2 0.5  
##  4 2      sun         1       2 0.5  
##  5 3      bright      1       3 0.333
##  6 3      sky         1       3 0.333
##  7 3      sun         1       3 0.333
##  8 4      bright      1       3 0.333
##  9 4      shining     1       3 0.333
## 10 4      sun         2       3 0.667</code></pre>
</div>
<div id="dfdocument-frequency-1" class="section level4" number="9.2.2.2">
<h4><span class="header-section-number">9.2.2.2</span> df(document frequency)</h4>
<p>특정 단어(t)가 나타난 문서(D)의 수. df가 높다면 ’은/는/이/가’처럼 대부분의 문서에서 사용되는 단어임을 나타낸다.</p>
<p><span class="math display">\[
df(t, D)
\]</span>
특정 단어가 등장한 문서의 수를 계산해 구할 수 있다.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="anal2comp.html#cb15-1" aria-hidden="true" tabindex="-1"></a>sky_df <span class="ot">&lt;-</span> <span class="fu">table</span>(sky_tf<span class="sc">$</span>word) <span class="sc">%&gt;%</span> </span>
<span id="cb15-2"><a href="anal2comp.html#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb15-3"><a href="anal2comp.html#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">word =</span> Var1, <span class="at">df =</span> Freq)</span>
<span id="cb15-4"><a href="anal2comp.html#cb15-4" aria-hidden="true" tabindex="-1"></a>sky_df</span></code></pre></div>
<pre><code>##      word df
## 1    blue  1
## 2  bright  3
## 3 shining  1
## 4     sky  2
## 5     sun  3</code></pre>
<p>‘blue’: 1번행에만 등장했으므로 1</p>
<p>‘sun’: 2,3, 4번 행에 등장했으므로 3</p>
</div>
<div id="idfinverse-document-frequency-1" class="section level4" number="9.2.2.3">
<h4><span class="header-section-number">9.2.2.3</span> idf(inverse document frequency)</h4>
<p>전체 문서의 수(N)를 해당 단어의 df로 나눈 뒤 로그를 취한 값. 값이 클수록 특정 문서에서만 등장하는 특이한 단어라는 의미가 된다.</p>
<p><span class="math display">\[
idf(t, D) = log(\frac{N}{df})
\]</span></p>
<p>공식을 그대로 적용해 계산한다. <code>sky_tf</code>에 N의 값을 계산해 두 데이터프레임을 열방향 결합한다.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="anal2comp.html#cb17-1" aria-hidden="true" tabindex="-1"></a>sky_tf <span class="ot">&lt;-</span> </span>
<span id="cb17-2"><a href="anal2comp.html#cb17-2" aria-hidden="true" tabindex="-1"></a>  sky_tf <span class="sc">%&gt;%</span> </span>
<span id="cb17-3"><a href="anal2comp.html#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">N =</span> <span class="fu">length</span>(<span class="fu">unique</span>(lineID))) <span class="co">#total number of documnets</span></span>
<span id="cb17-4"><a href="anal2comp.html#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="anal2comp.html#cb17-5" aria-hidden="true" tabindex="-1"></a>sky_idf <span class="ot">&lt;-</span> </span>
<span id="cb17-6"><a href="anal2comp.html#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(sky_tf, sky_df) <span class="sc">%&gt;%</span> </span>
<span id="cb17-7"><a href="anal2comp.html#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">idf =</span> <span class="fu">log</span>(N <span class="sc">/</span> df))</span></code></pre></div>
<pre><code>## Joining, by = &quot;word&quot;</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="anal2comp.html#cb19-1" aria-hidden="true" tabindex="-1"></a>sky_idf</span></code></pre></div>
<pre><code>## # A tibble: 10 x 8
##    lineID word    tfdoc tftotal    tf     N    df   idf
##    &lt;fct&gt;  &lt;chr&gt;   &lt;int&gt;   &lt;int&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt;
##  1 1      blue        1       2 0.5       4     1 1.39 
##  2 1      sky         1       2 0.5       4     2 0.693
##  3 2      bright      1       2 0.5       4     3 0.288
##  4 2      sun         1       2 0.5       4     3 0.288
##  5 3      bright      1       3 0.333     4     3 0.288
##  6 3      sky         1       3 0.333     4     2 0.693
##  7 3      sun         1       3 0.333     4     3 0.288
##  8 4      bright      1       3 0.333     4     3 0.288
##  9 4      shining     1       3 0.333     4     1 1.39 
## 10 4      sun         2       3 0.667     4     3 0.288</code></pre>
<p>3개 행에 걸쳐 등장하는 ’bright’의 idf가 1개 행에만 등장한 ’blue’보다 idf가 작다.</p>
</div>
<div id="tf_idf-2" class="section level4" number="9.2.2.4">
<h4><span class="header-section-number">9.2.2.4</span> tf_idf</h4>
<p>tf와 idf를 곱하면 tf_idf를 구할 수 있다.</p>
<p><span class="math display">\[
  tfidf(t, d, D) = tf(t, d) \times idf(t, D)
\]</span></p>
<ul>
<li><code>t</code>: 단어</li>
<li><code>d</code>: 개별 문서</li>
<li><code>D</code>: 개별 문서의 집합(말뭉치)</li>
</ul>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="anal2comp.html#cb21-1" aria-hidden="true" tabindex="-1"></a>sky_idf <span class="sc">%&gt;%</span> </span>
<span id="cb21-2"><a href="anal2comp.html#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">tf_idf =</span> tf <span class="sc">*</span> idf) <span class="sc">%&gt;%</span> </span>
<span id="cb21-3"><a href="anal2comp.html#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>tf_idf)</span></code></pre></div>
<pre><code>## # A tibble: 10 x 9
##    lineID word    tfdoc tftotal    tf     N    df   idf tf_idf
##    &lt;fct&gt;  &lt;chr&gt;   &lt;int&gt;   &lt;int&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt;
##  1 1      blue        1       2 0.5       4     1 1.39  0.693 
##  2 4      shining     1       3 0.333     4     1 1.39  0.462 
##  3 1      sky         1       2 0.5       4     2 0.693 0.347 
##  4 3      sky         1       3 0.333     4     2 0.693 0.231 
##  5 4      sun         2       3 0.667     4     3 0.288 0.192 
##  6 2      bright      1       2 0.5       4     3 0.288 0.144 
##  7 2      sun         1       2 0.5       4     3 0.288 0.144 
##  8 3      bright      1       3 0.333     4     3 0.288 0.0959
##  9 3      sun         1       3 0.333     4     3 0.288 0.0959
## 10 4      bright      1       3 0.333     4     3 0.288 0.0959</code></pre>
</div>
</div>
<div id="bind_tf_idftbl-term-document-n" class="section level3" number="9.2.3">
<h3><span class="header-section-number">9.2.3</span> <code>bind_tf_idf(tbl, term, document, n)</code></h3>
<p><code>tidytext</code>패키지에서 제공하는 <code>bind_tf_idf()</code>함수를 이용하면 tf_idf를 계산할 수 있다.</p>
<ul>
<li><p>tbl: 정돈데이터(한행에 값 하나).</p></li>
<li><p>term: 문자열이나 기호 등의 단어가 저장된 열.</p></li>
<li><p>document: 문자열이나 기호 등의 문서식별부호가 저장된 열.</p></li>
<li><p>n: 문자열이나 기호 등의 문서-용어의 빈도가 저장된 열.</p></li>
</ul>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="anal2comp.html#cb23-1" aria-hidden="true" tabindex="-1"></a>sky_tfd <span class="sc">%&gt;%</span> </span>
<span id="cb23-2"><a href="anal2comp.html#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_tf_idf</span>(<span class="at">tbl =</span> ., <span class="at">term =</span> word, <span class="at">document =</span> lineID, <span class="at">n =</span> tfdoc)</span></code></pre></div>
<pre><code>## # A tibble: 10 x 6
##    lineID word    tfdoc    tf   idf tf_idf
##    &lt;fct&gt;  &lt;chr&gt;   &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
##  1 1      blue        1 0.5   1.39  0.693 
##  2 1      sky         1 0.5   0.693 0.347 
##  3 2      bright      1 0.5   0.288 0.144 
##  4 2      sun         1 0.5   0.288 0.144 
##  5 3      bright      1 0.333 0.288 0.0959
##  6 3      sky         1 0.333 0.693 0.231 
##  7 3      sun         1 0.333 0.288 0.0959
##  8 4      bright      1 0.25  0.288 0.0719
##  9 4      shining     1 0.25  1.39  0.347 
## 10 4      sun         2 0.5   0.288 0.144</code></pre>
</div>
</div>
<div id="승산비odds-ratio" class="section level2" number="9.3">
<h2><span class="header-section-number">9.3</span> 승산비(odds ratio)</h2>
<p>문서의 상대빈도를 구하는 또 다른 방법이 승산비다. 승산(odds)의 비를 이용해 복수의 문서에 등장한 단어의 상대적인 빈도 계산할 수 있다. 따라서 승산비는 2종의 문서에 대해서만 구할 수 있다.</p>
<ul>
<li>승산비(odds ratio)</li>
</ul>
<p>한 사건의 승산(odds)에 대한 다른 한 사건 승산의 비(ratio)다. 다음은 승산B에 대한 승산A의 비.</p>
<p><span class="math display">\[
승산비 = \frac{승산A}{승산B}
\]</span></p>
<ul>
<li>비(ratio)</li>
</ul>
<p>두 부분 중 한 부분에 대한 다른 한 부분의 비. 예를 들어, 축구경기를 할때 한국이 3골을 넣고, 일본이 1골을 넣었다면, 비는 3대 1로서, 일본팀 1점에 대한 한국팀 3점의 비(ratio)다.</p>
<p><span class="math display">\[
A:B = \frac{A}{B}
\]</span></p>
<ul>
<li>승산(odds)</li>
</ul>
<p>어느 한 사건이 일어날 가능성이 승산(odds)이다. 영어를 그대로 읽어 ’오즈’라고도 한다. 한 사건의 발생빈도(n)를 전체의 값(total)으로 나눈다.</p>
<p><span class="math display">\[
승산(odds) = \frac{발생빈도(n) + 1}{총빈도(total) + 1}
\]</span>
분자와 분모에 각각 1을 더하는 이유는 발생빈도가 0인 경우도 있기 때문이다. 분모가 0이면 무한대가 된다.</p>
<div id="자료준비" class="section level3" number="9.3.1">
<h3><span class="header-section-number">9.3.1</span> 자료준비</h3>
<p>네이버영화 댓글의 승산비를 구해보자. 댓글을 긍정과 부정으로 구분해 라벨링한 자료를 이용한다.</p>
<ul>
<li><a href="https://github.com/e9t/nsmc">Naver sentiment movie corpus</a></li>
</ul>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="anal2comp.html#cb25-1" aria-hidden="true" tabindex="-1"></a>url_v <span class="ot">&lt;-</span> <span class="st">&#39;https://github.com/e9t/nsmc/raw/master/ratings.txt&#39;</span></span>
<span id="cb25-2"><a href="anal2comp.html#cb25-2" aria-hidden="true" tabindex="-1"></a>dest_v <span class="ot">&lt;-</span> <span class="st">&#39;data/ratings.txt&#39;</span></span>
<span id="cb25-3"><a href="anal2comp.html#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="anal2comp.html#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(url_v, dest_v, <span class="at">mode =</span> <span class="st">&quot;wb&quot;</span>)</span>
<span id="cb25-5"><a href="anal2comp.html#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="fu">list.files</span>(<span class="st">&#39;data/.&#39;</span>)</span></code></pre></div>
<p>다운로드한 자료 이입 및 검토</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="anal2comp.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_lines</span>(<span class="st">&quot;data/ratings.txt&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>##  chr [1:200001] &quot;id\tdocument\tlabel&quot; ...</code></pre>
<p>공백문자 <code>\t</code>으로 구분된 문자데이터이므로, <code>read_tsv()</code>로 이입한다.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="anal2comp.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_tsv</span>(<span class="st">&quot;data/ratings.txt&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## 
## -- Column specification --------------------------------------------------------
## cols(
##   id = col_double(),
##   document = col_character(),
##   label = col_double()
## )</code></pre>
<pre><code>## Rows: 200,000
## Columns: 3
## $ id       &lt;dbl&gt; 8112052, 8132799, 4655635, 9251303, 10067386, 2190435, 927...
## $ document &lt;chr&gt; &quot;어릴때보고 지금다시봐도 재밌어요ㅋㅋ&quot;, &quot;디자인을 배우는 학생으로, 외국디자이너와 그들이 일군 전통을 ...
## $ label    &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1...</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="anal2comp.html#cb31-1" aria-hidden="true" tabindex="-1"></a>ratings_df <span class="ot">&lt;-</span> <span class="fu">read_tsv</span>(<span class="st">&quot;data/ratings.txt&quot;</span>) </span></code></pre></div>
<pre><code>## 
## -- Column specification --------------------------------------------------------
## cols(
##   id = col_double(),
##   document = col_character(),
##   label = col_double()
## )</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="anal2comp.html#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(ratings_df)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##         id document                                                        label
##      &lt;dbl&gt; &lt;chr&gt;                                                           &lt;dbl&gt;
## 1  8112052 어릴때보고 지금다시봐도 재밌어요ㅋㅋ                                1
## 2  8132799 디자인을 배우는 학생으로, 외국디자이너와 그들이 일군 전통을 통해 발전해가는 문화산업이 부러웠는데. 사실 우리나~     1
## 3  4655635 폴리스스토리 시리즈는 1부터 뉴까지 버릴께 하나도 없음.. 최고.       1
## 4  9251303 와.. 연기가 진짜 개쩔구나.. 지루할거라고 생각했는데 몰입해서 봤다.. 그래 이런게 진짜 영화지~     1
## 5 10067386 안개 자욱한 밤하늘에 떠 있는 초승달 같은 영화.                      1
## 6  2190435 사랑을 해본사람이라면 처음부터 끝까지 웃을수 있는영화               1</code></pre>
<p>데이터셋이 커 처리에 시간이 걸리므로 각 라벨별로 1000개 행씩 추출한다.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="anal2comp.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">37</span>)</span>
<span id="cb35-2"><a href="anal2comp.html#cb35-2" aria-hidden="true" tabindex="-1"></a>by1000_df <span class="ot">&lt;-</span> </span>
<span id="cb35-3"><a href="anal2comp.html#cb35-3" aria-hidden="true" tabindex="-1"></a>  ratings_df <span class="sc">%&gt;%</span> </span>
<span id="cb35-4"><a href="anal2comp.html#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(label) <span class="sc">%&gt;%</span> </span>
<span id="cb35-5"><a href="anal2comp.html#cb35-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample_n</span>(<span class="at">size =</span> <span class="dv">1000</span>)</span>
<span id="cb35-6"><a href="anal2comp.html#cb35-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-7"><a href="anal2comp.html#cb35-7" aria-hidden="true" tabindex="-1"></a>by1000_df <span class="sc">%&gt;%</span> <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 2,000
## Columns: 3
## Groups: label [2]
## $ id       &lt;dbl&gt; 10101634, 5925555, 9809791, 4541051, 8063459, 9938640, 102...
## $ document &lt;chr&gt; &quot;액션이 부족한 가운데 이야기 자체가 허접하군&quot;, &quot;자고 일어나도 이해가 되고 긴장도 거의 없는;;;;;...
## $ label    &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0...</code></pre>
<p><code>RcppMeCab</code>패키지에서 <code>pos()</code>함수로 형태소를 추출한 뒤, 일반명사(‘nng’)만 추출해 빈도를 계산한다.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="anal2comp.html#cb37-1" aria-hidden="true" tabindex="-1"></a>by1000_df <span class="sc">%&gt;%</span> </span>
<span id="cb37-2"><a href="anal2comp.html#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, document, <span class="at">token =</span> pos) <span class="sc">%&gt;%</span> </span>
<span id="cb37-3"><a href="anal2comp.html#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(word, <span class="fu">c</span>(<span class="st">&quot;word&quot;</span>, <span class="st">&quot;pos&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb37-4"><a href="anal2comp.html#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(pos <span class="sc">==</span> <span class="st">&quot;nng&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb37-5"><a href="anal2comp.html#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;영화&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb37-6"><a href="anal2comp.html#cb37-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> T)</span></code></pre></div>
<pre><code>## Warning: Expected 2 pieces. Additional pieces discarded in 9 rows [6974, 6975,
## 12084, 14122, 14126, 23822, 31071, 32929, 34114].</code></pre>
<pre><code>## # A tibble: 2,826 x 3
## # Groups:   label [2]
##    label word       n
##    &lt;dbl&gt; &lt;chr&gt;  &lt;int&gt;
##  1     1 최고      84
##  2     1 감동      58
##  3     1 연기      58
##  4     0 감독      46
##  5     0 스토리    46
##  6     0 시간      46
##  7     1 평점      46
##  8     1 생각      45
##  9     0 사람      43
## 10     0 평점      40
## # ... with 2,816 more rows</code></pre>
<div id="자료-준비" class="section level4" number="9.3.1.1">
<h4><span class="header-section-number">9.3.1.1</span> 자료 준비</h4>
<p>영화평은 긍정적인 평에는 ‘1,’ 부정적인 평에는 ’0’으로 분류돼 있다. 긍정적인 평과 부정적인 평에 사용된 명사의 승산비를 구해보자. 이를 위해 long form을 wide form으로 변형해 <code>label</code>열의 값을 열의 헤더로 변환하고, 각 열의 값으로는 토큰을 투입한다. 결측값이 있으면 연산이 안되므로 <code>NA</code>값은 ’0’으로 채운다.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="anal2comp.html#cb40-1" aria-hidden="true" tabindex="-1"></a>by1000_df <span class="sc">%&gt;%</span> </span>
<span id="cb40-2"><a href="anal2comp.html#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, document, <span class="at">token =</span> pos) <span class="sc">%&gt;%</span> </span>
<span id="cb40-3"><a href="anal2comp.html#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(word, <span class="fu">c</span>(<span class="st">&quot;word&quot;</span>, <span class="st">&quot;pos&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb40-4"><a href="anal2comp.html#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(pos <span class="sc">==</span> <span class="st">&quot;nng&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb40-5"><a href="anal2comp.html#cb40-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;영화&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb40-6"><a href="anal2comp.html#cb40-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word) <span class="sc">%&gt;%</span> </span>
<span id="cb40-7"><a href="anal2comp.html#cb40-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> label,</span>
<span id="cb40-8"><a href="anal2comp.html#cb40-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> n, </span>
<span id="cb40-9"><a href="anal2comp.html#cb40-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_fill =</span> <span class="fu">list</span>(<span class="at">n =</span> <span class="dv">0</span>))</span></code></pre></div>
<pre><code>## Warning: Expected 2 pieces. Additional pieces discarded in 9 rows [6974, 6975,
## 12084, 14122, 14126, 23822, 31071, 32929, 34114].</code></pre>
<pre><code>## # A tibble: 2,299 x 3
##    word    `0`   `1`
##    &lt;chr&gt; &lt;int&gt; &lt;int&gt;
##  1 가가      1     0
##  2 가관      1     0
##  3 가능      1     4
##  4 가든      1     0
##  5 가리      1     0
##  6 가문      1     0
##  7 가미      1     0
##  8 가수      2     0
##  9 가슴      5    13
## 10 가식      1     0
## # ... with 2,289 more rows</code></pre>
</div>
<div id="승산비-계산" class="section level4" number="9.3.1.2">
<h4><span class="header-section-number">9.3.1.2</span> 승산비 계산</h4>
<p>긍정평과 부정평의 승산을 구한다음, 승산비를 계산한다.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="anal2comp.html#cb43-1" aria-hidden="true" tabindex="-1"></a>by1000_df <span class="sc">%&gt;%</span> </span>
<span id="cb43-2"><a href="anal2comp.html#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, document, <span class="at">token =</span> pos) <span class="sc">%&gt;%</span> </span>
<span id="cb43-3"><a href="anal2comp.html#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(word, <span class="fu">c</span>(<span class="st">&quot;word&quot;</span>, <span class="st">&quot;pos&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb43-4"><a href="anal2comp.html#cb43-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(pos <span class="sc">==</span> <span class="st">&quot;nng&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb43-5"><a href="anal2comp.html#cb43-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;영화&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb43-6"><a href="anal2comp.html#cb43-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word) <span class="sc">%&gt;%</span> </span>
<span id="cb43-7"><a href="anal2comp.html#cb43-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> label,</span>
<span id="cb43-8"><a href="anal2comp.html#cb43-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> n, </span>
<span id="cb43-9"><a href="anal2comp.html#cb43-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_fill =</span> <span class="fu">list</span>(<span class="at">n =</span> <span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb43-10"><a href="anal2comp.html#cb43-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">posi =</span> <span class="st">`</span><span class="at">1</span><span class="st">`</span>, <span class="at">nega =</span> <span class="st">`</span><span class="at">0</span><span class="st">`</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb43-11"><a href="anal2comp.html#cb43-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">odds_posi =</span> ((posi<span class="sc">+</span><span class="dv">1</span>)<span class="sc">/</span><span class="fu">sum</span>(posi<span class="sc">+</span><span class="dv">1</span>)),</span>
<span id="cb43-12"><a href="anal2comp.html#cb43-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">odds_nega =</span> ((nega<span class="sc">+</span><span class="dv">1</span>)<span class="sc">/</span><span class="fu">sum</span>(nega<span class="sc">+</span><span class="dv">1</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb43-13"><a href="anal2comp.html#cb43-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">posi_odds_ratio =</span> (odds_posi <span class="sc">/</span> odds_nega)) </span></code></pre></div>
<pre><code>## Warning: Expected 2 pieces. Additional pieces discarded in 9 rows [6974, 6975,
## 12084, 14122, 14126, 23822, 31071, 32929, 34114].</code></pre>
<pre><code>## # A tibble: 2,299 x 6
##    word   nega  posi odds_posi odds_nega posi_odds_ratio
##    &lt;chr&gt; &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;     &lt;dbl&gt;           &lt;dbl&gt;
##  1 가가      1     0  0.000181  0.000334           0.542
##  2 가관      1     0  0.000181  0.000334           0.542
##  3 가능      1     4  0.000905  0.000334           2.71 
##  4 가든      1     0  0.000181  0.000334           0.542
##  5 가리      1     0  0.000181  0.000334           0.542
##  6 가문      1     0  0.000181  0.000334           0.542
##  7 가미      1     0  0.000181  0.000334           0.542
##  8 가수      2     0  0.000181  0.000501           0.361
##  9 가슴      5    13  0.00253   0.00100            2.53 
## 10 가식      1     0  0.000181  0.000334           0.542
## # ... with 2,289 more rows</code></pre>
<p>승산비를 이용해 영화의 긍정평과 부정평에서 상대적으로 많이 사용된 명사를 추출했다. 순서대로 정렬하자.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="anal2comp.html#cb46-1" aria-hidden="true" tabindex="-1"></a>rate_odds_df <span class="ot">&lt;-</span> </span>
<span id="cb46-2"><a href="anal2comp.html#cb46-2" aria-hidden="true" tabindex="-1"></a>by1000_df <span class="sc">%&gt;%</span> </span>
<span id="cb46-3"><a href="anal2comp.html#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, document, <span class="at">token =</span> pos) <span class="sc">%&gt;%</span> </span>
<span id="cb46-4"><a href="anal2comp.html#cb46-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(word, <span class="fu">c</span>(<span class="st">&quot;word&quot;</span>, <span class="st">&quot;pos&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb46-5"><a href="anal2comp.html#cb46-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(pos <span class="sc">==</span> <span class="st">&quot;nng&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb46-6"><a href="anal2comp.html#cb46-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;영화&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb46-7"><a href="anal2comp.html#cb46-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word) <span class="sc">%&gt;%</span> </span>
<span id="cb46-8"><a href="anal2comp.html#cb46-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> label,</span>
<span id="cb46-9"><a href="anal2comp.html#cb46-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> n, </span>
<span id="cb46-10"><a href="anal2comp.html#cb46-10" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_fill =</span> <span class="fu">list</span>(<span class="at">n =</span> <span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb46-11"><a href="anal2comp.html#cb46-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">posi =</span> <span class="st">`</span><span class="at">1</span><span class="st">`</span>, <span class="at">nega =</span> <span class="st">`</span><span class="at">0</span><span class="st">`</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb46-12"><a href="anal2comp.html#cb46-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">odds_posi =</span> ((posi<span class="sc">+</span><span class="dv">1</span>)<span class="sc">/</span><span class="fu">sum</span>(posi<span class="sc">+</span><span class="dv">1</span>)),</span>
<span id="cb46-13"><a href="anal2comp.html#cb46-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">odds_nega =</span> ((nega<span class="sc">+</span><span class="dv">1</span>)<span class="sc">/</span><span class="fu">sum</span>(nega<span class="sc">+</span><span class="dv">1</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb46-14"><a href="anal2comp.html#cb46-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">posi_odds_ratio =</span> (odds_posi <span class="sc">/</span> odds_nega)) <span class="sc">%&gt;%</span> </span>
<span id="cb46-15"><a href="anal2comp.html#cb46-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 긍정평과 부정평 각각 상위 20개씩 필터 </span></span>
<span id="cb46-16"><a href="anal2comp.html#cb46-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">rank</span>(posi_odds_ratio) <span class="sc">&lt;=</span> <span class="dv">20</span> <span class="sc">|</span> <span class="fu">rank</span>(<span class="sc">-</span>posi_odds_ratio) <span class="sc">&lt;=</span> <span class="dv">20</span>) <span class="sc">%&gt;%</span>   <span class="fu">arrange</span>(<span class="sc">-</span>posi_odds_ratio)</span></code></pre></div>
<pre><code>## Warning: Expected 2 pieces. Additional pieces discarded in 9 rows [6974, 6975,
## 12084, 14122, 14126, 23822, 31071, 32929, 34114].</code></pre>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="anal2comp.html#cb48-1" aria-hidden="true" tabindex="-1"></a>rate_odds_df <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 x 6
##   word   nega  posi odds_posi odds_nega posi_odds_ratio
##   &lt;chr&gt; &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;     &lt;dbl&gt;           &lt;dbl&gt;
## 1 굿        0    19   0.00362  0.000167            21.7
## 2 밋        0    16   0.00308  0.000167            18.4
## 3 ㄷ        0    15   0.00290  0.000167            17.3
## 4 삶        0    10   0.00199  0.000167            11.9
## 5 마음      0     9   0.00181  0.000167            10.8
## 6 최고      8    84   0.0154   0.00150             10.2</code></pre>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="anal2comp.html#cb50-1" aria-hidden="true" tabindex="-1"></a>rate_odds_df <span class="sc">%&gt;%</span> <span class="fu">tail</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 x 6
##   word    nega  posi odds_posi odds_nega posi_odds_ratio
##   &lt;chr&gt;  &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;     &lt;dbl&gt;           &lt;dbl&gt;
## 1 낭비       9     0  0.000181   0.00167          0.108 
## 2 얘기      10     0  0.000181   0.00184          0.0985
## 3 쓰레기    36     2  0.000543   0.00618          0.0879
## 4 돈        19     0  0.000181   0.00334          0.0542
## 5 짜증      24     0  0.000181   0.00417          0.0434
## 6 최악      24     0  0.000181   0.00417          0.0434</code></pre>
<p>’밋’과 ’ㄷ’이 사용된 문장을 살펴보자. <code>drop =</code>인자에 <code>FALSE</code>를 투입하면 토큰화한 문장을 제거하지 않고 남겨둔다.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="anal2comp.html#cb52-1" aria-hidden="true" tabindex="-1"></a>by1000_df <span class="sc">%&gt;%</span> </span>
<span id="cb52-2"><a href="anal2comp.html#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, document, <span class="at">token =</span> pos, <span class="at">drop =</span> F) <span class="sc">%&gt;%</span> </span>
<span id="cb52-3"><a href="anal2comp.html#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(word, <span class="fu">c</span>(<span class="st">&quot;word&quot;</span>, <span class="st">&quot;pos&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb52-4"><a href="anal2comp.html#cb52-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(pos <span class="sc">==</span> <span class="st">&quot;nng&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb52-5"><a href="anal2comp.html#cb52-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">==</span> <span class="st">&quot;밋&quot;</span> <span class="sc">|</span> word <span class="sc">==</span> <span class="st">&quot;ㄷ&quot;</span>) </span></code></pre></div>
<pre><code>## Warning: Expected 2 pieces. Additional pieces discarded in 9 rows [6974, 6975,
## 12084, 14122, 14126, 23822, 31071, 32929, 34114].</code></pre>
<pre><code>## # A tibble: 31 x 5
## # Groups:   label [1]
##         id document                                            label word  pos  
##      &lt;dbl&gt; &lt;chr&gt;                                               &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
##  1 7558788 대박 재밋네요 쌤해밀턴 광고로 대박나길 넘 귀엽다 ㅋㅋㅋ쌤 화이팅~     1 밋    nng  
##  2 8456921 40년전 영화임 ㄷㄷㄷ                                    1 ㄷ    nng  
##  3 8456921 40년전 영화임 ㄷㄷㄷ                                    1 ㄷ    nng  
##  4 8456921 40년전 영화임 ㄷㄷㄷ                                    1 ㄷ    nng  
##  5 9589074 헐 촤화연 졸라 개이쁘네 ㅎㄷㄷ                          1 ㄷ    nng  
##  6 9589074 헐 촤화연 졸라 개이쁘네 ㅎㄷㄷ                          1 ㄷ    nng  
##  7 5181629 서기 넘 이쁘고 재밋음ㅋㅋㅋ                             1 밋    nng  
##  8 8938724 재밋었음10자는뭐여                                      1 밋    nng  
##  9 7159878 ㅎㄷㄷ 난십점 에헤 ~                                    1 ㄷ    nng  
## 10 7159878 ㅎㄷㄷ 난십점 에헤 ~                                    1 ㄷ    nng  
## # ... with 21 more rows</code></pre>
<p>’재밋었음’에서 <code>MeCab</code>형태소 분석기가 ’밋’을 명사로 추출한 결과이다.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="anal2comp.html#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">enc2utf8</span>(<span class="st">&quot;재밋었음10자는뭐여&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">pos</span>()</span></code></pre></div>
<pre><code>## $재밋었음10자는뭐여
## [1] &quot;재/XPN&quot;    &quot;밋/NNG&quot;    &quot;었/EP&quot;     &quot;음/ETN&quot;    &quot;10/SN&quot;     &quot;자/NNG&quot;   
## [7] &quot;는/JX&quot;     &quot;뭐/NP&quot;     &quot;여/VCP+EC&quot;</code></pre>
<p>막대도표로 시각화하자. 긍정평과 부정평 도표를 분리해 표시하기 위해 승산비 1을 기준으로 크면 ‘긍정평’ 작으면 ’부정평’을 부여한다.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="anal2comp.html#cb57-1" aria-hidden="true" tabindex="-1"></a>rate_odds_df <span class="sc">%&gt;%</span> </span>
<span id="cb57-2"><a href="anal2comp.html#cb57-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">label =</span> <span class="fu">ifelse</span>(posi_odds_ratio <span class="sc">&gt;</span> <span class="dv">1</span>, <span class="st">&quot;긍정평&quot;</span>, <span class="st">&quot;부정평&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb57-3"><a href="anal2comp.html#cb57-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">word =</span> <span class="fu">reorder</span>(word, posi_odds_ratio)) <span class="sc">%&gt;%</span> </span>
<span id="cb57-4"><a href="anal2comp.html#cb57-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb57-5"><a href="anal2comp.html#cb57-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> posi_odds_ratio, </span>
<span id="cb57-6"><a href="anal2comp.html#cb57-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> word, </span>
<span id="cb57-7"><a href="anal2comp.html#cb57-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span> label)) <span class="sc">+</span> </span>
<span id="cb57-8"><a href="anal2comp.html#cb57-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> F) <span class="sc">+</span></span>
<span id="cb57-9"><a href="anal2comp.html#cb57-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>label, <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>)</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/cmp20-1.png" width="672" /></p>
<p>중요도가 비슷한 단어를 추출해보자. 승산비가 1이면 분자와 분모가 같으므로 긍정평과 부정평의 승산이 같다는 의미다.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="anal2comp.html#cb58-1" aria-hidden="true" tabindex="-1"></a>by1000_df <span class="sc">%&gt;%</span> </span>
<span id="cb58-2"><a href="anal2comp.html#cb58-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, document, <span class="at">token =</span> pos) <span class="sc">%&gt;%</span> </span>
<span id="cb58-3"><a href="anal2comp.html#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(word, <span class="fu">c</span>(<span class="st">&quot;word&quot;</span>, <span class="st">&quot;pos&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb58-4"><a href="anal2comp.html#cb58-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(pos <span class="sc">==</span> <span class="st">&quot;nng&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb58-5"><a href="anal2comp.html#cb58-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;영화&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb58-6"><a href="anal2comp.html#cb58-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word) <span class="sc">%&gt;%</span> </span>
<span id="cb58-7"><a href="anal2comp.html#cb58-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> label,</span>
<span id="cb58-8"><a href="anal2comp.html#cb58-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> n, </span>
<span id="cb58-9"><a href="anal2comp.html#cb58-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_fill =</span> <span class="fu">list</span>(<span class="at">n =</span> <span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb58-10"><a href="anal2comp.html#cb58-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">posi =</span> <span class="st">`</span><span class="at">1</span><span class="st">`</span>, <span class="at">nega =</span> <span class="st">`</span><span class="at">0</span><span class="st">`</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb58-11"><a href="anal2comp.html#cb58-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">odds_posi =</span> ((posi<span class="sc">+</span><span class="dv">1</span>)<span class="sc">/</span><span class="fu">sum</span>(posi<span class="sc">+</span><span class="dv">1</span>)),</span>
<span id="cb58-12"><a href="anal2comp.html#cb58-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">odds_nega =</span> ((nega<span class="sc">+</span><span class="dv">1</span>)<span class="sc">/</span><span class="fu">sum</span>(nega<span class="sc">+</span><span class="dv">1</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb58-13"><a href="anal2comp.html#cb58-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">posi_odds_ratio =</span> (odds_posi <span class="sc">/</span> odds_nega)) <span class="sc">%&gt;%</span> </span>
<span id="cb58-14"><a href="anal2comp.html#cb58-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 승산비 1을 중심으로 정렬</span></span>
<span id="cb58-15"><a href="anal2comp.html#cb58-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">abs</span>(<span class="dv">1</span> <span class="sc">-</span> posi_odds_ratio)) <span class="sc">%&gt;%</span> </span>
<span id="cb58-16"><a href="anal2comp.html#cb58-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">20</span>)</span></code></pre></div>
<pre><code>## Warning: Expected 2 pieces. Additional pieces discarded in 9 rows [6974, 6975,
## 12084, 14122, 14126, 23822, 31071, 32929, 34114].</code></pre>
<pre><code>## # A tibble: 20 x 6
##    word    nega  posi odds_posi odds_nega posi_odds_ratio
##    &lt;chr&gt;  &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;     &lt;dbl&gt;           &lt;dbl&gt;
##  1 이야기    14    13  0.00253   0.00250            1.01 
##  2 정도      18    16  0.00308   0.00317            0.970
##  3 결말       7     6  0.00127   0.00134            0.948
##  4 이상      15    13  0.00253   0.00267            0.948
##  5 팬         7     6  0.00127   0.00134            0.948
##  6 연기력     6     5  0.00109   0.00117            0.929
##  7 주인공    12    10  0.00199   0.00217            0.917
##  8 가치       3     3  0.000724  0.000668           1.08 
##  9 감탄       1     1  0.000362  0.000334           1.08 
## 10 강시       1     1  0.000362  0.000334           1.08 
## 11 개그       1     1  0.000362  0.000334           1.08 
## 12 개념       1     1  0.000362  0.000334           1.08 
## 13 개성       1     1  0.000362  0.000334           1.08 
## 14 거부       1     1  0.000362  0.000334           1.08 
## 15 고생       1     1  0.000362  0.000334           1.08 
## 16 공부       1     1  0.000362  0.000334           1.08 
## 17 과         1     1  0.000362  0.000334           1.08 
## 18 관점       1     1  0.000362  0.000334           1.08 
## 19 기법       1     1  0.000362  0.000334           1.08 
## 20 꼬마       1     1  0.000362  0.000334           1.08</code></pre>
<p>중요도가 비슷하면서 빈도가 높은 단어를 찾아 보자.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="anal2comp.html#cb61-1" aria-hidden="true" tabindex="-1"></a>by1000_df <span class="sc">%&gt;%</span> </span>
<span id="cb61-2"><a href="anal2comp.html#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, document, <span class="at">token =</span> pos) <span class="sc">%&gt;%</span> </span>
<span id="cb61-3"><a href="anal2comp.html#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(word, <span class="fu">c</span>(<span class="st">&quot;word&quot;</span>, <span class="st">&quot;pos&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb61-4"><a href="anal2comp.html#cb61-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(pos <span class="sc">==</span> <span class="st">&quot;nng&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb61-5"><a href="anal2comp.html#cb61-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;영화&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb61-6"><a href="anal2comp.html#cb61-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word) <span class="sc">%&gt;%</span> </span>
<span id="cb61-7"><a href="anal2comp.html#cb61-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> label,</span>
<span id="cb61-8"><a href="anal2comp.html#cb61-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> n, </span>
<span id="cb61-9"><a href="anal2comp.html#cb61-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_fill =</span> <span class="fu">list</span>(<span class="at">n =</span> <span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb61-10"><a href="anal2comp.html#cb61-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">posi =</span> <span class="st">`</span><span class="at">1</span><span class="st">`</span>, <span class="at">nega =</span> <span class="st">`</span><span class="at">0</span><span class="st">`</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb61-11"><a href="anal2comp.html#cb61-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 긍정평과 부정평에서 각각 10회 초과한 단어 filter</span></span>
<span id="cb61-12"><a href="anal2comp.html#cb61-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(nega <span class="sc">&gt;</span> <span class="dv">10</span> <span class="sc">&amp;</span> posi <span class="sc">&gt;</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span>  </span>
<span id="cb61-13"><a href="anal2comp.html#cb61-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">odds_posi =</span> ((posi<span class="sc">+</span><span class="dv">1</span>)<span class="sc">/</span><span class="fu">sum</span>(posi<span class="sc">+</span><span class="dv">1</span>)),</span>
<span id="cb61-14"><a href="anal2comp.html#cb61-14" aria-hidden="true" tabindex="-1"></a>         <span class="at">odds_nega =</span> ((nega<span class="sc">+</span><span class="dv">1</span>)<span class="sc">/</span><span class="fu">sum</span>(nega<span class="sc">+</span><span class="dv">1</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb61-15"><a href="anal2comp.html#cb61-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">posi_odds_ratio =</span> (odds_posi <span class="sc">/</span> odds_nega)) <span class="sc">%&gt;%</span> </span>
<span id="cb61-16"><a href="anal2comp.html#cb61-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">abs</span>(<span class="dv">1</span> <span class="sc">-</span> posi_odds_ratio)) <span class="sc">%&gt;%</span> </span>
<span id="cb61-17"><a href="anal2comp.html#cb61-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">20</span>)</span></code></pre></div>
<pre><code>## Warning: Expected 2 pieces. Additional pieces discarded in 9 rows [6974, 6975,
## 12084, 14122, 14126, 23822, 31071, 32929, 34114].</code></pre>
<pre><code>## # A tibble: 20 x 6
##    word    nega  posi odds_posi odds_nega posi_odds_ratio
##    &lt;chr&gt;  &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;     &lt;dbl&gt;           &lt;dbl&gt;
##  1 이야기    14    13    0.0201    0.0201           1.00 
##  2 정도      18    16    0.0245    0.0254           0.963
##  3 이상      15    13    0.0201    0.0214           0.942
##  4 드라마    35    35    0.0518    0.0481           1.08 
##  5 잼        14    14    0.0216    0.0201           1.08 
##  6 배우      27    22    0.0331    0.0374           0.884
##  7 연출      14    11    0.0173    0.0201           0.861
##  8 재미      25    19    0.0288    0.0348           0.828
##  9 공포      15    11    0.0173    0.0214           0.807
## 10 사람      43    32    0.0475    0.0588           0.807
## 11 장면      14    16    0.0245    0.0201           1.22 
## 12 평점      40    46    0.0676    0.0548           1.23 
## 13 액션      12    14    0.0216    0.0174           1.24 
## 14 말        36    24    0.0360    0.0495           0.727
## 15 작품      20    24    0.0360    0.0281           1.28 
## 16 처음      23    15    0.0230    0.0321           0.718
## 17 스토리    46    30    0.0446    0.0628           0.710
## 18 이해      24    13    0.0201    0.0334           0.603
## 19 끝        30    15    0.0230    0.0414           0.555
## 20 기대      13    18    0.0273    0.0187           1.46</code></pre>
</div>
</div>
<div id="로그승산비" class="section level3" number="9.3.2">
<h3><span class="header-section-number">9.3.2</span> 로그승산비</h3>
<ul>
<li>로그승산비(log odds ratio)
승산비에 로그를 위한 값. 로그를 취하면 1보다 작은수는 음수가 되고, 1보다 큰수는 양수가 된다.</li>
</ul>
<p><span class="math display">\[
로그 승산비 = log(\frac{승산A}{승산B})
\]</span></p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="anal2comp.html#cb64-1" aria-hidden="true" tabindex="-1"></a>by1000_df <span class="sc">%&gt;%</span> </span>
<span id="cb64-2"><a href="anal2comp.html#cb64-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, document, <span class="at">token =</span> pos) <span class="sc">%&gt;%</span> </span>
<span id="cb64-3"><a href="anal2comp.html#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(word, <span class="fu">c</span>(<span class="st">&quot;word&quot;</span>, <span class="st">&quot;pos&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb64-4"><a href="anal2comp.html#cb64-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(pos <span class="sc">==</span> <span class="st">&quot;nng&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb64-5"><a href="anal2comp.html#cb64-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;영화&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb64-6"><a href="anal2comp.html#cb64-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word) <span class="sc">%&gt;%</span> </span>
<span id="cb64-7"><a href="anal2comp.html#cb64-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> label,</span>
<span id="cb64-8"><a href="anal2comp.html#cb64-8" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> n, </span>
<span id="cb64-9"><a href="anal2comp.html#cb64-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_fill =</span> <span class="fu">list</span>(<span class="at">n =</span> <span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb64-10"><a href="anal2comp.html#cb64-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">posi =</span> <span class="st">`</span><span class="at">1</span><span class="st">`</span>, <span class="at">nega =</span> <span class="st">`</span><span class="at">0</span><span class="st">`</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb64-11"><a href="anal2comp.html#cb64-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">odds_posi =</span> ((posi<span class="sc">+</span><span class="dv">1</span>)<span class="sc">/</span><span class="fu">sum</span>(posi<span class="sc">+</span><span class="dv">1</span>)),</span>
<span id="cb64-12"><a href="anal2comp.html#cb64-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">odds_nega =</span> ((nega<span class="sc">+</span><span class="dv">1</span>)<span class="sc">/</span><span class="fu">sum</span>(nega<span class="sc">+</span><span class="dv">1</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb64-13"><a href="anal2comp.html#cb64-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 승산비에 로그를 취한다.</span></span>
<span id="cb64-14"><a href="anal2comp.html#cb64-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">log_odds_ratio =</span> <span class="fu">log</span>(odds_posi <span class="sc">/</span> odds_nega)) </span></code></pre></div>
<pre><code>## Warning: Expected 2 pieces. Additional pieces discarded in 9 rows [6974, 6975,
## 12084, 14122, 14126, 23822, 31071, 32929, 34114].</code></pre>
<pre><code>## # A tibble: 2,299 x 6
##    word   nega  posi odds_posi odds_nega log_odds_ratio
##    &lt;chr&gt; &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;     &lt;dbl&gt;          &lt;dbl&gt;
##  1 가가      1     0  0.000181  0.000334         -0.613
##  2 가관      1     0  0.000181  0.000334         -0.613
##  3 가능      1     4  0.000905  0.000334          0.997
##  4 가든      1     0  0.000181  0.000334         -0.613
##  5 가리      1     0  0.000181  0.000334         -0.613
##  6 가문      1     0  0.000181  0.000334         -0.613
##  7 가미      1     0  0.000181  0.000334         -0.613
##  8 가수      2     0  0.000181  0.000501         -1.02 
##  9 가슴      5    13  0.00253   0.00100           0.928
## 10 가식      1     0  0.000181  0.000334         -0.613
## # ... with 2,289 more rows</code></pre>
<p>로그 승산비를 이용하면 하나의 도표에 상대빈도를 표시할 수 있다. 먼저 로그승산비를 구한뒤, 0을 기준으로 긍정평과 부정평을 group으로 구분한다. 긍정평과 부정평 집단별로 구분돼 있으므로, 로그승산비의 절대값 상위 10개를 지정하면, 긍정평과 부정평 별로 각각 상위 10개 단어를 추출할 수 있다.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="anal2comp.html#cb67-1" aria-hidden="true" tabindex="-1"></a>rate_log_df <span class="ot">&lt;-</span> </span>
<span id="cb67-2"><a href="anal2comp.html#cb67-2" aria-hidden="true" tabindex="-1"></a>by1000_df <span class="sc">%&gt;%</span> </span>
<span id="cb67-3"><a href="anal2comp.html#cb67-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, document, <span class="at">token =</span> pos) <span class="sc">%&gt;%</span> </span>
<span id="cb67-4"><a href="anal2comp.html#cb67-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(word, <span class="fu">c</span>(<span class="st">&quot;word&quot;</span>, <span class="st">&quot;pos&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb67-5"><a href="anal2comp.html#cb67-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(pos <span class="sc">==</span> <span class="st">&quot;nng&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb67-6"><a href="anal2comp.html#cb67-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;영화&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb67-7"><a href="anal2comp.html#cb67-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word) <span class="sc">%&gt;%</span> </span>
<span id="cb67-8"><a href="anal2comp.html#cb67-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> label,</span>
<span id="cb67-9"><a href="anal2comp.html#cb67-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_from =</span> n, </span>
<span id="cb67-10"><a href="anal2comp.html#cb67-10" aria-hidden="true" tabindex="-1"></a>              <span class="at">values_fill =</span> <span class="fu">list</span>(<span class="at">n =</span> <span class="dv">0</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb67-11"><a href="anal2comp.html#cb67-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">posi =</span> <span class="st">`</span><span class="at">1</span><span class="st">`</span>, <span class="at">nega =</span> <span class="st">`</span><span class="at">0</span><span class="st">`</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb67-12"><a href="anal2comp.html#cb67-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">odds_posi =</span> ((posi<span class="sc">+</span><span class="dv">1</span>)<span class="sc">/</span><span class="fu">sum</span>(posi<span class="sc">+</span><span class="dv">1</span>)),</span>
<span id="cb67-13"><a href="anal2comp.html#cb67-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">odds_nega =</span> ((nega<span class="sc">+</span><span class="dv">1</span>)<span class="sc">/</span><span class="fu">sum</span>(nega<span class="sc">+</span><span class="dv">1</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb67-14"><a href="anal2comp.html#cb67-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 승산비에 로그를 취한다.</span></span>
<span id="cb67-15"><a href="anal2comp.html#cb67-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">log_odds_ratio =</span> <span class="fu">log</span>(odds_posi <span class="sc">/</span> odds_nega)) </span></code></pre></div>
<pre><code>## Warning: Expected 2 pieces. Additional pieces discarded in 9 rows [6974, 6975,
## 12084, 14122, 14126, 23822, 31071, 32929, 34114].</code></pre>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="anal2comp.html#cb69-1" aria-hidden="true" tabindex="-1"></a>rate_log_df  <span class="sc">%&gt;%</span> </span>
<span id="cb69-2"><a href="anal2comp.html#cb69-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="at">label  =</span> <span class="fu">ifelse</span>(log_odds_ratio <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="st">&quot;긍정평&quot;</span>, <span class="st">&quot;부정평&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb69-3"><a href="anal2comp.html#cb69-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># 긍정평과 부정평별 각각 상위 10개 </span></span>
<span id="cb69-4"><a href="anal2comp.html#cb69-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(<span class="fu">abs</span>(log_odds_ratio), <span class="at">n =</span> <span class="dv">10</span>) </span></code></pre></div>
<pre><code>## # A tibble: 22 x 7
## # Groups:   label [2]
##    word   nega  posi odds_posi odds_nega log_odds_ratio label 
##    &lt;chr&gt; &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;     &lt;dbl&gt;          &lt;dbl&gt; &lt;chr&gt; 
##  1 굿        0    19   0.00362  0.000167           3.08 긍정평
##  2 밋        0    16   0.00308  0.000167           2.91 긍정평
##  3 ㄷ        0    15   0.00290  0.000167           2.85 긍정평
##  4 삶        0    10   0.00199  0.000167           2.48 긍정평
##  5 마음      0     9   0.00181  0.000167           2.38 긍정평
##  6 최고      8    84   0.0154   0.00150            2.33 긍정평
##  7 명작      2    26   0.00489  0.000501           2.28 긍정평
##  8 만족      0     8   0.00163  0.000167           2.28 긍정평
##  9 감정      0     7   0.00145  0.000167           2.16 긍정평
## 10 행복      0     7   0.00145  0.000167           2.16 긍정평
## # ... with 12 more rows</code></pre>
<p>막대도표로 시각화.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="anal2comp.html#cb71-1" aria-hidden="true" tabindex="-1"></a>rate_log_df <span class="sc">%&gt;%</span> </span>
<span id="cb71-2"><a href="anal2comp.html#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="at">label  =</span> <span class="fu">ifelse</span>(log_odds_ratio <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="st">&quot;긍정평&quot;</span>, <span class="st">&quot;부정평&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb71-3"><a href="anal2comp.html#cb71-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(<span class="fu">abs</span>(log_odds_ratio), <span class="at">n =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb71-4"><a href="anal2comp.html#cb71-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb71-5"><a href="anal2comp.html#cb71-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> log_odds_ratio,</span>
<span id="cb71-6"><a href="anal2comp.html#cb71-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> <span class="fu">reorder</span>(word, log_odds_ratio),</span>
<span id="cb71-7"><a href="anal2comp.html#cb71-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span> label)) <span class="sc">+</span></span>
<span id="cb71-8"><a href="anal2comp.html#cb71-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() </span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/cmp25-1.png" width="672" /></p>
</div>
</div>
<div id="가중로그승산비" class="section level2" number="9.4">
<h2><span class="header-section-number">9.4</span> 가중로그승산비</h2>
<p>로그승산비는 문서 2종에 대한 승산으로 비를 구하므로, 3종 이상의 문서로 구성된 말뭉치에 적용할 수 없는 한계가 있다. tf_idf는 3종 이상의 문서로 구성된 말뭉치에 적용할 수 있지만, tf_idf계산 방식에서 오는 한계가 있다. 모든 문서에 걸쳐 등장하는 단어라 해서 반드시 불용어처럼 문서의 의미파악에 기여하지 못하는 것이 아니기 때문이다.</p>
<p>tf_idf의 한계를 Tyler Schnoebelen이 [Monroe, Colaresi, and Quinn(2008)](Monroe, Colaresi, and Quinn(2008)의 연구를 토대 블로그문서
<a href="https://medium.com/@TSchnoebelen/i-dare-say-you-will-never-use-tf-idf-again-4918408b2310">“I dare say you will never use tf-idf again”</a>을 통해 지적하며, 대안으로 로그승산비에 베이지언 확률모형을 적용한 <a href="https://bookdown.org/Maxine/tidy-text-mining/weighted-log-odds-ratio.html">가중로그승산비(weighted log odds ratio)</a>를 제안했다.</p>
<p>이에 <code>tidytext</code> 개발자인 Julia Silge가 <a href="https://github.com/juliasilge/tidylo"><code>tydylo</code></a>패키지를 개발해 가중로그승산비를 간단하게 계산할 수 있도록 했다. (<a href="https://juliasilge.com/blog/introducing-tidylo/">Silge의 패키지 소개 글</a>)</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="anal2comp.html#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tidylo&quot;</span>)</span></code></pre></div>
<div id="bind_log_oddstbl-set-feature-n-uninformative-false-unweighted-false" class="section level3" number="9.4.1">
<h3><span class="header-section-number">9.4.1</span> <code>bind_log_odds(tbl, set, feature, n, uninformative = FALSE, unweighted = FALSE)</code></h3>
<ul>
<li><p>tbl: 정돈데이터(feature와 set이 하나의 행에 저장).</p></li>
<li><p>set: feature를 비교하기 위한 set(group)에 대한 정보(예: 긍정 vs. 부정)이 저장된 열.</p></li>
<li><p>feature: feature(단어나 바이그램 등의 텍스트자료)가 저장된 열.</p></li>
<li><p>n: feature-set의 빈도를 저장한 열.</p></li>
<li><p>uninformative: uninformative 디리슐레 분포 사용 여부. 기본값은 <code>FALSE</code>.</p></li>
<li><p>unweighted: 비가중 로그승산 사용여부. 기본값은 <code>FALSE</code>. <code>TRUE</code>로 지정하면 비가중 로그승산비(<code>log_odds</code>) 열을 추가한다.</p></li>
</ul>
<p>가중로그승산비를 이용해 네이버영화 댓글 중 긍정평과 부정평에 사용된 단어의 상대빈도를 구해보자.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="anal2comp.html#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidylo)</span></code></pre></div>
<pre><code>## Warning: package &#39;tidylo&#39; was built under R version 4.0.5</code></pre>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="anal2comp.html#cb75-1" aria-hidden="true" tabindex="-1"></a>weighted_log_odds_df <span class="ot">&lt;-</span> </span>
<span id="cb75-2"><a href="anal2comp.html#cb75-2" aria-hidden="true" tabindex="-1"></a>by1000_df <span class="sc">%&gt;%</span> </span>
<span id="cb75-3"><a href="anal2comp.html#cb75-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, document, <span class="at">token =</span> pos) <span class="sc">%&gt;%</span> </span>
<span id="cb75-4"><a href="anal2comp.html#cb75-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(word, <span class="fu">c</span>(<span class="st">&quot;word&quot;</span>, <span class="st">&quot;pos&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb75-5"><a href="anal2comp.html#cb75-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(pos <span class="sc">==</span> <span class="st">&quot;nng&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb75-6"><a href="anal2comp.html#cb75-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;영화&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb75-7"><a href="anal2comp.html#cb75-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word) <span class="sc">%&gt;%</span> </span>
<span id="cb75-8"><a href="anal2comp.html#cb75-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_log_odds</span>(<span class="at">set =</span> label,</span>
<span id="cb75-9"><a href="anal2comp.html#cb75-9" aria-hidden="true" tabindex="-1"></a>                <span class="at">feature =</span> word,</span>
<span id="cb75-10"><a href="anal2comp.html#cb75-10" aria-hidden="true" tabindex="-1"></a>                <span class="at">n =</span> n) <span class="sc">%&gt;%</span> </span>
<span id="cb75-11"><a href="anal2comp.html#cb75-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>log_odds_weighted)</span></code></pre></div>
<pre><code>## Warning: Expected 2 pieces. Additional pieces discarded in 9 rows [6974, 6975,
## 12084, 14122, 14126, 23822, 31071, 32929, 34114].</code></pre>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="anal2comp.html#cb77-1" aria-hidden="true" tabindex="-1"></a>weighted_log_odds_df</span></code></pre></div>
<pre><code>## # A tibble: 2,826 x 4
## # Groups:   label [2]
##    label word      n log_odds_weighted
##    &lt;dbl&gt; &lt;chr&gt; &lt;int&gt;             &lt;dbl&gt;
##  1     1 굿       19              3.25
##  2     0 짜증     24              3.18
##  3     0 최악     24              3.18
##  4     1 최고     84              3.09
##  5     1 밋       16              2.98
##  6     1 ㄷ       15              2.88
##  7     0 돈       19              2.82
##  8     1 삶       10              2.35
##  9     1 감동     58              2.28
## 10     1 마음      9              2.23
## # ... with 2,816 more rows</code></pre>
<p>긍정평과 부정평별 가중로그승산비 상위 10개 추출한다.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="anal2comp.html#cb79-1" aria-hidden="true" tabindex="-1"></a>weighted_log_odds_df <span class="sc">%&gt;%</span>   </span>
<span id="cb79-2"><a href="anal2comp.html#cb79-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="at">label =</span> <span class="fu">ifelse</span>(label <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="st">&quot;긍정평&quot;</span>, <span class="st">&quot;부정평&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb79-3"><a href="anal2comp.html#cb79-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(<span class="fu">abs</span>(log_odds_weighted), <span class="at">n =</span> <span class="dv">10</span>) <span class="co"># 긍정평과 부정평별 각각 상위 10개 </span></span></code></pre></div>
<pre><code>## # A tibble: 20 x 4
## # Groups:   label [2]
##    label  word      n log_odds_weighted
##    &lt;chr&gt;  &lt;chr&gt; &lt;int&gt;             &lt;dbl&gt;
##  1 긍정평 굿       19              3.25
##  2 긍정평 최고     84              3.09
##  3 긍정평 밋       16              2.98
##  4 긍정평 ㄷ       15              2.88
##  5 긍정평 삶       10              2.35
##  6 긍정평 감동     58              2.28
##  7 긍정평 마음      9              2.23
##  8 긍정평 만족      8              2.10
##  9 긍정평 감정      7              1.97
## 10 긍정평 행복      7              1.97
## 11 부정평 최고      8             -3.20
## 12 부정평 짜증     24              3.18
## 13 부정평 최악     24              3.18
## 14 부정평 돈       19              2.82
## 15 부정평 감동     11             -2.34
## 16 부정평 얘기     10              2.05
## 17 부정평 거지      9              1.94
## 18 부정평 낭비      9              1.94
## 19 부정평 다운      8              1.83
## 20 부정평 명작      2             -1.81</code></pre>
<p>막대도표로 시각화한다.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="anal2comp.html#cb81-1" aria-hidden="true" tabindex="-1"></a>weighted_log_odds_df <span class="sc">%&gt;%</span>   </span>
<span id="cb81-2"><a href="anal2comp.html#cb81-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="at">label =</span> <span class="fu">ifelse</span>(label <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="st">&quot;긍정평&quot;</span>, <span class="st">&quot;부정평&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb81-3"><a href="anal2comp.html#cb81-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(<span class="fu">abs</span>(log_odds_weighted), <span class="at">n =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span>  <span class="co"># 긍정평과 부정평별 각각 상위 10개 </span></span>
<span id="cb81-4"><a href="anal2comp.html#cb81-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb81-5"><a href="anal2comp.html#cb81-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> log_odds_weighted,</span>
<span id="cb81-6"><a href="anal2comp.html#cb81-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> <span class="fu">reorder</span>(word, log_odds_weighted),</span>
<span id="cb81-7"><a href="anal2comp.html#cb81-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span> label)) <span class="sc">+</span></span>
<span id="cb81-8"><a href="anal2comp.html#cb81-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> F) <span class="sc">+</span></span>
<span id="cb81-9"><a href="anal2comp.html#cb81-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>label, <span class="at">scale =</span> <span class="st">&quot;free&quot;</span>)</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/cmp29-1.png" width="672" /></p>
<p>부정평으로 분류된 내용 중 ’최고’와 ’감동’이 부정평에 들어 있다. 어떤 문장인지 확인해보자.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="anal2comp.html#cb82-1" aria-hidden="true" tabindex="-1"></a>by1000_df <span class="sc">%&gt;%</span> </span>
<span id="cb82-2"><a href="anal2comp.html#cb82-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, document, <span class="at">token =</span> pos, <span class="at">drop =</span> F) <span class="sc">%&gt;%</span> </span>
<span id="cb82-3"><a href="anal2comp.html#cb82-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(word, <span class="fu">c</span>(<span class="st">&quot;word&quot;</span>, <span class="st">&quot;pos&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb82-4"><a href="anal2comp.html#cb82-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(pos <span class="sc">==</span> <span class="st">&quot;nng&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb82-5"><a href="anal2comp.html#cb82-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;영화&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb82-6"><a href="anal2comp.html#cb82-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(label <span class="sc">==</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb82-7"><a href="anal2comp.html#cb82-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">==</span> <span class="st">&quot;최고&quot;</span> <span class="sc">|</span> word <span class="sc">==</span> <span class="st">&quot;감동&quot;</span>)</span></code></pre></div>
<pre><code>## Warning: Expected 2 pieces. Additional pieces discarded in 9 rows [6974, 6975,
## 12084, 14122, 14126, 23822, 31071, 32929, 34114].</code></pre>
<pre><code>## # A tibble: 19 x 5
## # Groups:   label [1]
##          id document                                           label word  pos  
##       &lt;dbl&gt; &lt;chr&gt;                                              &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;
##  1  5780961 너무뻔한스토리에, 억지로 끼워 맞추려는 감동 설정. 킬링타임 영화에도 아까울정도~     0 감동  nng  
##  2  3529883 유머 없음. 감동 없음.이상한 최악의 엔딩. 브로디 좋아하는 여자들은 좋겠지.~     0 감동  nng  
##  3  8983089 무슨 우주최고 꽃미남은 개뿔ㅋㅋㅋㅋ                    0 최고  nng  
##  4  9207032 난해하지만 최고의 영화.                                0 최고  nng  
##  5    22460 당췌..뭐가 뭔지...그냥 포느노인데 뭐가 최고란건지.. 알바생 티남..~     0 최고  nng  
##  6  4648987 한국판이 최고임                                        0 최고  nng  
##  7  6802371 뭔 생각으로 만든영화 ? 메디슨스퀘어가든 공연 자랑영화네 ㅋㅋ 차라리 SM가수들의 피나는~     0 감동  nng  
##  8  2283681 스토리 구성이 너무 어설프니까 감동 느끼기전에 거부감부터 든다~     0 감동  nng  
##  9  3864986 그냥 아무런것도 느껴지지않는다..후련하지도 감동적이지도않은..~     0 감동  nng  
## 10  8107693 감동적 그자체 영화!.                                   0 감동  nng  
## 11  8564221 당대 최고의 배우들을 총집합 시켜놓고 이렇게 재미없게 만들기도 어렵다. 화면만 좋을 뿐.~     0 최고  nng  
## 12  5993933 최고의 감동이지 아니하지 않을수 잇네                   0 최고  nng  
## 13  5993933 최고의 감동이지 아니하지 않을수 잇네                   0 감동  nng  
## 14 10230440 정말 진부하기 짝이없고 싸구려 영화 딱 홍콩영화이네 미션임파셔불은 1편-&gt;3편-&gt;4편-&gt;~     0 최고  nng  
## 15  9226474 아... 지루함.평점 보고 본건데 걍 별루.마지막 오분이 감동적이고 내내 지루하다ㅡ ㅡ.~     0 감동  nng  
## 16  9049409 평점1점대에 영화이다. 다른사람속이지 말고 솔직한 평점을 남기자. 이건 공짜표가 생겨도 ~     0 최고  nng  
## 17  8606696 그닥 감동적지 않다..너무 미화된.. 차라리 운터강을 봐라..가슴에 와닿는다.~     0 감동  nng  
## 18 10176628 코믹,감동,사랑 모든게 발만 담구고 수건으로 닦지도 않은느낌.. 아담샌들러의 코믹을 좋아~     0 감동  nng  
## 19  5175364 애들 보기에는 나름 감동주는 따뜻한 영화지만 화가 날 정도로 재미없었다~     0 감동  nng</code></pre>
<p>‘억지로 끼워 맞추려는 감동 설정’ ‘감동 없음’ 등 단어 하나만을 토큰으로 사용했을 때의 한계를 잘 보여주는 사례.</p>
<p>’감동적 그자체 영화’를 부정평으로 분류한 것은 라벨링 오류.</p>
</div>
<div id="지표-비교" class="section level3" number="9.4.2">
<h3><span class="header-section-number">9.4.2</span> 지표 비교</h3>
<div id="로그승산비-1" class="section level4" number="9.4.2.1">
<h4><span class="header-section-number">9.4.2.1</span> 로그승산비</h4>
<p>먼저 가중치를 사용하지않은 로그승산비를 구한다.</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="anal2comp.html#cb85-1" aria-hidden="true" tabindex="-1"></a>rate_log_df  <span class="sc">%&gt;%</span> <span class="co"># 승산비에 로그를 취한다.</span></span>
<span id="cb85-2"><a href="anal2comp.html#cb85-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="at">label  =</span> <span class="fu">ifelse</span>(log_odds_ratio <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="st">&quot;긍정평&quot;</span>, <span class="st">&quot;부정평&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb85-3"><a href="anal2comp.html#cb85-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(<span class="fu">abs</span>(log_odds_ratio), <span class="at">n =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span>  <span class="co"># 긍정평과 부정평별 각각 상위 10개 </span></span>
<span id="cb85-4"><a href="anal2comp.html#cb85-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb85-5"><a href="anal2comp.html#cb85-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> log_odds_ratio,</span>
<span id="cb85-6"><a href="anal2comp.html#cb85-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> <span class="fu">reorder</span>(word, log_odds_ratio),</span>
<span id="cb85-7"><a href="anal2comp.html#cb85-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span> label)) <span class="sc">+</span></span>
<span id="cb85-8"><a href="anal2comp.html#cb85-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> F) <span class="sc">+</span></span>
<span id="cb85-9"><a href="anal2comp.html#cb85-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>label, <span class="at">scale =</span> <span class="st">&quot;free&quot;</span>)</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/cmp31-1.png" width="672" /></p>
</div>
<div id="tf_idf-3" class="section level4" number="9.4.2.2">
<h4><span class="header-section-number">9.4.2.2</span> tf_idf</h4>
<p>tf_idf 계산</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="anal2comp.html#cb86-1" aria-hidden="true" tabindex="-1"></a>tf_idf_df <span class="ot">&lt;-</span> </span>
<span id="cb86-2"><a href="anal2comp.html#cb86-2" aria-hidden="true" tabindex="-1"></a>by1000_df <span class="sc">%&gt;%</span> </span>
<span id="cb86-3"><a href="anal2comp.html#cb86-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, document, <span class="at">token =</span> pos) <span class="sc">%&gt;%</span> </span>
<span id="cb86-4"><a href="anal2comp.html#cb86-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(word, <span class="fu">c</span>(<span class="st">&quot;word&quot;</span>, <span class="st">&quot;pos&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb86-5"><a href="anal2comp.html#cb86-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(pos <span class="sc">==</span> <span class="st">&quot;nng&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb86-6"><a href="anal2comp.html#cb86-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;영화&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb86-7"><a href="anal2comp.html#cb86-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word) <span class="sc">%&gt;%</span> </span>
<span id="cb86-8"><a href="anal2comp.html#cb86-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_tf_idf</span>(<span class="at">term =</span> word,</span>
<span id="cb86-9"><a href="anal2comp.html#cb86-9" aria-hidden="true" tabindex="-1"></a>              <span class="at">document =</span> label,</span>
<span id="cb86-10"><a href="anal2comp.html#cb86-10" aria-hidden="true" tabindex="-1"></a>              <span class="at">n =</span> n)</span></code></pre></div>
<pre><code>## Warning: Expected 2 pieces. Additional pieces discarded in 9 rows [6974, 6975,
## 12084, 14122, 14126, 23822, 31071, 32929, 34114].</code></pre>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="anal2comp.html#cb88-1" aria-hidden="true" tabindex="-1"></a>tf_idf_df</span></code></pre></div>
<pre><code>## # A tibble: 2,826 x 6
## # Groups:   label [2]
##    label word      n       tf   idf   tf_idf
##    &lt;dbl&gt; &lt;chr&gt; &lt;int&gt;    &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;
##  1     0 가가      1 0.000271 0.693 0.000188
##  2     0 가관      1 0.000271 0.693 0.000188
##  3     0 가능      1 0.000271 0     0       
##  4     0 가든      1 0.000271 0.693 0.000188
##  5     0 가리      1 0.000271 0.693 0.000188
##  6     0 가문      1 0.000271 0.693 0.000188
##  7     0 가미      1 0.000271 0.693 0.000188
##  8     0 가수      2 0.000542 0.693 0.000376
##  9     0 가슴      5 0.00136  0     0       
## 10     0 가식      1 0.000271 0.693 0.000188
## # ... with 2,816 more rows</code></pre>
<p>긍정평과 부정평별 상위 10개 추출한다.</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="anal2comp.html#cb90-1" aria-hidden="true" tabindex="-1"></a>tf_idf_df <span class="sc">%&gt;%</span> </span>
<span id="cb90-2"><a href="anal2comp.html#cb90-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="at">label =</span> <span class="fu">ifelse</span>(label <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="st">&quot;긍정평&quot;</span>, <span class="st">&quot;부정평&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb90-3"><a href="anal2comp.html#cb90-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(tf_idf, <span class="at">n =</span> <span class="dv">10</span>) <span class="co"># 긍정평과 부정평별 각각 상위 10개 </span></span></code></pre></div>
<pre><code>## # A tibble: 22 x 6
## # Groups:   label [2]
##    label  word      n      tf   idf  tf_idf
##    &lt;chr&gt;  &lt;chr&gt; &lt;int&gt;   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
##  1 긍정평 굿       19 0.00589 0.693 0.00408
##  2 긍정평 밋       16 0.00496 0.693 0.00344
##  3 긍정평 ㄷ       15 0.00465 0.693 0.00322
##  4 긍정평 삶       10 0.00310 0.693 0.00215
##  5 긍정평 마음      9 0.00279 0.693 0.00193
##  6 긍정평 만족      8 0.00248 0.693 0.00172
##  7 긍정평 감정      7 0.00217 0.693 0.00150
##  8 긍정평 행복      7 0.00217 0.693 0.00150
##  9 긍정평 뒤        6 0.00186 0.693 0.00129
## 10 긍정평 만점      6 0.00186 0.693 0.00129
## # ... with 12 more rows</code></pre>
<p>막대도표로 시각화한다.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="anal2comp.html#cb92-1" aria-hidden="true" tabindex="-1"></a>tf_idf_df <span class="sc">%&gt;%</span> </span>
<span id="cb92-2"><a href="anal2comp.html#cb92-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="at">label =</span> <span class="fu">ifelse</span>(label <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="st">&quot;긍정평&quot;</span>, <span class="st">&quot;부정평&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb92-3"><a href="anal2comp.html#cb92-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(tf_idf, <span class="at">n =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span> <span class="co"># 긍정평과 부정평별 각각 상위 10개 </span></span>
<span id="cb92-4"><a href="anal2comp.html#cb92-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb92-5"><a href="anal2comp.html#cb92-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> tf_idf,</span>
<span id="cb92-6"><a href="anal2comp.html#cb92-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> <span class="fu">reorder</span>(word, tf_idf),</span>
<span id="cb92-7"><a href="anal2comp.html#cb92-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span> label)) <span class="sc">+</span></span>
<span id="cb92-8"><a href="anal2comp.html#cb92-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> F) <span class="sc">+</span></span>
<span id="cb92-9"><a href="anal2comp.html#cb92-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>label, <span class="at">scale =</span> <span class="st">&quot;free&quot;</span>)</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/cmp34-1.png" width="672" /></p>
</div>
<div id="비교-2" class="section level4" number="9.4.2.3">
<h4><span class="header-section-number">9.4.2.3</span> 비교</h4>
<p>가중로그승산비, 로그승산비, tf_idf의 값을 비교해보자. 먼저 3개 데이터프레임을 행방향으로 결합해 하나의 데이터프레임으로 저장한다.</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="anal2comp.html#cb93-1" aria-hidden="true" tabindex="-1"></a>wlo_df <span class="ot">&lt;-</span> </span>
<span id="cb93-2"><a href="anal2comp.html#cb93-2" aria-hidden="true" tabindex="-1"></a>weighted_log_odds_df <span class="sc">%&gt;%</span>   </span>
<span id="cb93-3"><a href="anal2comp.html#cb93-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="at">label =</span> <span class="fu">ifelse</span>(label <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="st">&quot;긍정평&quot;</span>, <span class="st">&quot;부정평&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb93-4"><a href="anal2comp.html#cb93-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(<span class="fu">abs</span>(log_odds_weighted), <span class="at">n =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb93-5"><a href="anal2comp.html#cb93-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(label, word, <span class="at">score =</span> log_odds_weighted)</span>
<span id="cb93-6"><a href="anal2comp.html#cb93-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-7"><a href="anal2comp.html#cb93-7" aria-hidden="true" tabindex="-1"></a>rlo_df <span class="ot">&lt;-</span> </span>
<span id="cb93-8"><a href="anal2comp.html#cb93-8" aria-hidden="true" tabindex="-1"></a>rate_log_df  <span class="sc">%&gt;%</span> </span>
<span id="cb93-9"><a href="anal2comp.html#cb93-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="at">label  =</span> <span class="fu">ifelse</span>(log_odds_ratio <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="st">&quot;긍정평&quot;</span>, <span class="st">&quot;부정평&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb93-10"><a href="anal2comp.html#cb93-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(<span class="fu">abs</span>(log_odds_ratio), <span class="at">n =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb93-11"><a href="anal2comp.html#cb93-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(label, word, <span class="at">score =</span> log_odds_ratio) </span>
<span id="cb93-12"><a href="anal2comp.html#cb93-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-13"><a href="anal2comp.html#cb93-13" aria-hidden="true" tabindex="-1"></a>ti_df <span class="ot">&lt;-</span> </span>
<span id="cb93-14"><a href="anal2comp.html#cb93-14" aria-hidden="true" tabindex="-1"></a>tf_idf_df <span class="sc">%&gt;%</span> </span>
<span id="cb93-15"><a href="anal2comp.html#cb93-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="at">label =</span> <span class="fu">ifelse</span>(label <span class="sc">&gt;</span> <span class="dv">0</span>, <span class="st">&quot;긍정평&quot;</span>, <span class="st">&quot;부정평&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb93-16"><a href="anal2comp.html#cb93-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(tf_idf, <span class="at">n =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb93-17"><a href="anal2comp.html#cb93-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(label, word, <span class="at">score =</span> tf_idf) <span class="sc">%&gt;%</span> </span>
<span id="cb93-18"><a href="anal2comp.html#cb93-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">score =</span> score <span class="sc">*</span> <span class="dv">600</span>)</span>
<span id="cb93-19"><a href="anal2comp.html#cb93-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-20"><a href="anal2comp.html#cb93-20" aria-hidden="true" tabindex="-1"></a><span class="fu">bind_rows</span>(wlo_df, rlo_df, ti_df, <span class="at">.id =</span> <span class="st">&quot;ID&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">tail</span>(<span class="dv">20</span>)</span></code></pre></div>
<pre><code>## # A tibble: 20 x 4
## # Groups:   label [2]
##    ID    label  word   score
##    &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;  &lt;dbl&gt;
##  1 3     긍정평 ㄷ     1.93 
##  2 3     긍정평 삶     1.29 
##  3 3     긍정평 마음   1.16 
##  4 3     긍정평 만족   1.03 
##  5 3     긍정평 감정   0.902
##  6 3     긍정평 행복   0.902
##  7 3     긍정평 뒤     0.773
##  8 3     긍정평 만점   0.773
##  9 3     긍정평 아버지 0.773
## 10 3     긍정평 충격   0.773
## 11 3     부정평 짜증   2.70 
## 12 3     부정평 최악   2.70 
## 13 3     부정평 돈     2.14 
## 14 3     부정평 얘기   1.13 
## 15 3     부정평 거지   1.01 
## 16 3     부정평 낭비   1.01 
## 17 3     부정평 다운   0.902
## 18 3     부정평 밖     0.789
## 19 3     부정평 졸작   0.789
## 20 3     부정평 짝     0.789</code></pre>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="anal2comp.html#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">bind_rows</span>(wlo_df, rlo_df, ti_df, <span class="at">.id =</span> <span class="st">&quot;ID&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb95-2"><a href="anal2comp.html#cb95-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ID =</span> <span class="fu">ifelse</span>(ID <span class="sc">==</span> <span class="st">&quot;1&quot;</span>, <span class="st">&quot;1.가중로그승산비&quot;</span>, </span>
<span id="cb95-3"><a href="anal2comp.html#cb95-3" aria-hidden="true" tabindex="-1"></a>                     <span class="fu">ifelse</span>(ID <span class="sc">==</span> <span class="st">&quot;2&quot;</span>, <span class="st">&quot;2.로그승산비&quot;</span>, <span class="st">&quot;3.tf_idf&quot;</span>))</span>
<span id="cb95-4"><a href="anal2comp.html#cb95-4" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">%&gt;%</span> </span>
<span id="cb95-5"><a href="anal2comp.html#cb95-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb95-6"><a href="anal2comp.html#cb95-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> score,</span>
<span id="cb95-7"><a href="anal2comp.html#cb95-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> <span class="fu">reorder</span>(word, score),</span>
<span id="cb95-8"><a href="anal2comp.html#cb95-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span> label)</span>
<span id="cb95-9"><a href="anal2comp.html#cb95-9" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">+</span></span>
<span id="cb95-10"><a href="anal2comp.html#cb95-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> F) <span class="sc">+</span></span>
<span id="cb95-11"><a href="anal2comp.html#cb95-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>( <span class="sc">~</span> label<span class="sc">+</span>ID, <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>, <span class="at">ncol =</span> <span class="dv">3</span>)</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/cmp36-1.png" width="672" /></p>
</div>
</div>
</div>
<div id="연습-8" class="section level2" number="9.5">
<h2><span class="header-section-number">9.5</span> 연습</h2>
<p>’백신’관련 보도의 내용을 빅카인즈의 자료를 이용해 탐색해보자.</p>
<div id="빅카인즈" class="section level3" number="9.5.1">
<h3><span class="header-section-number">9.5.1</span> 빅카인즈</h3>
<p><a href="https://www.bigkinds.or.kr/">빅카인즈</a>는 언론진흥재단이 운영하는 뉴스빅데이터 분석서비스다. 종합일간지, 경제지, 지역일간지, 방송사 등의 기사를 분석할수 인터페이스를 제공한다. 빅카인즈인터페이스를 통해
빅카인즈에서 제공하는 인터페이스으로 뉴스텍스트를 분석할 수 있다. 관계도, 키워드트렌드, 연관어분석 등이 가능하다. 사용자가 직접 분석할 수 있도록 데이터다운로드 서비스도 제공한다. 무료데이터는 일자, 언론사, 기고자, 제목, 분류, 인물, 위치, 본문(200자), 기사ULR 등이 포함돼 있다.</p>
<ul>
<li>데이터다운로도 방법:</li>
</ul>
<ol style="list-style-type: decimal">
<li>빅카인즈 접솝</li>
<li>상단 메뉴의 ‘뉴스분석’ 클릭</li>
<li>‘뉴스분석’ 메뉴가 아래로 펼쳐지면 ‘뉴스·검색 분석’ 클릭.</li>
<li>‘STEP01·뉴스검색’ 창에서 다운로드할 기사의 범위 설정.</li>
<li>‘STEP03·분석결과 및 시각화’를 클릭하면 ’데이터다운로드’ 메뉴가 나온다.</li>
<li>오른쪽 하단의 ‘엑셀다운로드’ 클릭.</li>
</ol>
<div id="백신관련-보도-수집" class="section level4" number="9.5.1.1">
<h4><span class="header-section-number">9.5.1.1</span> 백신관련 보도 수집</h4>
<p>모든 기사를 분석하기 위해서는 시간이 많이 걸리므로, 데이터셋의 크기를 줄이기 위해, 분석 대상을 2021년 2월 한달간 ‘경향신문’ ‘한겨레’ ‘문화일보’ ‘조선일보’ 등 4개 일간지에서 보도된 내용에 국한하자.</p>
<p><code>4. 'STEP01·뉴스검색'</code> 창에서 다운로드할 기사의 범위 설정</p>
<ul>
<li>검색어: ‘백신’</li>
<li>기간: 2021년 2월 1일 ~ 2월 28일</li>
<li>통합분류: ‘사회,’ ‘IT_과학’</li>
<li>언론사: ‘경향신문’ ‘한겨레’ ‘문화일보’ ‘조선일보’ 선택</li>
</ul>
<p>작업디렉토리 아래 <code>data</code>폴더에 다운로드 받는다.</p>
<p>파일명을 확인한다. <code>NewsResult_20210201-20210228.xlsx</code>다.</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="anal2comp.html#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="fu">list.files</span>(<span class="st">&quot;data/.&quot;</span>)</span></code></pre></div>
<p><code>readxl</code>패키지의 <code>read_excel()</code>함수로 해당 파일을 R환경으로 이입한다.</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="anal2comp.html#cb97-1" aria-hidden="true" tabindex="-1"></a>readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="st">&quot;data/NewsResult_20210201-20210228.xlsx&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">glimpse</span>()</span></code></pre></div>
<p>분석에 활용할 열만 추출해 <code>vac_df</code>에 할당한다.</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="anal2comp.html#cb98-1" aria-hidden="true" tabindex="-1"></a>vac_df <span class="ot">&lt;-</span> </span>
<span id="cb98-2"><a href="anal2comp.html#cb98-2" aria-hidden="true" tabindex="-1"></a>  readxl<span class="sc">::</span><span class="fu">read_excel</span>(<span class="st">&quot;data/NewsResult_20210201-20210228.xlsx&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb98-3"><a href="anal2comp.html#cb98-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(제목, 언론사, 본문, URL)</span>
<span id="cb98-4"><a href="anal2comp.html#cb98-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-5"><a href="anal2comp.html#cb98-5" aria-hidden="true" tabindex="-1"></a>vac_df <span class="sc">%&gt;%</span> <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 602
## Columns: 4
## $ 제목   &lt;chr&gt; &quot;백신 접종 3일째 ‘큰 탈’ 없어 곳곳서 방역 해이 ‘찬물’ 우려&quot;, &quot;[여적]K주사기의 힘&quot;, &quot;독일, \&quot;...
## $ 언론사 &lt;chr&gt; &quot;경향신문&quot;, &quot;경향신문&quot;, &quot;경향신문&quot;, &quot;경향신문&quot;, &quot;문화일보&quot;, &quot;조선일보&quot;, &quot;문화일보&quot;, &quot;조선일보&quot;,...
## $ 본문   &lt;chr&gt; &quot;이틀간 2만322명에 접종 마쳐 중증 이상반응 없이 ‘순조’\n서울 원룸 모임 관련 14명 확진 등 방역 소홀...
## $ URL    &lt;chr&gt; &quot;http://news.khan.co.kr/kh_news/khan_art_view.html?artid=202...</code></pre>
</div>
</div>
<div id="정제-1" class="section level3" number="9.5.2">
<h3><span class="header-section-number">9.5.2</span> 정제</h3>
<p>먼저 <code>drop_na()</code>함수로 결측값을 제거하고, 토큰화한 다음, <code>pos</code>함수로 일반명사만 추출해, <code>vac_tk</code>로 저장한다.</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="anal2comp.html#cb100-1" aria-hidden="true" tabindex="-1"></a>vac_tk <span class="ot">&lt;-</span> </span>
<span id="cb100-2"><a href="anal2comp.html#cb100-2" aria-hidden="true" tabindex="-1"></a>vac_df <span class="sc">%&gt;%</span> </span>
<span id="cb100-3"><a href="anal2comp.html#cb100-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb100-4"><a href="anal2comp.html#cb100-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, 제목, <span class="at">token =</span> pos) <span class="sc">%&gt;%</span> </span>
<span id="cb100-5"><a href="anal2comp.html#cb100-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(word, <span class="fu">c</span>(<span class="st">&quot;word&quot;</span>, <span class="st">&quot;pos&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb100-6"><a href="anal2comp.html#cb100-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(pos <span class="sc">==</span> <span class="st">&#39;nng&#39;</span>)</span></code></pre></div>
<pre><code>## Warning: Expected 2 pieces. Additional pieces discarded in 1 rows [2630].</code></pre>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="anal2comp.html#cb102-1" aria-hidden="true" tabindex="-1"></a>vac_tk</span></code></pre></div>
<pre><code>## # A tibble: 3,570 x 5
##    언론사  본문                         URL                          word  pos  
##    &lt;chr&gt;   &lt;chr&gt;                        &lt;chr&gt;                        &lt;chr&gt; &lt;chr&gt;
##  1 경향신문~ &quot;이틀간 2만322명에 접종 마쳐 중증 이상반응 ~ http://news.khan.co.kr/kh_n~ 백신  nng  
##  2 경향신문~ &quot;이틀간 2만322명에 접종 마쳐 중증 이상반응 ~ http://news.khan.co.kr/kh_n~ 접종  nng  
##  3 경향신문~ &quot;이틀간 2만322명에 접종 마쳐 중증 이상반응 ~ http://news.khan.co.kr/kh_n~ 탈    nng  
##  4 경향신문~ &quot;이틀간 2만322명에 접종 마쳐 중증 이상반응 ~ http://news.khan.co.kr/kh_n~ 곳곳  nng  
##  5 경향신문~ &quot;이틀간 2만322명에 접종 마쳐 중증 이상반응 ~ http://news.khan.co.kr/kh_n~ 방역  nng  
##  6 경향신문~ &quot;이틀간 2만322명에 접종 마쳐 중증 이상반응 ~ http://news.khan.co.kr/kh_n~ 해이  nng  
##  7 경향신문~ &quot;이틀간 2만322명에 접종 마쳐 중증 이상반응 ~ http://news.khan.co.kr/kh_n~ 찬물  nng  
##  8 경향신문~ &quot;이틀간 2만322명에 접종 마쳐 중증 이상반응 ~ http://news.khan.co.kr/kh_n~ 우려  nng  
##  9 경향신문~ &quot;의약품을 인체에 주입할 때 사용하는 의료기기가 ~ http://news.khan.co.kr/kh_n~ 여적  nng  
## 10 경향신문~ &quot;의약품을 인체에 주입할 때 사용하는 의료기기가 ~ http://news.khan.co.kr/kh_n~ 주사기~ nng  
## # ... with 3,560 more rows</code></pre>
</div>
<div id="분석-및-소통-1" class="section level3" number="9.5.3">
<h3><span class="header-section-number">9.5.3</span> 분석 및 소통</h3>
<p>총빈도, 감정어빈도, tf_idf, 로그승산비, 가중로그승산비 등 다양한 분석 방법을 배웠다. 총빈도와 가중로그승산비를 구해 언론사별 어떤 차이가 있는지 살펴보자. (분석 결과를 해석할 때는 2021년 2월 한달 기간에 국한한 자료를 이용한 점에 주의해야 한다.)</p>
<div id="언론사별-총빈도" class="section level4" number="9.5.3.1">
<h4><span class="header-section-number">9.5.3.1</span> 언론사별 총빈도</h4>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="anal2comp.html#cb104-1" aria-hidden="true" tabindex="-1"></a>vac_tk <span class="sc">%&gt;%</span> </span>
<span id="cb104-2"><a href="anal2comp.html#cb104-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(언론사, word, <span class="at">sort =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb104-3"><a href="anal2comp.html#cb104-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;경향&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb104-4"><a href="anal2comp.html#cb104-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;포토&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb104-5"><a href="anal2comp.html#cb104-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;문화&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb104-6"><a href="anal2comp.html#cb104-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;조선&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb104-7"><a href="anal2comp.html#cb104-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;한겨레&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb104-8"><a href="anal2comp.html#cb104-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;백신&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb104-9"><a href="anal2comp.html#cb104-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;접종&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb104-10"><a href="anal2comp.html#cb104-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(언론사) <span class="sc">%&gt;%</span> </span>
<span id="cb104-11"><a href="anal2comp.html#cb104-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(n, <span class="at">n =</span> <span class="dv">7</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb104-12"><a href="anal2comp.html#cb104-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb104-13"><a href="anal2comp.html#cb104-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> n,</span>
<span id="cb104-14"><a href="anal2comp.html#cb104-14" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> <span class="fu">reorder</span>(word, n),</span>
<span id="cb104-15"><a href="anal2comp.html#cb104-15" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span> 언론사)</span>
<span id="cb104-16"><a href="anal2comp.html#cb104-16" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">+</span></span>
<span id="cb104-17"><a href="anal2comp.html#cb104-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> F) <span class="sc">+</span></span>
<span id="cb104-18"><a href="anal2comp.html#cb104-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>( <span class="sc">~</span> 언론사, <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>)</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/cmp41-1.png" width="672" /></p>
<p>주요 단어가 사용된 내용(제목)을 살펴보자.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="anal2comp.html#cb105-1" aria-hidden="true" tabindex="-1"></a>vac_df <span class="sc">%&gt;%</span> </span>
<span id="cb105-2"><a href="anal2comp.html#cb105-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb105-3"><a href="anal2comp.html#cb105-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, 제목, <span class="at">token =</span> pos, <span class="at">drop =</span> F) <span class="sc">%&gt;%</span> </span>
<span id="cb105-4"><a href="anal2comp.html#cb105-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(word, <span class="fu">c</span>(<span class="st">&quot;word&quot;</span>, <span class="st">&quot;pos&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb105-5"><a href="anal2comp.html#cb105-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(pos <span class="sc">==</span> <span class="st">&#39;nng&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb105-6"><a href="anal2comp.html#cb105-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">==</span> <span class="st">&quot;카&quot;</span>) <span class="sc">%&gt;%</span> .<span class="sc">$</span>제목</span></code></pre></div>
<pre><code>## Warning: Expected 2 pieces. Additional pieces discarded in 1 rows [2630].</code></pre>
<pre><code>##  [1] &quot;“독일, 65세 이상 아스트라제네카 백신 접종 곧 허가할 듯”&quot;                            
##  [2] &quot;대통령은 아스트라제네카, 총리는 화이자 백신 접종 참관&quot;                                
##  [3] &quot;접종 D-1  정세균 총리 “아스트라제네카 백신 의구심 근거 없어”&quot;                       
##  [4] &quot;인천시, 26일부터 아스트라제네카 백신 접종 시작&quot;                                       
##  [5] &quot;아스트라제네카 26일 화이자 27일 접종 시작&quot;                                            
##  [6] &quot;‘스푸트니크-아스트라제네카 결합, 접종 기간 단축’&quot;                                   
##  [7] &quot;아스트라제네카 백신 접종 &#39;동의한다&#39; 93.8%&quot;                                            
##  [8] &quot;아스트라제네카 백신 국가출하승인 화이자는 3월초 허가 전망&quot;                            
##  [9] &quot;호주, 아스트라제네카 백신 승인 “65세 이상도 사용 가능”&quot;                             
## [10] &quot;WHO, 아스트라제네카 백신 승인&quot;                                                        
## [11] &quot;[2 3월 백신접종]정부 \&quot;아스트라제네카 백신 만 65세 이상 접종 보류\&quot;&quot;                  
## [12] &quot;아스트라제네카, 65살 이상 고령자 접종 연기 3월말 이후 결정&quot;                           
## [13] &quot;아스트라제네카, 유럽 주요국도 65세 이상에겐 접종 제한&quot;                                
## [14] &quot;아스트라제네카 백신 고령 접종여부 오늘 발표&quot;                                          
## [15] &quot;아스트라제네카(AZ) 백신 고령층 접종 금지한 스웨덴도 \&quot;AZ 밖에 없으면 당연히 맞혀야\&quot;&quot; 
## [16] &quot;WHO 자문단 “아스트라제네카 백신, 65세 이상에게도 권고”&quot;                             
## [17] &quot;아스트라제네카 백신 ‘만 65세 이상도 맞나’...16일 발표&quot;                              
## [18] &quot;아스트라제네카 ‘모든 연령층 접종’ 허가 ‘65살 이상’은 의사가 판단&quot;                 
## [19] &quot;아스트라제네카 백신, 만 65세 고령층에도 접종 허가  식약처 \&quot;현장에서 의사가 판단\&quot;&quot;   
## [20] &quot;아스트라제네카 백신 허가... 만 65세 이상 접종여부는 ‘불투명&#39;&quot;                        
## [21] &quot;식약처, 아스트라제네카 백신 사용 허가 65살 이상도 포함&quot;                               
## [22] &quot;질병청 ”아스트라제네카 백신 26일부터 접종 시작”&quot;                                    
## [23] &quot;26일 아스트라제네카 백신 접종 시작 요양병원 시설 먼저&quot;                                
## [24] &quot;“아스트라제네카 백신 75만명분, 24일부터 받아 곧바로 접종”&quot;                          
## [25] &quot;남아공, 아스트라제네카 백신 접종 보류 변이 바이러스에 효과 낮아&quot;                      
## [26] &quot;스위스 이어 남아공도 아스트라제네카 백신 접종 보류&quot;                                   
## [27] &quot;“아스트라제네카 백신, 노인 접종에 신중해야”&quot;                                        
## [28] &quot;식약처 “아스트라제네카 만 65세 접종 신중” 질병청에 공 넘겨&quot;                         
## [29] &quot;노인에 대한 아스트라제네카 백신 투여, 최종 결정은 질병청에 넘겨&quot;                      
## [30] &quot;식약처 “아스트라제네카, 65살 이상 접종 신중하게”&quot;                                   
## [31] &quot;불투명해진 아스트라제네카 백신 고령층 접종  중앙약심위 \&quot;만 65세 이상 접종 신중해야\&quot;&quot;
## [32] &quot;아스트라제네카 고령층 접종 제한하는 유럽 스위스는 “승인 보류”&quot;                      
## [33] &quot;아스트라제네카 고령층 백신 효과 두고 유럽 시끌, 스위스는 승인 보류&quot;                   
## [34] &quot;아스트라제네카 백신 논란 지속 스위스, 승인 보류&quot;                                      
## [35] &quot;스위스, 아스트라제네카 백신 승인 거부&quot;                                                
## [36] &quot;유럽 7개국, 아스트라제네카 고령자 접종 제한 우리나라는?&quot;                              
## [37] &quot;프랑스, 스웨덴도 아스트라제네카 백신 65세 미만에만 접종 권고&quot;                         
## [38] &quot;[만물상] 말 많고 탈 많은 아스트라제네카&quot;                                              
## [39] &quot;아스트라제네카 접종, 65세 이상 고령층 포함 가능성 커졌다&quot;                             
## [40] &quot;아스트라제네카 백신 ‘무용론’ 딛고 65세 이상도 접종할 듯&quot;                            
## [41] &quot;[속보] 아스트라제네카 백신 예방효과 62% “고령층 접종 배제할 필요 없다”&quot;             
## [42] &quot;“아스트라제네카, 고령층 투여 배제할 수 없어” 1차 자문 결과&quot;                         
## [43] &quot;아스트라제네카, 조건부로 허용되나?&quot;</code></pre>
<p>’카’의 빈도가 높았던 이유는 ’아스트라제네카’를 형태소분석기가 하나의 일반명사로 추출하지 않았기 때문이다.</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="anal2comp.html#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="fu">enc2utf8</span>(<span class="st">&quot;아스트라제네카 ‘모든 연령층 접종’ 허가 ‘65살 이상’은 의사가 판단&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">pos</span>()</span></code></pre></div>
<pre><code>## $`아스트라제네카 ‘모든 연령층 접종’ 허가 ‘65살 이상’은 의사가 판단`
##  [1] &quot;아스트라/NNP&quot; &quot;제/NP&quot;        &quot;네/XSN&quot;       &quot;카/NNG&quot;       &quot;‘/SY&quot;       
##  [6] &quot;모든/MM&quot;      &quot;연령층/NNG&quot;   &quot;접종/NNG&quot;     &quot;’/SY&quot;        &quot;허가/NNG&quot;    
## [11] &quot;‘/SY&quot;        &quot;65/SN&quot;        &quot;살/NNBC&quot;      &quot;이상/NNG&quot;     &quot;’/SY&quot;       
## [16] &quot;은/JX&quot;        &quot;의사/NNG&quot;     &quot;가/JKS&quot;       &quot;판단/NNG&quot;</code></pre>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="anal2comp.html#cb110-1" aria-hidden="true" tabindex="-1"></a>vac_df <span class="sc">%&gt;%</span> </span>
<span id="cb110-2"><a href="anal2comp.html#cb110-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb110-3"><a href="anal2comp.html#cb110-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, 제목, <span class="at">token =</span> pos, <span class="at">drop =</span> F) <span class="sc">%&gt;%</span> </span>
<span id="cb110-4"><a href="anal2comp.html#cb110-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(word, <span class="fu">c</span>(<span class="st">&quot;word&quot;</span>, <span class="st">&quot;pos&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb110-5"><a href="anal2comp.html#cb110-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(pos <span class="sc">==</span> <span class="st">&#39;nng&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb110-6"><a href="anal2comp.html#cb110-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">==</span> <span class="st">&quot;이상&quot;</span>) <span class="sc">%&gt;%</span> .<span class="sc">$</span>제목</span></code></pre></div>
<pre><code>## Warning: Expected 2 pieces. Additional pieces discarded in 1 rows [2630].</code></pre>
<pre><code>##  [1] &quot;독일, \&quot;65세 이상 AZ백신 접종 검토\&quot;&quot;                                                 
##  [2] &quot;27일 백신 이상반응 97건 두통 발열 등 모두 경증&quot;                                       
##  [3] &quot;“독일, 65세 이상 아스트라제네카 백신 접종 곧 허가할 듯”&quot;                            
##  [4] &quot;[속보] 코로나 백신접종 첫날 이상반응 15건 두통 발열 구토 등 경증&quot;                     
##  [5] &quot;백신 맞은 인천 간호사 2명도 이상증세... 숨차고 혈압 올라 병원행&quot;                      
##  [6] &quot;포항서 아스트라 첫 이상증세 고혈압 어지럼증에 응급실 이송&quot;                            
##  [7] &quot;백신 맞았다면 최소 15분이상 대기 ‘이상반응’ 관찰해야&quot;                               
##  [8] &quot;백신 맞았다면 최소 15분이상 대기 ‘이상반응’ 관찰해야&quot;                               
##  [9] &quot;중앙약심 “화이자 백신, 16세 이상 대상으로 접종 허가 타당”&quot;                          
## [10] &quot;2차 자문에서도 화이자 백신 \&quot;예방효과 안전성 충분... 16세 이상 허가 권고\&quot;&quot;           
## [11] &quot;서울 65세 이상 성인은 4월이후 코로나 백신 맞는다&quot;                                     
## [12] &quot;시민 10명 중 7명 \&quot;금고형 이상 범죄, 의사면허 취소 찬성\&quot;&quot;                            
## [13] &quot;“아스트라, 65세 이상도 입원 위험 80% 감소”&quot;                                         
## [14] &quot;정 총리 “65세 이상 고령층에 화이자 백신 먼저 접종 가능성”&quot;                          
## [15] &quot;식약처 “화이자 백신 16살 이상 사용 타당”&quot;                                           
## [16] &quot;식약처 전문가 검증 자문단 “화이자 백신, 16살 이상 사용 허가 타당”&quot;                  
## [17] &quot;식약처 자문단 “화이자 백신, 예방 효과 충분 16세 이상 접종도 타당”&quot;                  
## [18] &quot;“화이자 백신 예방효과 충분  16세 이상 허가 타당”&quot;                                   
## [19] &quot;졸업사진 찍을땐 5명 이상도 가능&quot;                                                      
## [20] &quot;호주, 아스트라제네카 백신 승인 “65세 이상도 사용 가능”&quot;                             
## [21] &quot;65세 이상, 아스트라 백신 접종 연기&quot;                                                   
## [22] &quot;아스트라 백신 접종, 65살 이상 일단 보류 3월말께 재결정&quot;                               
## [23] &quot;[2 3월 백신접종]정부 \&quot;아스트라제네카 백신 만 65세 이상 접종 보류\&quot;&quot;                  
## [24] &quot;정은경 “65세 이상 접종 미루게 돼 안타까워”&quot;                                         
## [25] &quot;아스트라제네카, 65살 이상 고령자 접종 연기 3월말 이후 결정&quot;                           
## [26] &quot;아스트라제네카, 유럽 주요국도 65세 이상에겐 접종 제한&quot;                                
## [27] &quot;AZ백신 ‘65세이상 접종’ 일단 후순위로&quot;                                               
## [28] &quot;백신접종 계획 내일 발표 65세 이상도 아스트라 맞나&quot;                                    
## [29] &quot;수도권 영업 오후10시까지, 5인 이상 모임 금지는 유지&quot;                                  
## [30] &quot;WHO 자문단 “아스트라제네카 백신, 65세 이상에게도 권고”&quot;                             
## [31] &quot;아스트라제네카 백신 ‘만 65세 이상도 맞나’...16일 발표&quot;                              
## [32] &quot;아스트라제네카 ‘모든 연령층 접종’ 허가 ‘65살 이상’은 의사가 판단&quot;                 
## [33] &quot;아스트라제네카 백신 허가... 만 65세 이상 접종여부는 ‘불투명&#39;&quot;                        
## [34] &quot;식약처, 아스트라제네카 백신 사용 허가 65살 이상도 포함&quot;                               
## [35] &quot;65세 이상 고령층 대신 경찰 군인부터 백신 접종순위 바뀔 가능성&quot;                        
## [36] &quot;식약처 “아스트라제네카, 65살 이상 접종 신중하게”&quot;                                   
## [37] &quot;불투명해진 아스트라제네카 백신 고령층 접종  중앙약심위 \&quot;만 65세 이상 접종 신중해야\&quot;&quot;
## [38] &quot;아스트라 백신 65세이상 접종 결정보류 일정 차질 불가피&quot;                                
## [39] &quot;식약처 자문단 “화이자 백신, 만 16세 이상도 접종 타당”&quot;                              
## [40] &quot;아스트라제네카 접종, 65세 이상 고령층 포함 가능성 커졌다&quot;                             
## [41] &quot;의협회장 “만65세이상은 아스트라 백신 안돼, 화이자 모더나 접종을”&quot;                   
## [42] &quot;아스트라제네카 백신 ‘무용론’ 딛고 65세 이상도 접종할 듯&quot;                            
## [43] &quot;식약처 자문단, 아스트라 65세 이상 접종 결론 못내...다수 의견은 “가능”&quot;              
## [44] &quot;단속 힘들고 불편만 ‘5인 이상 가족모임 금지’ 유지 논란&quot;                              
## [45] &quot;[사이언스카페] 코로나 백신 2회중 1회만 맞아도 감염 전염력 60% 이상 떨어뜨려&quot;          
## [46] &quot;설 차례, 직계가족이라도 주소 다르면 5인이상 금지&quot;</code></pre>
</div>
<div id="언론사별-가중로그승산비" class="section level4" number="9.5.3.2">
<h4><span class="header-section-number">9.5.3.2</span> 언론사별 가중로그승산비</h4>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="anal2comp.html#cb113-1" aria-hidden="true" tabindex="-1"></a>vac_tk <span class="sc">%&gt;%</span> </span>
<span id="cb113-2"><a href="anal2comp.html#cb113-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(언론사, word) <span class="sc">%&gt;%</span> </span>
<span id="cb113-3"><a href="anal2comp.html#cb113-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;경향&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb113-4"><a href="anal2comp.html#cb113-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;포토&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb113-5"><a href="anal2comp.html#cb113-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;문화&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb113-6"><a href="anal2comp.html#cb113-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;조선&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb113-7"><a href="anal2comp.html#cb113-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;한겨레&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb113-8"><a href="anal2comp.html#cb113-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;백신&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb113-9"><a href="anal2comp.html#cb113-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;접종&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb113-10"><a href="anal2comp.html#cb113-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_log_odds</span>(<span class="at">set =</span> 언론사,</span>
<span id="cb113-11"><a href="anal2comp.html#cb113-11" aria-hidden="true" tabindex="-1"></a>                <span class="at">feature =</span> word,</span>
<span id="cb113-12"><a href="anal2comp.html#cb113-12" aria-hidden="true" tabindex="-1"></a>                <span class="at">n =</span> n) <span class="sc">%&gt;%</span> </span>
<span id="cb113-13"><a href="anal2comp.html#cb113-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(언론사) <span class="sc">%&gt;%</span> </span>
<span id="cb113-14"><a href="anal2comp.html#cb113-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(<span class="fu">abs</span>(log_odds_weighted), <span class="at">n =</span> <span class="dv">7</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb113-15"><a href="anal2comp.html#cb113-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb113-16"><a href="anal2comp.html#cb113-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> log_odds_weighted,</span>
<span id="cb113-17"><a href="anal2comp.html#cb113-17" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> <span class="fu">reorder</span>(word, log_odds_weighted),</span>
<span id="cb113-18"><a href="anal2comp.html#cb113-18" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span> 언론사)</span>
<span id="cb113-19"><a href="anal2comp.html#cb113-19" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">+</span></span>
<span id="cb113-20"><a href="anal2comp.html#cb113-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> F) <span class="sc">+</span></span>
<span id="cb113-21"><a href="anal2comp.html#cb113-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>( <span class="sc">~</span> 언론사, <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>)</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/cmp45-1.png" width="672" /></p>
<p>주요 단어가 사용된 내용(제목)을 살펴보자.</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="anal2comp.html#cb114-1" aria-hidden="true" tabindex="-1"></a>vac_df <span class="sc">%&gt;%</span> </span>
<span id="cb114-2"><a href="anal2comp.html#cb114-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb114-3"><a href="anal2comp.html#cb114-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, 제목, <span class="at">token =</span> pos, <span class="at">drop =</span> F) <span class="sc">%&gt;%</span> </span>
<span id="cb114-4"><a href="anal2comp.html#cb114-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(word, <span class="fu">c</span>(<span class="st">&quot;word&quot;</span>, <span class="st">&quot;pos&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb114-5"><a href="anal2comp.html#cb114-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(pos <span class="sc">==</span> <span class="st">&#39;nng&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb114-6"><a href="anal2comp.html#cb114-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(언론사 <span class="sc">==</span> <span class="st">&quot;경향신문&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb114-7"><a href="anal2comp.html#cb114-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">==</span> <span class="st">&quot;현장&quot;</span>) <span class="sc">%&gt;%</span> .<span class="sc">$</span>제목</span></code></pre></div>
<pre><code>## Warning: Expected 2 pieces. Additional pieces discarded in 1 rows [2630].</code></pre>
<pre><code>## [1] &quot;문 대통령, 접종 현장 방문 후 “일상 회복 머지않았다”&quot;                             
## [2] &quot;&#39;긴장 탓 울렁&#39; 했지만 \&quot;백신 접종 기쁠 뿐\&quot;  첫 날 백신접종 현장은&quot;                
## [3] &quot;국내 첫 백신 접종 시작 문 대통령 접종 현장 참관&quot;                                   
## [4] &quot;아스트라제네카 백신, 만 65세 고령층에도 접종 허가  식약처 \&quot;현장에서 의사가 판단\&quot;&quot;
## [5] &quot;[오늘은 이런 경향] 2월 9일 정 총리 답신 한달 지냈지만...현장 간호사들은...&quot;</code></pre>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="anal2comp.html#cb117-1" aria-hidden="true" tabindex="-1"></a>vac_df <span class="sc">%&gt;%</span> </span>
<span id="cb117-2"><a href="anal2comp.html#cb117-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb117-3"><a href="anal2comp.html#cb117-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, 제목, <span class="at">token =</span> pos, <span class="at">drop =</span> F) <span class="sc">%&gt;%</span> </span>
<span id="cb117-4"><a href="anal2comp.html#cb117-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(word, <span class="fu">c</span>(<span class="st">&quot;word&quot;</span>, <span class="st">&quot;pos&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb117-5"><a href="anal2comp.html#cb117-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(pos <span class="sc">==</span> <span class="st">&#39;nng&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb117-6"><a href="anal2comp.html#cb117-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(언론사 <span class="sc">==</span> <span class="st">&quot;문화일보&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb117-7"><a href="anal2comp.html#cb117-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">==</span> <span class="st">&quot;확정&quot;</span>) <span class="sc">%&gt;%</span> .<span class="sc">$</span>제목</span></code></pre></div>
<pre><code>## Warning: Expected 2 pieces. Additional pieces discarded in 1 rows [2630].</code></pre>
<pre><code>## [1] &quot;백신 접종 D-7 명단 확정 65세미만 27만명으로 줄어&quot;       
## [2] &quot;국내 1호 AZ백신 첫 접종 대상은 누구? 19일까지 명단 확정&quot;</code></pre>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="anal2comp.html#cb120-1" aria-hidden="true" tabindex="-1"></a>vac_df <span class="sc">%&gt;%</span> </span>
<span id="cb120-2"><a href="anal2comp.html#cb120-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb120-3"><a href="anal2comp.html#cb120-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, 제목, <span class="at">token =</span> pos, <span class="at">drop =</span> F) <span class="sc">%&gt;%</span> </span>
<span id="cb120-4"><a href="anal2comp.html#cb120-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(word, <span class="fu">c</span>(<span class="st">&quot;word&quot;</span>, <span class="st">&quot;pos&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb120-5"><a href="anal2comp.html#cb120-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(pos <span class="sc">==</span> <span class="st">&#39;nng&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb120-6"><a href="anal2comp.html#cb120-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(언론사 <span class="sc">==</span> <span class="st">&quot;조선일보&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb120-7"><a href="anal2comp.html#cb120-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">==</span> <span class="st">&quot;국민&quot;</span>) <span class="sc">%&gt;%</span> .<span class="sc">$</span>제목</span></code></pre></div>
<pre><code>## Warning: Expected 2 pieces. Additional pieces discarded in 1 rows [2630].</code></pre>
<pre><code>## [1] &quot;文 “백신 관리 접종 과정, 국민 신뢰 주기에 충분”&quot;                    
## [2] &quot;국민 열에 일곱은 “코로나 백신 접종할 것”&quot;                           
## [3] &quot;백신 불안감 여전 국민 30% “안 맞거나 미룰래요”&quot;                     
## [4] &quot;국민 41%가 백신 맞았다, 이스라엘 제치고 세계 1위된 이 나라&quot;           
## [5] &quot;“과학자 입 막으면 국민 건강권 침해” 기자협회 과학기자협회 공동 발표&quot;</code></pre>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="anal2comp.html#cb123-1" aria-hidden="true" tabindex="-1"></a>vac_df <span class="sc">%&gt;%</span> </span>
<span id="cb123-2"><a href="anal2comp.html#cb123-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb123-3"><a href="anal2comp.html#cb123-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, 제목, <span class="at">token =</span> pos, <span class="at">drop =</span> F) <span class="sc">%&gt;%</span> </span>
<span id="cb123-4"><a href="anal2comp.html#cb123-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(word, <span class="fu">c</span>(<span class="st">&quot;word&quot;</span>, <span class="st">&quot;pos&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb123-5"><a href="anal2comp.html#cb123-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(pos <span class="sc">==</span> <span class="st">&#39;nng&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb123-6"><a href="anal2comp.html#cb123-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(언론사 <span class="sc">==</span> <span class="st">&quot;한겨레&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb123-7"><a href="anal2comp.html#cb123-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">==</span> <span class="st">&quot;뒤&quot;</span>) <span class="sc">%&gt;%</span> .<span class="sc">$</span>제목</span></code></pre></div>
<pre><code>## Warning: Expected 2 pieces. Additional pieces discarded in 1 rows [2630].</code></pre>
<pre><code>## [1] &quot;백신 ‘1호 접종’은 야간근무 뒤 일찍 온 요양보호사&quot;            
## [2] &quot;통합관제센터서 “온도 벗어났다” 제주행 백신 전량 회수 뒤 교체&quot;
## [3] &quot;백신접종 뒤 입원 위험, 아스트라가 화이자보다 낮았다&quot;           
## [4] &quot;예진 통과하면 간호사 4명 배치된 주사실로 접종 뒤 15~30분 관찰&quot;</code></pre>
</div>
</div>
<div id="총빈도와-상대빈도-비교" class="section level3" number="9.5.4">
<h3><span class="header-section-number">9.5.4</span> 총빈도와 상대빈도 비교</h3>
<p>언론사별로 각 기사에서 사용된 단어의 총빈도와 상대빈도를 비교하자.</p>
<p>먼저 총빈도를 구한다.</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="anal2comp.html#cb126-1" aria-hidden="true" tabindex="-1"></a>total_fq <span class="ot">&lt;-</span> </span>
<span id="cb126-2"><a href="anal2comp.html#cb126-2" aria-hidden="true" tabindex="-1"></a>vac_tk <span class="sc">%&gt;%</span> </span>
<span id="cb126-3"><a href="anal2comp.html#cb126-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(언론사, word, <span class="at">sort =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb126-4"><a href="anal2comp.html#cb126-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;경향&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb126-5"><a href="anal2comp.html#cb126-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;포토&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb126-6"><a href="anal2comp.html#cb126-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;문화&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb126-7"><a href="anal2comp.html#cb126-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;조선&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb126-8"><a href="anal2comp.html#cb126-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;한겨레&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb126-9"><a href="anal2comp.html#cb126-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;백신&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb126-10"><a href="anal2comp.html#cb126-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;접종&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb126-11"><a href="anal2comp.html#cb126-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(언론사) <span class="sc">%&gt;%</span> </span>
<span id="cb126-12"><a href="anal2comp.html#cb126-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(n, <span class="at">n =</span> <span class="dv">7</span>) </span>
<span id="cb126-13"><a href="anal2comp.html#cb126-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-14"><a href="anal2comp.html#cb126-14" aria-hidden="true" tabindex="-1"></a>total_fq</span></code></pre></div>
<pre><code>## # A tibble: 32 x 3
## # Groups:   언론사 [4]
##    언론사   word      n
##    &lt;chr&gt;    &lt;chr&gt; &lt;int&gt;
##  1 경향신문 오늘     19
##  2 경향신문 카       14
##  3 경향신문 시작     13
##  4 경향신문 집단     13
##  5 경향신문 고령     10
##  6 경향신문 이상     10
##  7 경향신문 확진     10
##  8 문화일보 이상     10
##  9 문화일보 美        7
## 10 문화일보 시작      6
## # ... with 22 more rows</code></pre>
<p>상대빈도</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="anal2comp.html#cb128-1" aria-hidden="true" tabindex="-1"></a>wlo_fq <span class="ot">&lt;-</span> </span>
<span id="cb128-2"><a href="anal2comp.html#cb128-2" aria-hidden="true" tabindex="-1"></a>vac_tk <span class="sc">%&gt;%</span> </span>
<span id="cb128-3"><a href="anal2comp.html#cb128-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(언론사, word) <span class="sc">%&gt;%</span> </span>
<span id="cb128-4"><a href="anal2comp.html#cb128-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;경향&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb128-5"><a href="anal2comp.html#cb128-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;포토&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb128-6"><a href="anal2comp.html#cb128-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;문화&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb128-7"><a href="anal2comp.html#cb128-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;조선&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb128-8"><a href="anal2comp.html#cb128-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;한겨레&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb128-9"><a href="anal2comp.html#cb128-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;백신&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb128-10"><a href="anal2comp.html#cb128-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(word <span class="sc">!=</span> <span class="st">&quot;접종&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb128-11"><a href="anal2comp.html#cb128-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_log_odds</span>(<span class="at">set =</span> 언론사,</span>
<span id="cb128-12"><a href="anal2comp.html#cb128-12" aria-hidden="true" tabindex="-1"></a>                <span class="at">feature =</span> word,</span>
<span id="cb128-13"><a href="anal2comp.html#cb128-13" aria-hidden="true" tabindex="-1"></a>                <span class="at">n =</span> n) <span class="sc">%&gt;%</span> </span>
<span id="cb128-14"><a href="anal2comp.html#cb128-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(언론사) <span class="sc">%&gt;%</span> </span>
<span id="cb128-15"><a href="anal2comp.html#cb128-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(<span class="fu">abs</span>(log_odds_weighted), <span class="at">n =</span> <span class="dv">7</span>)</span>
<span id="cb128-16"><a href="anal2comp.html#cb128-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-17"><a href="anal2comp.html#cb128-17" aria-hidden="true" tabindex="-1"></a>wlo_fq </span></code></pre></div>
<pre><code>## # A tibble: 38 x 4
## # Groups:   언론사 [4]
##    언론사   word       n log_odds_weighted
##    &lt;chr&gt;    &lt;chr&gt;  &lt;int&gt;             &lt;dbl&gt;
##  1 경향신문 현장       5              2.74
##  2 경향신문 오늘      19              2.46
##  3 경향신문 국산       4              2.45
##  4 경향신문 발         3              2.12
##  5 경향신문 사회       3              2.12
##  6 경향신문 삶         3              2.12
##  7 경향신문 입소자     3              2.12
##  8 경향신문 자발       3              2.12
##  9 경향신문 행동       3              2.12
## 10 문화일보 美         7              3.63
## # ... with 28 more rows</code></pre>
<p>총빈도와 상대빈도 데이터프레임을 행방향으로 결합한다.</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="anal2comp.html#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="fu">bind_rows</span>(</span>
<span id="cb130-2"><a href="anal2comp.html#cb130-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(total_fq, 언론사, word, <span class="at">score =</span> n),</span>
<span id="cb130-3"><a href="anal2comp.html#cb130-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(wlo_fq, 언론사, word, <span class="at">score =</span> log_odds_weighted),</span>
<span id="cb130-4"><a href="anal2comp.html#cb130-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">.id =</span> <span class="st">&quot;ID&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb130-5"><a href="anal2comp.html#cb130-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ID =</span> <span class="fu">ifelse</span>(ID <span class="sc">==</span> <span class="dv">1</span>, <span class="st">&quot;total&quot;</span>, <span class="st">&quot;wlo&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb130-6"><a href="anal2comp.html#cb130-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb130-7"><a href="anal2comp.html#cb130-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> score,</span>
<span id="cb130-8"><a href="anal2comp.html#cb130-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">y =</span> <span class="fu">reorder</span>(word, score),</span>
<span id="cb130-9"><a href="anal2comp.html#cb130-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">fill =</span> 언론사)</span>
<span id="cb130-10"><a href="anal2comp.html#cb130-10" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">+</span></span>
<span id="cb130-11"><a href="anal2comp.html#cb130-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> F) <span class="sc">+</span></span>
<span id="cb130-12"><a href="anal2comp.html#cb130-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>ID<span class="sc">+</span>언론사, <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>, <span class="at">ncol =</span> <span class="dv">4</span>)</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/cmp52-1.png" width="672" /></p>
<p>전반적으로 4개 언론사는 백신과 관련하여 2021년 2월 한달간 ‘이상’(특정 연령 이상)과 아스트라제네카 백신에 대한 내용을 주로 다뤘다.</p>
<p>언론사별로는 경향신문은 ‘오늘’과 ’현장,’ 문화일보는 ‘미국’과 ’누적,’ 조선일보는 ‘국민’과 ’속도,’ 한겨레는 ‘뒤’와 ’팔’ 등에 관련된 기사를 다른 언론사에 비해 상대적으로 더 다뤘다.</p>
<div id="과제-6" class="section level4" number="9.5.4.1">
<h4><span class="header-section-number">9.5.4.1</span> 과제</h4>
<p>빅카인즈에서 언론사별로 관심 분야의 기사를 추출해 보도 내용을 분석할 수 있도록 시각화하시오.</p>
<ul>
<li><p>보도에 사용된 단어의 총빈도에 대해 선택한 언론사별 비교 시각화</p></li>
<li><p>보도에 사용된 단어의 상대빈도에 대해 선택한 언론사별 비교 시각화</p></li>
<li><p>총빈도와 상대빈도에 대해 언론사별로 비교 시각화</p></li>
</ul>

</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="anal1freq.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="anal3topic.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/09-anal2comp.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
