<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 정제(전처리) | R로 하는 텍스트마이닝</title>
  <meta name="description" content="Chapter 7 정제(전처리) | R로 하는 텍스트마이닝" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 정제(전처리) | R로 하는 텍스트마이닝" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Chapter 7 정제(전처리) | R로 하는 텍스트마이닝" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 정제(전처리) | R로 하는 텍스트마이닝" />
  
  <meta name="twitter:description" content="Chapter 7 정제(전처리) | R로 하는 텍스트마이닝" />
  

<meta name="author" content="안도현" />


<meta name="date" content="2021-07-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="cleantool.html"/>
<link rel="next" href="anal1freq.html"/>
<script src="libs/header-attrs-2.7/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">데이터커뮤니케이션:텍스트마이닝</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#머리말"><i class="fa fa-check"></i><b>0.1</b> 머리말</a></li>
<li class="chapter" data-level="0.2" data-path="index.html"><a href="index.html#구성"><i class="fa fa-check"></i><b>0.2</b> 구성</a></li>
<li class="chapter" data-level="0.3" data-path="index.html"><a href="index.html#도움받은-자료"><i class="fa fa-check"></i><b>0.3</b> 도움받은 자료</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="author.html"><a href="author.html"><i class="fa fa-check"></i>Author</a></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> 도입</a>
<ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#사회과학-방법론"><i class="fa fa-check"></i><b>1.1</b> 사회과학 방법론</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#내용분석content-analysis"><i class="fa fa-check"></i><b>1.2</b> 내용분석(Content Analysis)</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="intro.html"><a href="intro.html#내용분석의-정의"><i class="fa fa-check"></i><b>1.2.1</b> 내용분석의 정의</a></li>
<li class="chapter" data-level="1.2.2" data-path="intro.html"><a href="intro.html#컴퓨터보조-내용분석"><i class="fa fa-check"></i><b>1.2.2</b> 컴퓨터보조 내용분석</a></li>
<li class="chapter" data-level="1.2.3" data-path="intro.html"><a href="intro.html#근거이론grounded-theory"><i class="fa fa-check"></i><b>1.2.3</b> 근거이론(grounded theory)</a></li>
<li class="chapter" data-level="1.2.4" data-path="intro.html"><a href="intro.html#컴퓨터-기반-근거이론"><i class="fa fa-check"></i><b>1.2.4</b> 컴퓨터 기반 근거이론</a></li>
<li class="chapter" data-level="1.2.5" data-path="intro.html"><a href="intro.html#전산사회과학computational-social-science-디지털인문학digital-humanities"><i class="fa fa-check"></i><b>1.2.5</b> 전산사회과학(Computational Social Science) 디지털인문학(Digital Humanities)</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#텍스트마이닝"><i class="fa fa-check"></i><b>1.3</b> 텍스트마이닝</a></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#텍스트데이터"><i class="fa fa-check"></i><b>1.4</b> 텍스트데이터</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="intro.html"><a href="intro.html#텍스트의-단위"><i class="fa fa-check"></i><b>1.4.1</b> 텍스트의 단위</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="prep1.html"><a href="prep1.html"><i class="fa fa-check"></i><b>2</b> 준비1: R기초</a>
<ul>
<li class="chapter" data-level="2.1" data-path="prep1.html"><a href="prep1.html#기본-개념"><i class="fa fa-check"></i><b>2.1</b> 기본 개념</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="prep1.html"><a href="prep1.html#컴퓨터"><i class="fa fa-check"></i><b>2.1.1</b> 컴퓨터</a></li>
<li class="chapter" data-level="2.1.2" data-path="prep1.html"><a href="prep1.html#r"><i class="fa fa-check"></i><b>2.1.2</b> R</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="prep1.html"><a href="prep1.html#r시작하기"><i class="fa fa-check"></i><b>2.2</b> R시작하기</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="prep1.html"><a href="prep1.html#로컬컴퓨터에-설치하기"><i class="fa fa-check"></i><b>2.2.1</b> 로컬컴퓨터에 설치하기</a></li>
<li class="chapter" data-level="2.2.2" data-path="prep1.html"><a href="prep1.html#r의-기능구현"><i class="fa fa-check"></i><b>2.2.2</b> R의 기능구현</a></li>
<li class="chapter" data-level="2.2.3" data-path="prep1.html"><a href="prep1.html#작업공간workspace"><i class="fa fa-check"></i><b>2.2.3</b> 작업공간(workspace)</a></li>
<li class="chapter" data-level="2.2.4" data-path="prep1.html"><a href="prep1.html#중요-작업디렉토리working-directory"><i class="fa fa-check"></i><b>2.2.4</b> 중요: 작업디렉토리(working directory)</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="prep1.html"><a href="prep1.html#ide통합개발환경-integrated-development-environment"><i class="fa fa-check"></i><b>2.3</b> IDE(통합개발환경: Integrated Development Environment)</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="prep1.html"><a href="prep1.html#rstudio-설치"><i class="fa fa-check"></i><b>2.3.1</b> RStudio 설치</a></li>
<li class="chapter" data-level="2.3.2" data-path="prep1.html"><a href="prep1.html#프로젝트-만들기"><i class="fa fa-check"></i><b>2.3.2</b> 프로젝트 만들기</a></li>
<li class="chapter" data-level="2.3.3" data-path="prep1.html"><a href="prep1.html#편집창-열기"><i class="fa fa-check"></i><b>2.3.3</b> 편집창 열기</a></li>
<li class="chapter" data-level="2.3.4" data-path="prep1.html"><a href="prep1.html#코드-실행"><i class="fa fa-check"></i><b>2.3.4</b> 코드 실행</a></li>
<li class="chapter" data-level="2.3.5" data-path="prep1.html"><a href="prep1.html#한글사용-설정"><i class="fa fa-check"></i><b>2.3.5</b> 한글사용 설정</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="prep1.html"><a href="prep1.html#데이터의-유형data-type"><i class="fa fa-check"></i><b>2.4</b> 데이터의 유형(data type)</a></li>
<li class="chapter" data-level="2.5" data-path="prep1.html"><a href="prep1.html#데이터구조"><i class="fa fa-check"></i><b>2.5</b> 데이터구조</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="prep1.html"><a href="prep1.html#벡터-c"><i class="fa fa-check"></i><b>2.5.1</b> 벡터 <code>c()</code></a></li>
<li class="chapter" data-level="2.5.2" data-path="prep1.html"><a href="prep1.html#데이터프레임-data.frame"><i class="fa fa-check"></i><b>2.5.2</b> 데이터프레임 <code>data.frame()</code></a></li>
<li class="chapter" data-level="2.5.3" data-path="prep1.html"><a href="prep1.html#리스트-list"><i class="fa fa-check"></i><b>2.5.3</b> 리스트 <code>list()</code></a></li>
<li class="chapter" data-level="2.5.4" data-path="prep1.html"><a href="prep1.html#매트릭스와-어레이"><i class="fa fa-check"></i><b>2.5.4</b> 매트릭스와 어레이</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="prep1.html"><a href="prep1.html#시각화"><i class="fa fa-check"></i><b>2.6</b> 시각화</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="prep1.html"><a href="prep1.html#시각화를-하는-이유"><i class="fa fa-check"></i><b>2.6.1</b> 시각화를 하는 이유</a></li>
<li class="chapter" data-level="2.6.2" data-path="prep1.html"><a href="prep1.html#ggplot2"><i class="fa fa-check"></i><b>2.6.2</b> <code>ggplot2</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="prep2.html"><a href="prep2.html"><i class="fa fa-check"></i><b>3</b> 준비2</a>
<ul>
<li class="chapter" data-level="3.1" data-path="prep2.html"><a href="prep2.html#패키지package"><i class="fa fa-check"></i><b>3.1</b> 패키지(Package)</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="prep2.html"><a href="prep2.html#rtools"><i class="fa fa-check"></i><b>3.1.1</b> <code>rtools</code></a></li>
<li class="chapter" data-level="3.1.2" data-path="prep2.html"><a href="prep2.html#tidyverse"><i class="fa fa-check"></i><b>3.1.2</b> tidyverse</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="prep2.html"><a href="prep2.html#오류error"><i class="fa fa-check"></i><b>3.2</b> 오류(error)</a></li>
<li class="chapter" data-level="3.3" data-path="prep2.html"><a href="prep2.html#흔한-오류"><i class="fa fa-check"></i><b>3.3</b> 흔한 오류</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="prep2.html"><a href="prep2.html#오자와-탈자"><i class="fa fa-check"></i><b>3.3.1</b> 오자와 탈자</a></li>
<li class="chapter" data-level="3.3.2" data-path="prep2.html"><a href="prep2.html#괄호의-불일치"><i class="fa fa-check"></i><b>3.3.2</b> 괄호의 불일치</a></li>
<li class="chapter" data-level="3.3.3" data-path="prep2.html"><a href="prep2.html#보이지-않는-코드"><i class="fa fa-check"></i><b>3.3.3</b> 보이지 않는 코드</a></li>
<li class="chapter" data-level="3.3.4" data-path="prep2.html"><a href="prep2.html#패키지-설치시-겪을-수-있는-오류"><i class="fa fa-check"></i><b>3.3.4</b> 패키지 설치시 겪을 수 있는 오류</a></li>
<li class="chapter" data-level="3.3.5" data-path="prep2.html"><a href="prep2.html#실행할-때-겪을-수-있는-오류"><i class="fa fa-check"></i><b>3.3.5</b> 실행할 때 겪을 수 있는 오류</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="prep2.html"><a href="prep2.html#여러-패키지-한번에-설치"><i class="fa fa-check"></i><b>3.4</b> 여러 패키지 한번에 설치</a></li>
<li class="chapter" data-level="3.5" data-path="prep2.html"><a href="prep2.html#코딩-스타일"><i class="fa fa-check"></i><b>3.5</b> 코딩 스타일</a></li>
<li class="chapter" data-level="3.6" data-path="prep2.html"><a href="prep2.html#파일경로path-표시"><i class="fa fa-check"></i><b>3.6</b> 파일경로(path) 표시</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="prep2.html"><a href="prep2.html#슬래시"><i class="fa fa-check"></i><b>3.6.1</b> 슬래시 /</a></li>
<li class="chapter" data-level="3.6.2" data-path="prep2.html"><a href="prep2.html#마침표-.-.."><i class="fa fa-check"></i><b>3.6.2</b> 마침표 . ..</a></li>
<li class="chapter" data-level="3.6.3" data-path="prep2.html"><a href="prep2.html#물결"><i class="fa fa-check"></i><b>3.6.3</b> 물결 ~</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="prep2.html"><a href="prep2.html#파일과-객체"><i class="fa fa-check"></i><b>3.7</b> 파일과 객체</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="prep2.html"><a href="prep2.html#하드디스크에-있는-파일을-다루는-함수"><i class="fa fa-check"></i><b>3.7.1</b> 하드디스크에 있는 파일을 다루는 함수</a></li>
<li class="chapter" data-level="3.7.2" data-path="prep2.html"><a href="prep2.html#r환경내-객체를-다루는-함수"><i class="fa fa-check"></i><b>3.7.2</b> R환경내 객체를 다루는 함수</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="prep2.html"><a href="prep2.html#따옴표와-백틱"><i class="fa fa-check"></i><b>3.8</b> 따옴표와 백틱</a>
<ul>
<li class="chapter" data-level="3.8.1" data-path="prep2.html"><a href="prep2.html#겹따옴표-홑따옴표"><i class="fa fa-check"></i><b>3.8.1</b> 겹따옴표 홑따옴표</a></li>
<li class="chapter" data-level="3.8.2" data-path="prep2.html"><a href="prep2.html#백틱backquotebacktick-주의중요-글꼴-기타-na와null의-차이"><i class="fa fa-check"></i><b>3.8.2</b> 백틱(backquote/backtick) <code>## 주의(중요) ### 글꼴  ## 기타 ###</code>NA<code>와</code>NULL`의 차이</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="browse.html"><a href="browse.html"><i class="fa fa-check"></i><b>4</b> 틀잡기</a>
<ul>
<li class="chapter" data-level="4.1" data-path="browse.html"><a href="browse.html#수집"><i class="fa fa-check"></i><b>4.1</b> 수집</a></li>
<li class="chapter" data-level="4.2" data-path="browse.html"><a href="browse.html#정제전처리"><i class="fa fa-check"></i><b>4.2</b> 정제(전처리)</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="browse.html"><a href="browse.html#정돈텍스트tidy-text"><i class="fa fa-check"></i><b>4.2.1</b> 정돈텍스트(tidy text)</a></li>
<li class="chapter" data-level="4.2.2" data-path="browse.html"><a href="browse.html#토큰화-unnest_tokens-함수"><i class="fa fa-check"></i><b>4.2.2</b> 토큰화: <code>unnest_tokens</code> 함수</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="browse.html"><a href="browse.html#분석"><i class="fa fa-check"></i><b>4.3</b> 분석</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="browse.html"><a href="browse.html#빈도-count-함수"><i class="fa fa-check"></i><b>4.3.1</b> 빈도: <code>count</code> 함수</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="browse.html"><a href="browse.html#소통"><i class="fa fa-check"></i><b>4.4</b> 소통</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="browse.html"><a href="browse.html#시각화-1"><i class="fa fa-check"></i><b>4.4.1</b> 시각화</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="browse.html"><a href="browse.html#연습-2"><i class="fa fa-check"></i><b>4.5</b> 연습</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="browse.html"><a href="browse.html#과제"><i class="fa fa-check"></i><b>4.5.1</b> 과제</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>5</b> 수집: 불러오기</a>
<ul>
<li class="chapter" data-level="5.1" data-path="data.html"><a href="data.html#바이너리-파일"><i class="fa fa-check"></i><b>5.1</b> 바이너리 파일</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="data.html"><a href="data.html#불러오기이입-import"><i class="fa fa-check"></i><b>5.1.1</b> 불러오기(이입: import)</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="data.html"><a href="data.html#일반텍스트plain-text-파일"><i class="fa fa-check"></i><b>5.2</b> 일반텍스트(plain text) 파일</a></li>
<li class="chapter" data-level="5.3" data-path="data.html"><a href="data.html#html-파일"><i class="fa fa-check"></i><b>5.3</b> HTML 파일</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="data.html"><a href="data.html#html문서-불러오기-read_html"><i class="fa fa-check"></i><b>5.3.1</b> HTML문서 불러오기 <code>read_html()</code></a></li>
<li class="chapter" data-level="5.3.2" data-path="data.html"><a href="data.html#htlm요소-추출하기-html_node"><i class="fa fa-check"></i><b>5.3.2</b> HTLM요소 추출하기 <code>html_node()</code></a></li>
<li class="chapter" data-level="5.3.3" data-path="data.html"><a href="data.html#내용-추출하기-html_text"><i class="fa fa-check"></i><b>5.3.3</b> 내용 추출하기 <code>html_text</code></a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="data.html"><a href="data.html#내보내기export-이출"><i class="fa fa-check"></i><b>5.4</b> 내보내기(export: 이출)</a></li>
<li class="chapter" data-level="5.5" data-path="data.html"><a href="data.html#인코딩encoding-부호화"><i class="fa fa-check"></i><b>5.5</b> 인코딩(encoding: 부호화)</a></li>
<li class="chapter" data-level="5.6" data-path="data.html"><a href="data.html#테이블구조-문서"><i class="fa fa-check"></i><b>5.6</b> 테이블구조 문서</a></li>
<li class="chapter" data-level="5.7" data-path="data.html"><a href="data.html#기타-파일-형식"><i class="fa fa-check"></i><b>5.7</b> 기타 파일 형식</a></li>
<li class="chapter" data-level="5.8" data-path="data.html"><a href="data.html#연습-3"><i class="fa fa-check"></i><b>5.8</b> 연습</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="data.html"><a href="data.html#과제-1"><i class="fa fa-check"></i><b>5.8.1</b> 과제</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="cleantool.html"><a href="cleantool.html"><i class="fa fa-check"></i><b>6</b> 정제도구</a>
<ul>
<li class="chapter" data-level="6.1" data-path="cleantool.html"><a href="cleantool.html#stringr"><i class="fa fa-check"></i><b>6.1</b> <code>stringr</code></a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="cleantool.html"><a href="cleantool.html#개괄"><i class="fa fa-check"></i><b>6.1.1</b> 개괄</a></li>
<li class="chapter" data-level="6.1.2" data-path="cleantool.html"><a href="cleantool.html#탐지와-찾기detect-locate-1"><i class="fa fa-check"></i><b>6.1.2</b> 탐지와 찾기(detect &amp; locate)</a></li>
<li class="chapter" data-level="6.1.3" data-path="cleantool.html"><a href="cleantool.html#부분선택-추출-일치subset-extract-match-1"><i class="fa fa-check"></i><b>6.1.3</b> 부분선택, 추출, 일치(subset, extract &amp; match)</a></li>
<li class="chapter" data-level="6.1.4" data-path="cleantool.html"><a href="cleantool.html#문자열-변환mutate-strings-1"><i class="fa fa-check"></i><b>6.1.4</b> 문자열 변환(Mutate Strings)</a></li>
<li class="chapter" data-level="6.1.5" data-path="cleantool.html"><a href="cleantool.html#결합과-분리join-and-split-1"><i class="fa fa-check"></i><b>6.1.5</b> 결합과 분리(Join and Split)</a></li>
<li class="chapter" data-level="6.1.6" data-path="cleantool.html"><a href="cleantool.html#공백문자whitespace-1"><i class="fa fa-check"></i><b>6.1.6</b> 공백문자(Whitespace)</a></li>
<li class="chapter" data-level="6.1.7" data-path="cleantool.html"><a href="cleantool.html#과제-2"><i class="fa fa-check"></i><b>6.1.7</b> 과제</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="cleantool.html"><a href="cleantool.html#dplyr"><i class="fa fa-check"></i><b>6.2</b> <code>dplyr</code></a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="cleantool.html"><a href="cleantool.html#개괄-1"><i class="fa fa-check"></i><b>6.2.1</b> 개괄</a></li>
<li class="chapter" data-level="6.2.2" data-path="cleantool.html"><a href="cleantool.html#dplyr의-구성"><i class="fa fa-check"></i><b>6.2.2</b> <code>dplyr</code>의 구성</a></li>
<li class="chapter" data-level="6.2.3" data-path="cleantool.html"><a href="cleantool.html#묶음-동사group-cases-1"><i class="fa fa-check"></i><b>6.2.3</b> 묶음 동사(group cases)</a></li>
<li class="chapter" data-level="6.2.4" data-path="cleantool.html"><a href="cleantool.html#요약-동사와-요약-함수"><i class="fa fa-check"></i><b>6.2.4</b> 요약 동사와 요약 함수</a></li>
<li class="chapter" data-level="6.2.5" data-path="cleantool.html"><a href="cleantool.html#행-조작-동사manipulate-cases-1"><i class="fa fa-check"></i><b>6.2.5</b> 행 조작 동사(manipulate cases)</a></li>
<li class="chapter" data-level="6.2.6" data-path="cleantool.html"><a href="cleantool.html#열-조작-동사manipulate-variables-1"><i class="fa fa-check"></i><b>6.2.6</b> 열 조작 동사(manipulate variables)</a></li>
<li class="chapter" data-level="6.2.7" data-path="cleantool.html"><a href="cleantool.html#벡터-함수vector-functions-1"><i class="fa fa-check"></i><b>6.2.7</b> 벡터 함수(vector functions)</a></li>
<li class="chapter" data-level="6.2.8" data-path="cleantool.html"><a href="cleantool.html#테이블-결합동사행방향"><i class="fa fa-check"></i><b>6.2.8</b> 테이블 결합동사(행방향)</a></li>
<li class="chapter" data-level="6.2.9" data-path="cleantool.html"><a href="cleantool.html#테이블-결합동사열방향"><i class="fa fa-check"></i><b>6.2.9</b> 테이블 결합동사(열방향)</a></li>
<li class="chapter" data-level="6.2.10" data-path="cleantool.html"><a href="cleantool.html#연습1"><i class="fa fa-check"></i><b>6.2.10</b> 연습1</a></li>
<li class="chapter" data-level="6.2.11" data-path="cleantool.html"><a href="cleantool.html#연습2"><i class="fa fa-check"></i><b>6.2.11</b> 연습2</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="cleantool.html"><a href="cleantool.html#purrr"><i class="fa fa-check"></i><b>6.3</b> <code>purrr</code></a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="cleantool.html"><a href="cleantool.html#개괄-2"><i class="fa fa-check"></i><b>6.3.1</b> 개괄</a></li>
<li class="chapter" data-level="6.3.2" data-path="cleantool.html"><a href="cleantool.html#반복계산-1"><i class="fa fa-check"></i><b>6.3.2</b> 반복계산</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="cleantool.html"><a href="cleantool.html#tidyr"><i class="fa fa-check"></i><b>6.4</b> <code>tidyr</code></a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="cleantool.html"><a href="cleantool.html#개괄-3"><i class="fa fa-check"></i><b>6.4.1</b> 개괄</a></li>
<li class="chapter" data-level="6.4.2" data-path="cleantool.html"><a href="cleantool.html#축전환pivoting-1"><i class="fa fa-check"></i><b>6.4.2</b> 축전환(pivoting)</a></li>
<li class="chapter" data-level="6.4.3" data-path="cleantool.html"><a href="cleantool.html#분리와-결합-1"><i class="fa fa-check"></i><b>6.4.3</b> 분리와 결합</a></li>
<li class="chapter" data-level="6.4.4" data-path="cleantool.html"><a href="cleantool.html#연습1-1"><i class="fa fa-check"></i><b>6.4.4</b> 연습1</a></li>
<li class="chapter" data-level="6.4.5" data-path="cleantool.html"><a href="cleantool.html#연습2-1"><i class="fa fa-check"></i><b>6.4.5</b> 연습2</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="cleantool.html"><a href="cleantool.html#연산자operators"><i class="fa fa-check"></i><b>6.5</b> 연산자(operators)</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="cleantool.html"><a href="cleantool.html#산술연산자arithmatic-operators"><i class="fa fa-check"></i><b>6.5.1</b> 산술연산자(Arithmatic Operators)</a></li>
<li class="chapter" data-level="6.5.2" data-path="cleantool.html"><a href="cleantool.html#관계연산자relational-operators"><i class="fa fa-check"></i><b>6.5.2</b> 관계연산자(Relational Operators)</a></li>
<li class="chapter" data-level="6.5.3" data-path="cleantool.html"><a href="cleantool.html#논리연산자logical-operators"><i class="fa fa-check"></i><b>6.5.3</b> 논리연산자(Logical Operators)</a></li>
<li class="chapter" data-level="6.5.4" data-path="cleantool.html"><a href="cleantool.html#포함-연산자inclusion-operator"><i class="fa fa-check"></i><b>6.5.4</b> 포함 연산자(Inclusion Operator)</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="cleantool.html"><a href="cleantool.html#정규표현식regular-expressions"><i class="fa fa-check"></i><b>6.6</b> 정규표현식(regular expressions)</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="cleantool.html"><a href="cleantool.html#일반문자와-기능문자"><i class="fa fa-check"></i><b>6.6.1</b> 일반문자와 기능문자</a></li>
<li class="chapter" data-level="6.6.2" data-path="cleantool.html"><a href="cleantool.html#일치하는-문자match-characters"><i class="fa fa-check"></i><b>6.6.2</b> 일치하는 문자(Match Characters)</a></li>
<li class="chapter" data-level="6.6.3" data-path="cleantool.html"><a href="cleantool.html#공백문자whitespace-2"><i class="fa fa-check"></i><b>6.6.3</b> 공백문자(whitespace)</a></li>
<li class="chapter" data-level="6.6.4" data-path="cleantool.html"><a href="cleantool.html#또는"><i class="fa fa-check"></i><b>6.6.4</b> 또는</a></li>
<li class="chapter" data-level="6.6.5" data-path="cleantool.html"><a href="cleantool.html#묶음"><i class="fa fa-check"></i><b>6.6.5</b> 묶음</a></li>
<li class="chapter" data-level="6.6.6" data-path="cleantool.html"><a href="cleantool.html#앵커"><i class="fa fa-check"></i><b>6.6.6</b> 앵커</a></li>
<li class="chapter" data-level="6.6.7" data-path="cleantool.html"><a href="cleantool.html#주변look-around-1"><i class="fa fa-check"></i><b>6.6.7</b> 주변(look around)</a></li>
<li class="chapter" data-level="6.6.8" data-path="cleantool.html"><a href="cleantool.html#반복일치"><i class="fa fa-check"></i><b>6.6.8</b> 반복일치</a></li>
<li class="chapter" data-level="6.6.9" data-path="cleantool.html"><a href="cleantool.html#유용한-정규표현식"><i class="fa fa-check"></i><b>6.6.9</b> 유용한 정규표현식</a></li>
<li class="chapter" data-level="6.6.10" data-path="cleantool.html"><a href="cleantool.html#연습-4"><i class="fa fa-check"></i><b>6.6.10</b> 연습</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="clean.html"><a href="clean.html"><i class="fa fa-check"></i><b>7</b> 정제(전처리)</a>
<ul>
<li class="chapter" data-level="7.1" data-path="clean.html"><a href="clean.html#토큰화"><i class="fa fa-check"></i><b>7.1</b> 토큰화</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="clean.html"><a href="clean.html#unnest_tokensdf-output-input-token-words-format-ctext-man-latex-html-xml-to_lower-true-drop-true-collapse-null-..."><i class="fa fa-check"></i><b>7.1.1</b> <code>unnest_tokens(df, output, input, token = "words", format = c("text", "man", "latex", "html", "xml"), to_lower = TRUE, drop = TRUE, collapse = NULL, ...)</code></a></li>
<li class="chapter" data-level="7.1.2" data-path="clean.html"><a href="clean.html#format-ctext-man-latex-html-xml"><i class="fa fa-check"></i><b>7.1.2</b> <code>format = c("text", "man", "latex", "html", "xml")</code></a></li>
<li class="chapter" data-level="7.1.3" data-path="clean.html"><a href="clean.html#to_lower-true"><i class="fa fa-check"></i><b>7.1.3</b> <code>to_lower = TRUE</code></a></li>
<li class="chapter" data-level="7.1.4" data-path="clean.html"><a href="clean.html#strip_punct"><i class="fa fa-check"></i><b>7.1.4</b> <code>strip_punct =</code></a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="clean.html"><a href="clean.html#불용어stop-words-제거-1"><i class="fa fa-check"></i><b>7.2</b> 불용어(stop words) 제거</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="clean.html"><a href="clean.html#불용어-사전"><i class="fa fa-check"></i><b>7.2.1</b> 불용어 사전</a></li>
<li class="chapter" data-level="7.2.2" data-path="clean.html"><a href="clean.html#filter"><i class="fa fa-check"></i><b>7.2.2</b> <code>filter()</code></a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="clean.html"><a href="clean.html#정규화normalization-1"><i class="fa fa-check"></i><b>7.3</b> 정규화(Normalization)</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="clean.html"><a href="clean.html#개괄-4"><i class="fa fa-check"></i><b>7.3.1</b> 개괄</a></li>
<li class="chapter" data-level="7.3.2" data-path="clean.html"><a href="clean.html#형태소morpheme"><i class="fa fa-check"></i><b>7.3.2</b> 형태소(morpheme)</a></li>
<li class="chapter" data-level="7.3.3" data-path="clean.html"><a href="clean.html#형태소-추출"><i class="fa fa-check"></i><b>7.3.3</b> 형태소 추출</a></li>
<li class="chapter" data-level="7.3.4" data-path="clean.html"><a href="clean.html#rcppmecab-1"><i class="fa fa-check"></i><b>7.3.4</b> RcppMeCab</a></li>
<li class="chapter" data-level="7.3.5" data-path="clean.html"><a href="clean.html#konlp-1"><i class="fa fa-check"></i><b>7.3.5</b> <code>KoNLP</code></a></li>
<li class="chapter" data-level="7.3.6" data-path="clean.html"><a href="clean.html#konlpy"><i class="fa fa-check"></i><b>7.3.6</b> <code>KoNLPy</code></a></li>
<li class="chapter" data-level="7.3.7" data-path="clean.html"><a href="clean.html#연습-5"><i class="fa fa-check"></i><b>7.3.7</b> 연습</a></li>
<li class="chapter" data-level="7.3.8" data-path="clean.html"><a href="clean.html#어간stem-추출"><i class="fa fa-check"></i><b>7.3.8</b> 어간(stem) 추출</a></li>
<li class="chapter" data-level="7.3.9" data-path="clean.html"><a href="clean.html#표제어lemme-추출"><i class="fa fa-check"></i><b>7.3.9</b> 표제어(lemme) 추출</a></li>
<li class="chapter" data-level="7.3.10" data-path="clean.html"><a href="clean.html#연습-6"><i class="fa fa-check"></i><b>7.3.10</b> 연습</a></li>
<li class="chapter" data-level="7.3.11" data-path="clean.html"><a href="clean.html#과제-5"><i class="fa fa-check"></i><b>7.3.11</b> 과제</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="anal1freq.html"><a href="anal1freq.html"><i class="fa fa-check"></i><b>8</b> 분석1: 감정어 빈도</a>
<ul>
<li class="chapter" data-level="8.1" data-path="anal1freq.html"><a href="anal1freq.html#국문-감정사전"><i class="fa fa-check"></i><b>8.1</b> 국문 감정사전</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="anal1freq.html"><a href="anal1freq.html#사전-데이터프레임-만들기"><i class="fa fa-check"></i><b>8.1.1</b> 사전 데이터프레임 만들기</a></li>
<li class="chapter" data-level="8.1.2" data-path="anal1freq.html"><a href="anal1freq.html#연습-7"><i class="fa fa-check"></i><b>8.1.2</b> 연습</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="anal1freq.html"><a href="anal1freq.html#감정분석"><i class="fa fa-check"></i><b>8.2</b> 감정분석</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="anal1freq.html"><a href="anal1freq.html#수집-1"><i class="fa fa-check"></i><b>8.2.1</b> 수집</a></li>
<li class="chapter" data-level="8.2.2" data-path="anal1freq.html"><a href="anal1freq.html#정제"><i class="fa fa-check"></i><b>8.2.2</b> 정제</a></li>
<li class="chapter" data-level="8.2.3" data-path="anal1freq.html"><a href="anal1freq.html#분석-및-소통"><i class="fa fa-check"></i><b>8.2.3</b> 분석 및 소통</a></li>
<li class="chapter" data-level="8.2.4" data-path="anal1freq.html"><a href="anal1freq.html#문서의-감정점수-계산"><i class="fa fa-check"></i><b>8.2.4</b> 문서의 감정점수 계산</a></li>
<li class="chapter" data-level="8.2.5" data-path="anal1freq.html"><a href="anal1freq.html#감정-극성별-단어빈도"><i class="fa fa-check"></i><b>8.2.5</b> 감정 극성별 단어빈도</a></li>
<li class="chapter" data-level="8.2.6" data-path="anal1freq.html"><a href="anal1freq.html#단어구름에-극성별-단어빈도-표시"><i class="fa fa-check"></i><b>8.2.6</b> 단어구름에 극성별 단어빈도 표시</a></li>
<li class="chapter" data-level="8.2.7" data-path="anal1freq.html"><a href="anal1freq.html#문장-전개에-따른-감정-변화"><i class="fa fa-check"></i><b>8.2.7</b> 문장 전개에 따른 감정 변화</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="anal2comp.html"><a href="anal2comp.html"><i class="fa fa-check"></i><b>9</b> 분석2: 상대빈도</a>
<ul>
<li class="chapter" data-level="9.1" data-path="anal2comp.html"><a href="anal2comp.html#개관"><i class="fa fa-check"></i><b>9.1</b> 개관</a></li>
<li class="chapter" data-level="9.2" data-path="anal2comp.html"><a href="anal2comp.html#tf_idf"><i class="fa fa-check"></i><b>9.2</b> tf_idf</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="anal2comp.html"><a href="anal2comp.html#공식"><i class="fa fa-check"></i><b>9.2.1</b> 공식</a></li>
<li class="chapter" data-level="9.2.2" data-path="anal2comp.html"><a href="anal2comp.html#적용"><i class="fa fa-check"></i><b>9.2.2</b> 적용</a></li>
<li class="chapter" data-level="9.2.3" data-path="anal2comp.html"><a href="anal2comp.html#bind_tf_idftbl-term-document-n"><i class="fa fa-check"></i><b>9.2.3</b> <code>bind_tf_idf(tbl, term, document, n)</code></a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="anal2comp.html"><a href="anal2comp.html#승산비odds-ratio"><i class="fa fa-check"></i><b>9.3</b> 승산비(odds ratio)</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="anal2comp.html"><a href="anal2comp.html#자료준비"><i class="fa fa-check"></i><b>9.3.1</b> 자료준비</a></li>
<li class="chapter" data-level="9.3.2" data-path="anal2comp.html"><a href="anal2comp.html#로그승산비"><i class="fa fa-check"></i><b>9.3.2</b> 로그승산비</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="anal2comp.html"><a href="anal2comp.html#가중로그승산비"><i class="fa fa-check"></i><b>9.4</b> 가중로그승산비</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="anal2comp.html"><a href="anal2comp.html#bind_log_oddstbl-set-feature-n-uninformative-false-unweighted-false"><i class="fa fa-check"></i><b>9.4.1</b> <code>bind_log_odds(tbl, set, feature, n, uninformative = FALSE, unweighted = FALSE)</code></a></li>
<li class="chapter" data-level="9.4.2" data-path="anal2comp.html"><a href="anal2comp.html#지표-비교"><i class="fa fa-check"></i><b>9.4.2</b> 지표 비교</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="anal2comp.html"><a href="anal2comp.html#연습-8"><i class="fa fa-check"></i><b>9.5</b> 연습</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="anal2comp.html"><a href="anal2comp.html#빅카인즈"><i class="fa fa-check"></i><b>9.5.1</b> 빅카인즈</a></li>
<li class="chapter" data-level="9.5.2" data-path="anal2comp.html"><a href="anal2comp.html#정제-1"><i class="fa fa-check"></i><b>9.5.2</b> 정제</a></li>
<li class="chapter" data-level="9.5.3" data-path="anal2comp.html"><a href="anal2comp.html#분석-및-소통-1"><i class="fa fa-check"></i><b>9.5.3</b> 분석 및 소통</a></li>
<li class="chapter" data-level="9.5.4" data-path="anal2comp.html"><a href="anal2comp.html#총빈도와-상대빈도-비교"><i class="fa fa-check"></i><b>9.5.4</b> 총빈도와 상대빈도 비교</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="anal3topic.html"><a href="anal3topic.html"><i class="fa fa-check"></i><b>10</b> 분석3: 주제모형</a>
<ul>
<li class="chapter" data-level="10.1" data-path="anal3topic.html"><a href="anal3topic.html#개관-1"><i class="fa fa-check"></i><b>10.1</b> 개관</a></li>
<li class="chapter" data-level="10.2" data-path="anal3topic.html"><a href="anal3topic.html#자료-준비-1"><i class="fa fa-check"></i><b>10.2</b> 자료 준비</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="anal3topic.html"><a href="anal3topic.html#자료-이입"><i class="fa fa-check"></i><b>10.2.1</b> 자료 이입</a></li>
<li class="chapter" data-level="10.2.2" data-path="anal3topic.html"><a href="anal3topic.html#정제-2"><i class="fa fa-check"></i><b>10.2.2</b> 정제</a></li>
<li class="chapter" data-level="10.2.3" data-path="anal3topic.html"><a href="anal3topic.html#stm-말뭉치"><i class="fa fa-check"></i><b>10.2.3</b> stm 말뭉치</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="anal3topic.html"><a href="anal3topic.html#분석-1"><i class="fa fa-check"></i><b>10.3</b> 분석</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="anal3topic.html"><a href="anal3topic.html#주제의-수k-설정"><i class="fa fa-check"></i><b>10.3.1</b> 주제의 수(K) 설정</a></li>
<li class="chapter" data-level="10.3.2" data-path="anal3topic.html"><a href="anal3topic.html#주제모형-구성"><i class="fa fa-check"></i><b>10.3.2</b> 주제모형 구성</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="anal3topic.html"><a href="anal3topic.html#소통-1"><i class="fa fa-check"></i><b>10.4</b> 소통</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="anal3topic.html"><a href="anal3topic.html#주제별-단어-분포"><i class="fa fa-check"></i><b>10.4.1</b> 주제별 단어 분포</a></li>
<li class="chapter" data-level="10.4.2" data-path="anal3topic.html"><a href="anal3topic.html#주제별-문서-분포"><i class="fa fa-check"></i><b>10.4.2</b> 주제별 문서 분포</a></li>
<li class="chapter" data-level="10.4.3" data-path="anal3topic.html"><a href="anal3topic.html#주제별-단어-문서-분포"><i class="fa fa-check"></i><b>10.4.3</b> 주제별 단어-문서 분포</a></li>
<li class="chapter" data-level="10.4.4" data-path="anal3topic.html"><a href="anal3topic.html#과제-7"><i class="fa fa-check"></i><b>10.4.4</b> 과제</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="anal4topic.html"><a href="anal4topic.html"><i class="fa fa-check"></i><b>11</b> 분석4: 주제모형(공변인)</a>
<ul>
<li class="chapter" data-level="11.1" data-path="anal4topic.html"><a href="anal4topic.html#주제-명명과-공변인-주제모형"><i class="fa fa-check"></i><b>11.1</b> 주제 명명과 공변인 주제모형</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="anal4topic.html"><a href="anal4topic.html#개관-2"><i class="fa fa-check"></i><b>11.1.1</b> 개관</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="anal4topic.html"><a href="anal4topic.html#자료-준비-2"><i class="fa fa-check"></i><b>11.2</b> 자료 준비</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="anal4topic.html"><a href="anal4topic.html#수집-2"><i class="fa fa-check"></i><b>11.2.1</b> 수집</a></li>
<li class="chapter" data-level="11.2.2" data-path="anal4topic.html"><a href="anal4topic.html#선택-표집"><i class="fa fa-check"></i><b>11.2.2</b> (선택) 표집</a></li>
<li class="chapter" data-level="11.2.3" data-path="anal4topic.html"><a href="anal4topic.html#정제-3"><i class="fa fa-check"></i><b>11.2.3</b> 정제</a></li>
<li class="chapter" data-level="11.2.4" data-path="anal4topic.html"><a href="anal4topic.html#stm말뭉치"><i class="fa fa-check"></i><b>11.2.4</b> <code>stm</code>말뭉치</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="anal4topic.html"><a href="anal4topic.html#분석-2"><i class="fa fa-check"></i><b>11.3</b> 분석</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="anal4topic.html"><a href="anal4topic.html#주제topic의-수-설정"><i class="fa fa-check"></i><b>11.3.1</b> 주제(topic)의 수 설정</a></li>
<li class="chapter" data-level="11.3.2" data-path="anal4topic.html"><a href="anal4topic.html#모형-구성"><i class="fa fa-check"></i><b>11.3.2</b> 모형 구성</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="anal4topic.html"><a href="anal4topic.html#주제-이름짓기"><i class="fa fa-check"></i><b>11.4</b> 주제 이름짓기</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="anal4topic.html"><a href="anal4topic.html#주제별-단어와-원문-결합"><i class="fa fa-check"></i><b>11.4.1</b> 주제별 단어와 원문 결합</a></li>
<li class="chapter" data-level="11.4.2" data-path="anal4topic.html"><a href="anal4topic.html#주제-이름-목록"><i class="fa fa-check"></i><b>11.4.2</b> 주제 이름 목록</a></li>
<li class="chapter" data-level="11.4.3" data-path="anal4topic.html"><a href="anal4topic.html#주제별-단어-분포도"><i class="fa fa-check"></i><b>11.4.3</b> 주제별 단어 분포도</a></li>
<li class="chapter" data-level="11.4.4" data-path="anal4topic.html"><a href="anal4topic.html#주제별-문서-분포도"><i class="fa fa-check"></i><b>11.4.4</b> 주제별 문서 분포도</a></li>
<li class="chapter" data-level="11.4.5" data-path="anal4topic.html"><a href="anal4topic.html#주제별-단어-문서-분포-1"><i class="fa fa-check"></i><b>11.4.5</b> 주제별 단어-문서 분포</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="anal4topic.html"><a href="anal4topic.html#공변인-분석"><i class="fa fa-check"></i><b>11.5</b> 공변인 분석</a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="anal4topic.html"><a href="anal4topic.html#문서-내용-확인"><i class="fa fa-check"></i><b>11.5.1</b> 문서 내용 확인</a></li>
<li class="chapter" data-level="11.5.2" data-path="anal4topic.html"><a href="anal4topic.html#공변인-분석-시각화"><i class="fa fa-check"></i><b>11.5.2</b> 공변인 분석 시각화</a></li>
<li class="chapter" data-level="11.5.3" data-path="anal4topic.html"><a href="anal4topic.html#주제-사이-상관성"><i class="fa fa-check"></i><b>11.5.3</b> 주제 사이 상관성</a></li>
<li class="chapter" data-level="11.5.4" data-path="anal4topic.html"><a href="anal4topic.html#과제-8"><i class="fa fa-check"></i><b>11.5.4</b> 과제</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R로 하는 텍스트마이닝</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="clean" class="section level1" number="7">
<h1><span class="header-section-number">Chapter 7</span> 정제(전처리)</h1>
<p>정제는 자료정보지식지혜(DIKW)위계론의 1차부호화 단계에 해당한다. 정제를 거친 자료를 분석하는 2차부호화 과정을 거쳐 자료가 정보로 가공된다. 광물 정제과정에 비유할 수 있다. 금광석 등 광물을 캐면 먼저 잘게 분쇄한다. 불순물을 제거하고, 규격화한 금괴로 가공한다. 마찬가지로 원자료를 분석할 수 있는 단위로 분쇄(토큰화)하고, 불순물을 제거(불용어 제거)한 다음, 규격화한 양식으로 정규화한다.</p>
<ul>
<li>토큰화</li>
<li>불용어제거</li>
<li>정규화</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="clean.html#cb1-1" aria-hidden="true" tabindex="-1"></a>pkg_l <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;tidyverse&quot;</span>, <span class="st">&quot;tidytext&quot;</span>, <span class="st">&quot;textdata&quot;</span>)</span>
<span id="cb1-2"><a href="clean.html#cb1-2" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">map</span>(pkg_l, require, <span class="at">ch =</span> T)</span></code></pre></div>
<pre><code>## Loading required package: tidyverse</code></pre>
<pre><code>## -- Attaching packages --------------------------------------- tidyverse 1.3.0 --</code></pre>
<pre><code>## v ggplot2 3.3.2     v purrr   0.3.4
## v tibble  3.0.4     v dplyr   1.0.2
## v tidyr   1.1.2     v stringr 1.4.0
## v readr   1.4.0     v forcats 0.5.0</code></pre>
<pre><code>## -- Conflicts ------------------------------------------ tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<pre><code>## Loading required package: tidytext</code></pre>
<pre><code>## Loading required package: textdata</code></pre>
<pre><code>## Warning: package &#39;textdata&#39; was built under R version 4.0.5</code></pre>
<pre><code>## [[1]]
## [1] TRUE
## 
## [[2]]
## [1] TRUE
## 
## [[3]]
## [1] TRUE</code></pre>
<div id="토큰화" class="section level2" number="7.1">
<h2><span class="header-section-number">7.1</span> 토큰화</h2>
<p>텍스트 원자료를 분석할 수 있도록 토큰(token)으로 잘게 나누는 단계다. 토큰의 단위는 분석 목적에 따라 글자, 단어, 엔그램(n-gram), 문장, 문단 등 다양하게 지정할 수 있다.</p>
<div id="unnest_tokensdf-output-input-token-words-format-ctext-man-latex-html-xml-to_lower-true-drop-true-collapse-null-..." class="section level3" number="7.1.1">
<h3><span class="header-section-number">7.1.1</span> <code>unnest_tokens(df, output, input, token = "words", format = c("text", "man", "latex", "html", "xml"), to_lower = TRUE, drop = TRUE, collapse = NULL, ...)</code></h3>
<p>토큰으로 나누는 단위는 분석의 목적에 따라 다양한 단어, 글자, 문장 등 다양한 수준으로 설정할 수 있다.</p>
<ul>
<li>“characters” 글자 단위</li>
<li>“character_shingles” 복수의 글자 단위</li>
<li>“words” 단어 단위</li>
<li>“ngrams” 복수의 단어 단위</li>
<li>“regex” 정규표현식으로 지정</li>
</ul>
<p><code>tidytext</code>패키지에서는 <code>unnest_tokens()</code>함수에서는 <code>token =</code>인자로 토큰 단위를 지정할 수 있다.</p>
<div id="단어" class="section level5" number="7.1.1.0.1">
<h5><span class="header-section-number">7.1.1.0.1</span> 단어</h5>
<p><code>unnest_tokens()</code>함수에서 토큰의 기본값으로 설정된 단위는 단어(“words”)다.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="clean.html#cb10-1" aria-hidden="true" tabindex="-1"></a>text_v <span class="ot">&lt;-</span> <span class="st">&quot;You still fascinate and inspire me.</span></span>
<span id="cb10-2"><a href="clean.html#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="st">You influence me for the better. </span></span>
<span id="cb10-3"><a href="clean.html#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="st">You’re the object of my desire, the #1 Earthly reason for my existence.&quot;</span></span>
<span id="cb10-4"><a href="clean.html#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="clean.html#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">text =</span> text_v) <span class="sc">%&gt;%</span> </span>
<span id="cb10-6"><a href="clean.html#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(<span class="at">output =</span> word, <span class="at">input =</span> text,</span>
<span id="cb10-7"><a href="clean.html#cb10-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">token =</span> <span class="st">&quot;words&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 25 x 1
##    word     
##    &lt;chr&gt;    
##  1 you      
##  2 still    
##  3 fascinate
##  4 and      
##  5 inspire  
##  6 me       
##  7 you      
##  8 influence
##  9 me       
## 10 for      
## # ... with 15 more rows</code></pre>
</div>
<div id="글자-토큰" class="section level5" number="7.1.1.0.2">
<h5><span class="header-section-number">7.1.1.0.2</span> 글자 토큰</h5>
<p><code>token =</code>인자에 “characters”를 투입하면 글자 단위로 토큰화한다.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="clean.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">text =</span> text_v) <span class="sc">%&gt;%</span> </span>
<span id="cb12-2"><a href="clean.html#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(<span class="at">output =</span> word, <span class="at">input =</span> text,</span>
<span id="cb12-3"><a href="clean.html#cb12-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">token =</span> <span class="st">&quot;characters&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb12-4"><a href="clean.html#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> T)</span></code></pre></div>
<pre><code>## # A tibble: 21 x 2
##    word      n
##    &lt;chr&gt; &lt;int&gt;
##  1 e        20
##  2 t        10
##  3 o         8
##  4 r         8
##  5 i         7
##  6 n         7
##  7 s         6
##  8 y         6
##  9 a         5
## 10 f         5
## # ... with 11 more rows</code></pre>
</div>
<div id="복수의-글자" class="section level5" number="7.1.1.0.3">
<h5><span class="header-section-number">7.1.1.0.3</span> 복수의 글자</h5>
<p>복수의 글자를 토큰의 단위로 할 때는 “character_shingles”을 <code>token =</code>인자에 투입한다. 기본값은 3글자.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="clean.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">text =</span> text_v) <span class="sc">%&gt;%</span> </span>
<span id="cb14-2"><a href="clean.html#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(<span class="at">output =</span> word, <span class="at">input =</span> text,</span>
<span id="cb14-3"><a href="clean.html#cb14-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">token =</span> <span class="st">&quot;character_shingles&quot;</span>, <span class="at">n =</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb14-4"><a href="clean.html#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> T)</span></code></pre></div>
<pre><code>## # A tibble: 104 x 2
##    word      n
##    &lt;chr&gt; &lt;int&gt;
##  1 ence      2
##  2 ethe      2
##  3 reth      2
##  4 1ear      1
##  5 andi      1
##  6 arth      1
##  7 asci      1
##  8 ason      1
##  9 atea      1
## 10 bett      1
## # ... with 94 more rows</code></pre>
</div>
<div id="복수의-단어n-gram" class="section level5" number="7.1.1.0.4">
<h5><span class="header-section-number">7.1.1.0.4</span> 복수의 단어(n-gram)</h5>
<p>복수의 단어를 토콘 단위로 나눌 때는 <code>token =</code>인자에 “ngrams”인자를 투입한다. 기본값은3개이다.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="clean.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">text =</span> text_v) <span class="sc">%&gt;%</span> </span>
<span id="cb16-2"><a href="clean.html#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(<span class="at">output =</span> word, <span class="at">input =</span> text,</span>
<span id="cb16-3"><a href="clean.html#cb16-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">token =</span> <span class="st">&quot;ngrams&quot;</span>, <span class="at">n =</span> <span class="dv">4</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb16-4"><a href="clean.html#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> T)</span></code></pre></div>
<pre><code>## # A tibble: 22 x 2
##    word                         n
##    &lt;chr&gt;                    &lt;int&gt;
##  1 1 earthly reason for         1
##  2 and inspire me you           1
##  3 better you’re the object     1
##  4 desire the 1 earthly         1
##  5 earthly reason for my        1
##  6 fascinate and inspire me     1
##  7 for the better you’re        1
##  8 influence me for the         1
##  9 inspire me you influence     1
## 10 me for the better            1
## # ... with 12 more rows</code></pre>
</div>
<div id="정규표현식" class="section level5" number="7.1.1.0.5">
<h5><span class="header-section-number">7.1.1.0.5</span> 정규표현식</h5>
<p>정규표현식(regex: regular expressions)을 이용하면, 토콘을 보다 다양한 방식으로 나눌 수 있다.</p>
<p><code>token =</code>인자에 “regex”를 지정한다. <code>pattern =</code>에 정규표현식을 투입한다.</p>
<p>정규표현식에서 “new line”을 의미하는 <code>"\n"</code>를 이용해 토큰화할 경우 문장 단위로 토큰화할 경우, 수 있다. 만일 공백 단위로 토큰화한다면, 공백을 의미하는 <code>"\\s"</code>를 투입한다.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="clean.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">text =</span> text_v) <span class="sc">%&gt;%</span> </span>
<span id="cb18-2"><a href="clean.html#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(<span class="at">output =</span> word, <span class="at">input =</span> text,</span>
<span id="cb18-3"><a href="clean.html#cb18-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">token =</span> <span class="st">&quot;regex&quot;</span>, <span class="at">pattern =</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 1
##   word                                                                     
##   &lt;chr&gt;                                                                    
## 1 &quot;you still fascinate and inspire me.&quot;                                    
## 2 &quot;you influence me for the better. &quot;                                      
## 3 &quot;you’re the object of my desire, the #1 earthly reason for my existence.&quot;</code></pre>
</div>
</div>
<div id="format-ctext-man-latex-html-xml" class="section level3" number="7.1.2">
<h3><span class="header-section-number">7.1.2</span> <code>format = c("text", "man", "latex", "html", "xml")</code></h3>
<p><code>format =</code>인자를 이용해 토큰화하는 문서의 형식을 지정할 수 있다.</p>
<p>“html”문서를 토큰화해보자.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="clean.html#cb20-1" aria-hidden="true" tabindex="-1"></a>pp_html_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">text =</span> <span class="fu">read_lines</span>(<span class="st">&quot;https://www.gutenberg.org/files/1342/1342-h/1342-h.htm&quot;</span>))</span>
<span id="cb20-2"><a href="clean.html#cb20-2" aria-hidden="true" tabindex="-1"></a>pp_html_df[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span>
<span id="cb20-3"><a href="clean.html#cb20-3" aria-hidden="true" tabindex="-1"></a>pp_html_df <span class="sc">%&gt;%</span> <span class="fu">unnest_tokens</span>(word, text, <span class="at">format =</span> <span class="st">&quot;html&quot;</span>) <span class="sc">%&gt;%</span> .[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,]</span></code></pre></div>
</div>
<div id="to_lower-true" class="section level3" number="7.1.3">
<h3><span class="header-section-number">7.1.3</span> <code>to_lower = TRUE</code></h3>
<p>영문은 대문자와 소문자 구분이 있다. <code>to_lower =</code>인자의 기본값은 <code>TRUE</code>다. <code>FALSE</code>를 로 지정하면 대문자를 모두 소문자로 변경하지 않는다. 영문문서에서 사람이름이나 지명을 구분해야 한다면 토큰화 과정에서 모든 단어를 소문자화하지 말아야 한다.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="clean.html#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">text =</span> text_v) <span class="sc">%&gt;%</span> </span>
<span id="cb21-2"><a href="clean.html#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(<span class="at">output =</span> word, <span class="at">input =</span> text,</span>
<span id="cb21-3"><a href="clean.html#cb21-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">to_lower =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 25 x 1
##    word     
##    &lt;chr&gt;    
##  1 You      
##  2 still    
##  3 fascinate
##  4 and      
##  5 inspire  
##  6 me       
##  7 You      
##  8 influence
##  9 me       
## 10 for      
## # ... with 15 more rows</code></pre>
</div>
<div id="strip_punct" class="section level3" number="7.1.4">
<h3><span class="header-section-number">7.1.4</span> <code>strip_punct =</code></h3>
<p>추가인자는 <code>tokenizers</code>함수로 전달해 다양한 설정을 할 수 있다. 예를 들어, <code>strip_punct =</code>인자에 <code>FALSE</code>를 투입하면, 문장부호를 제거하지 않는다.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="clean.html#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">text =</span> text_v) <span class="sc">%&gt;%</span> </span>
<span id="cb23-2"><a href="clean.html#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(<span class="at">output =</span> word, <span class="at">input =</span> text,</span>
<span id="cb23-3"><a href="clean.html#cb23-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">token =</span> <span class="st">&quot;words&quot;</span>,</span>
<span id="cb23-4"><a href="clean.html#cb23-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">strip_punct =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 30 x 1
##    word     
##    &lt;chr&gt;    
##  1 you      
##  2 still    
##  3 fascinate
##  4 and      
##  5 inspire  
##  6 me       
##  7 .        
##  8 you      
##  9 influence
## 10 me       
## # ... with 20 more rows</code></pre>
</div>
</div>
<div id="불용어stop-words-제거-1" class="section level2" number="7.2">
<h2><span class="header-section-number">7.2</span> 불용어(stop words) 제거</h2>
<p>불용어는 말 그대로 사용하지 않는 단어다. 불용어를 문자 그대로 해석하면 사용하지 않는 단어에 국한된다. 넓은 의미로 해석하면, 사용빈도가 높아 분석에 의미가 없거나, 내용을 나타내는데 기여하지 않는 단어, 숫자, 특수문자, 구두점, 공백문자, 기호 등이 포함된다.</p>
<p>무엇이 불용어가 돼야 하는지는 상황에 따라 다르다. 에를 들어, 대명사는 대부분의 불용어사전에 불용어로 포함돼 있지만, 분석 목적에 따라서는 대명사는 분석의 핵심단위가 되기도 한다. 기호도 마찬가지다. 기호를 이용한 이모티콘은 문서의 의미를 전달하기 때문에 모든 기호를 일괄적으로 제거해서는 안된다.</p>
<p>앞서 제시한 연애편지를 문자 단위로 토큰화해 단어의 빈도를 계산해보자.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="clean.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">text =</span> text_v) <span class="sc">%&gt;%</span> </span>
<span id="cb25-2"><a href="clean.html#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(<span class="at">output =</span> word, <span class="at">input =</span> text) <span class="sc">%&gt;%</span> </span>
<span id="cb25-3"><a href="clean.html#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 19 x 2
##    word          n
##    &lt;chr&gt;     &lt;int&gt;
##  1 the           3
##  2 for           2
##  3 me            2
##  4 my            2
##  5 you           2
##  6 1             1
##  7 and           1
##  8 better        1
##  9 desire        1
## 10 earthly       1
## 11 existence     1
## 12 fascinate     1
## 13 influence     1
## 14 inspire       1
## 15 object        1
## 16 of            1
## 17 reason        1
## 18 still         1
## 19 you’re        1</code></pre>
<p><code>count</code>로 단어빈도를 계산한 결과를 보면 “the”가 3회, “for,” “me,” “my,” “you”가 각각 2회 사용됐다. 즉, 이 글은 너와 나에 대한 글이런 것을 알수 있다. 사랑고백이란 것이 너와 나의 일이므로 타당하다.</p>
<p>분석결과를 보면 단어빈도로 의미를 파악하는데 불필요한 단어도 있다. “the,” “for,” “of,” “and” 등과 같은 관사, 전치사, 접속사들처럼 자주 사용하는 단어들이다. 이런 단어는 불용어(stop words)로 처리해 분석대상에 제외하는 것이 보다 정확한 의미를 파악하는데 도움이 되는 경우도 있다.</p>
<p>불용어를 제거하는 방법은 크게 두가지가 있는데 혼용한다.</p>
<ul>
<li><p><code>anti_join()</code> 불용어목록을 데이터프레임에 저장한 다음, <code>anti_join()</code>함수를 이용해 텍스트데이터프레임과 배제결합하는 방법이다. 두 데이터프레임에서 겹치는 행을 제외하고 결합(join)한다. 이 경우 불용어 목록에 포함된 행이 제외된다.</p></li>
<li><p><code>filter()</code>함수와 <code>str_detect()</code>함수를 함께 이용해 불용어 지정해 걸러내는 방법이다. 불용어사전에 포함돼 있지 않는 단어를 제거할 때 이용한다.</p></li>
</ul>
<div id="불용어-사전" class="section level3" number="7.2.1">
<h3><span class="header-section-number">7.2.1</span> 불용어 사전</h3>
<p>주로 사용되는 불용어목록은 불용어사전으로 제공된다. <code>tidytext</code>패키지는 <code>stop_words</code>에 불용어를 모아 놓았다. <code>stop_words</code>의 구조부터 살며보자.</p>
<p><code>kableExtra</code>패키지를 이용하면 데이터프레임을 깔끔하게 출력할 수 있다.(<a href="https://cran.r-project.org/web/packages/kableExtra/vignettes/awesome_table_in_html.html">사용법은 여기</a>)</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="clean.html#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;kableExtra&quot;</span>)</span></code></pre></div>
<p>데이터셋을 R세션에 올리는 함수는 <code>data()</code>함수다.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="clean.html#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span></code></pre></div>
<pre><code>## Warning: package &#39;kableExtra&#39; was built under R version 4.0.5</code></pre>
<pre><code>## 
## Attaching package: &#39;kableExtra&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:dplyr&#39;:
## 
##     group_rows</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="clean.html#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(stop_words)</span>
<span id="cb32-2"><a href="clean.html#cb32-2" aria-hidden="true" tabindex="-1"></a>stop_words <span class="sc">%&gt;%</span> <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 1,149
## Columns: 2
## $ word    &lt;chr&gt; &quot;a&quot;, &quot;a&#39;s&quot;, &quot;able&quot;, &quot;about&quot;, &quot;above&quot;, &quot;according&quot;, &quot;accordi...
## $ lexicon &lt;chr&gt; &quot;SMART&quot;, &quot;SMART&quot;, &quot;SMART&quot;, &quot;SMART&quot;, &quot;SMART&quot;, &quot;SMART&quot;, &quot;SMAR...</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="clean.html#cb34-1" aria-hidden="true" tabindex="-1"></a>stop_words[<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">701</span><span class="sc">:</span><span class="dv">703</span>, <span class="dv">1001</span><span class="sc">:</span><span class="dv">1003</span>),] <span class="sc">%&gt;%</span> </span>
<span id="cb34-2"><a href="clean.html#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kbl</span>() <span class="sc">%&gt;%</span> <span class="fu">kable_classic</span>(<span class="at">full_width =</span> F)</span></code></pre></div>
<table class=" lightable-classic" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
word
</th>
<th style="text-align:left;">
lexicon
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
a
</td>
<td style="text-align:left;">
SMART
</td>
</tr>
<tr>
<td style="text-align:left;">
a’s
</td>
<td style="text-align:left;">
SMART
</td>
</tr>
<tr>
<td style="text-align:left;">
able
</td>
<td style="text-align:left;">
SMART
</td>
</tr>
<tr>
<td style="text-align:left;">
during
</td>
<td style="text-align:left;">
snowball
</td>
</tr>
<tr>
<td style="text-align:left;">
before
</td>
<td style="text-align:left;">
snowball
</td>
</tr>
<tr>
<td style="text-align:left;">
after
</td>
<td style="text-align:left;">
snowball
</td>
</tr>
<tr>
<td style="text-align:left;">
parted
</td>
<td style="text-align:left;">
onix
</td>
</tr>
<tr>
<td style="text-align:left;">
parting
</td>
<td style="text-align:left;">
onix
</td>
</tr>
<tr>
<td style="text-align:left;">
parts
</td>
<td style="text-align:left;">
onix
</td>
</tr>
</tbody>
</table>
<p><code>stop_words</code>는 행이 1,149개(불용어 1,149개)이고, 열이 2개(word와 lexicon)인 데이터프레임이다. word열에 있는 단어가 불용어고, lexicon열에 있는 값은 불용어 용어집의 이름이다. <code>tidytext</code>패키지의 <code>stop_words</code>에는 세 개의 불용어 용어집(SMART, snowball, onix) 이 포함돼 있다. <code>filter</code>함수로 특정 용어집에 있는 불용어 사전만 골라 이용할 수 있다.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="clean.html#cb35-1" aria-hidden="true" tabindex="-1"></a>stop_words<span class="sc">$</span>lexicon <span class="sc">%&gt;%</span> unique</span></code></pre></div>
<pre><code>## [1] &quot;SMART&quot;    &quot;snowball&quot; &quot;onix&quot;</code></pre>
<p>불용어사전으로 불용어를 걸러낸 다음 단어빈도를 계산해보자.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="clean.html#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(stop_words)</span>
<span id="cb37-2"><a href="clean.html#cb37-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-3"><a href="clean.html#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">text =</span> text_v) <span class="sc">%&gt;%</span></span>
<span id="cb37-4"><a href="clean.html#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(<span class="at">output =</span> word, <span class="at">input =</span> text) <span class="sc">%&gt;%</span> </span>
<span id="cb37-5"><a href="clean.html#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(stop_words) <span class="sc">%&gt;%</span> </span>
<span id="cb37-6"><a href="clean.html#cb37-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## Joining, by = &quot;word&quot;</code></pre>
<pre><code>## # A tibble: 10 x 2
##    word          n
##    &lt;chr&gt;     &lt;int&gt;
##  1 1             1
##  2 desire        1
##  3 earthly       1
##  4 existence     1
##  5 fascinate     1
##  6 influence     1
##  7 inspire       1
##  8 object        1
##  9 reason        1
## 10 you’re        1</code></pre>
<p>결과를 보면 “you”등 대명사가 포함된 토큰은 모두 제거됐는데, “you’re”는 그대로 남아 있다. 불용어 사전에는 “you’re”로 홑따옴표(quotation mark)<code>'</code>를 이용했는데, 본문에는 “you’re”로 홑낫표(aphostrophe)<code>’</code>를 이용했기 때문이다. 불용어사전으로 본문의 “you’re”를 제거하기 위해서는 둘 중 한가지는 해야 한다. 본몬의 홑낫표를 홑따옴표로 변경하거나, 불용어사전을 수정한다.</p>
<div id="본문-수정" class="section level4" number="7.2.1.1">
<h4><span class="header-section-number">7.2.1.1</span> 본문 수정</h4>
<p>먼저 본문 수정을 해보자.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="clean.html#cb40-1" aria-hidden="true" tabindex="-1"></a>tapo_v <span class="ot">&lt;-</span> text_v <span class="sc">%&gt;%</span> <span class="fu">str_replace_all</span>(<span class="st">&quot;’&quot;</span>, <span class="st">&quot;&#39;&quot;</span>)</span>
<span id="cb40-2"><a href="clean.html#cb40-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-3"><a href="clean.html#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">text =</span> tapo_v) <span class="sc">%&gt;%</span></span>
<span id="cb40-4"><a href="clean.html#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(<span class="at">output =</span> word, <span class="at">input =</span> text) <span class="sc">%&gt;%</span> </span>
<span id="cb40-5"><a href="clean.html#cb40-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(stop_words) <span class="sc">%&gt;%</span> </span>
<span id="cb40-6"><a href="clean.html#cb40-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## Joining, by = &quot;word&quot;</code></pre>
<pre><code>## # A tibble: 9 x 2
##   word          n
##   &lt;chr&gt;     &lt;int&gt;
## 1 1             1
## 2 desire        1
## 3 earthly       1
## 4 existence     1
## 5 fascinate     1
## 6 influence     1
## 7 inspire       1
## 8 object        1
## 9 reason        1</code></pre>
</div>
<div id="불용어-사전-수정1" class="section level4" number="7.2.1.2">
<h4><span class="header-section-number">7.2.1.2</span> 불용어 사전 수정1</h4>
<p>불용어 사전에 “you’re”를 추가해보자. 데이터프레임을 만들어 <code>bind_rows()</code>로 데이터프레임을 결합할수도 있고, <code>add_row()</code>로 불용사전에 열을 곧바로 추가할수도 있다.</p>
<p>먼저 <code>add_row()</code>로 행에 곧바로 추가하는 방법을 이용해보자. 추가됐는지 확인이 수월하도록 첫째행 전에 추가하자.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="clean.html#cb43-1" aria-hidden="true" tabindex="-1"></a>stop_words <span class="sc">%&gt;%</span> <span class="fu">add_row</span>(<span class="at">word =</span> <span class="st">&quot;you’re&quot;</span>, <span class="at">lexicon =</span> <span class="st">&quot;NEW&quot;</span>, <span class="at">.before =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">3</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##   word   lexicon
##   &lt;chr&gt;  &lt;chr&gt;  
## 1 you’re NEW    
## 2 a      SMART  
## 3 a&#39;s    SMART</code></pre>
<p>이번에는 데이터프레임을 결합해보자. 또한 숫자 “1”도 함께 불용어사전에 추가하자.
먼저 추가할 용어를 불용어사전과 같은 구조의 데이터프레임에 저장한다.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="clean.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(stop_words)</span></code></pre></div>
<pre><code>## [1] &quot;word&quot;    &quot;lexicon&quot;</code></pre>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="clean.html#cb47-1" aria-hidden="true" tabindex="-1"></a>stop_add <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">word =</span> <span class="fu">c</span>(<span class="st">&quot;you’re&quot;</span>, <span class="st">&quot;1&quot;</span>),</span>
<span id="cb47-2"><a href="clean.html#cb47-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">lexicon =</span> <span class="st">&quot;added&quot;</span>)</span>
<span id="cb47-3"><a href="clean.html#cb47-3" aria-hidden="true" tabindex="-1"></a>stop_add</span></code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   word   lexicon
##   &lt;chr&gt;  &lt;chr&gt;  
## 1 you’re added  
## 2 1      added</code></pre>
<p><code>bind_rows()</code>함수로 불용어사전과 결합한다.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="clean.html#cb49-1" aria-hidden="true" tabindex="-1"></a>stop_words2 <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(stop_words, stop_add)</span>
<span id="cb49-2"><a href="clean.html#cb49-2" aria-hidden="true" tabindex="-1"></a>stop_words2 <span class="sc">%&gt;%</span> <span class="fu">tail</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 x 2
##   word     lexicon
##   &lt;chr&gt;    &lt;chr&gt;  
## 1 younger  onix   
## 2 youngest onix   
## 3 your     onix   
## 4 yours    onix   
## 5 you’re   added  
## 6 1        added</code></pre>
<p>새로 만든 불용어사전으로 정체한 후 단어 빈도를 계산해보자.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="clean.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">text =</span> text_v) <span class="sc">%&gt;%</span></span>
<span id="cb51-2"><a href="clean.html#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(<span class="at">output =</span> word, <span class="at">input =</span> text) <span class="sc">%&gt;%</span> </span>
<span id="cb51-3"><a href="clean.html#cb51-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(stop_words2) <span class="sc">%&gt;%</span> </span>
<span id="cb51-4"><a href="clean.html#cb51-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## Joining, by = &quot;word&quot;</code></pre>
<pre><code>## # A tibble: 8 x 2
##   word          n
##   &lt;chr&gt;     &lt;int&gt;
## 1 desire        1
## 2 earthly       1
## 3 existence     1
## 4 fascinate     1
## 5 influence     1
## 6 inspire       1
## 7 object        1
## 8 reason        1</code></pre>
<p>“you’re”와 숫자가 모두 제거됐다.</p>
</div>
<div id="불용어-사전-수정2" class="section level4" number="7.2.1.3">
<h4><span class="header-section-number">7.2.1.3</span> 불용어 사전 수정2</h4>
<p>통상적으로 쓰이는 불용어 중에는 실은 문서의 의미를 파악하는데 중요한 단서를 제공하는 단어도 있다. “you” “me” “my” 등과 같은 대명사는 흔하게 사용되기 때문에 불용어로 분류되지만, 맥락를 파악하는데 중요한 역할을 하기도 한다. 불용어 사전에서 대명사를 찾아 불용어 사전에서 제거하자.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="clean.html#cb54-1" aria-hidden="true" tabindex="-1"></a>stop_words<span class="sc">$</span>word <span class="sc">%&gt;%</span> </span>
<span id="cb54-2"><a href="clean.html#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_subset</span>(<span class="st">&quot;(^i$|^i[:punct:]+|^mys*|^me$|mine)&quot;</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;i&quot;      &quot;i&#39;d&quot;    &quot;i&#39;ll&quot;   &quot;i&#39;m&quot;    &quot;i&#39;ve&quot;   &quot;me&quot;     &quot;my&quot;     &quot;myself&quot;
##  [9] &quot;i&quot;      &quot;me&quot;     &quot;my&quot;     &quot;myself&quot; &quot;i&#39;m&quot;    &quot;i&#39;ve&quot;   &quot;i&#39;d&quot;    &quot;i&#39;ll&quot;  
## [17] &quot;i&quot;      &quot;me&quot;     &quot;my&quot;     &quot;myself&quot;</code></pre>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="clean.html#cb56-1" aria-hidden="true" tabindex="-1"></a>stop_words3 <span class="ot">&lt;-</span> stop_words <span class="sc">%&gt;%</span> </span>
<span id="cb56-2"><a href="clean.html#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb56-3"><a href="clean.html#cb56-3" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span><span class="fu">str_detect</span>(word, <span class="st">&quot;(^i$|^i[:punct:]+|^mys*|^me$|^mine$)&quot;</span>),</span>
<span id="cb56-4"><a href="clean.html#cb56-4" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb56-5"><a href="clean.html#cb56-5" aria-hidden="true" tabindex="-1"></a>stop_words3<span class="sc">$</span>word <span class="sc">%&gt;%</span> </span>
<span id="cb56-6"><a href="clean.html#cb56-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_subset</span>(<span class="st">&quot;^i&quot;</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;ie&quot;          &quot;if&quot;          &quot;ignored&quot;     &quot;immediate&quot;   &quot;in&quot;         
##  [6] &quot;inasmuch&quot;    &quot;inc&quot;         &quot;indeed&quot;      &quot;indicate&quot;    &quot;indicated&quot;  
## [11] &quot;indicates&quot;   &quot;inner&quot;       &quot;insofar&quot;     &quot;instead&quot;     &quot;into&quot;       
## [16] &quot;inward&quot;      &quot;is&quot;          &quot;isn&#39;t&quot;       &quot;it&quot;          &quot;it&#39;d&quot;       
## [21] &quot;it&#39;ll&quot;       &quot;it&#39;s&quot;        &quot;its&quot;         &quot;itself&quot;      &quot;it&quot;         
## [26] &quot;its&quot;         &quot;itself&quot;      &quot;is&quot;          &quot;it&#39;s&quot;        &quot;isn&#39;t&quot;      
## [31] &quot;if&quot;          &quot;into&quot;        &quot;in&quot;          &quot;if&quot;          &quot;important&quot;  
## [36] &quot;in&quot;          &quot;interest&quot;    &quot;interested&quot;  &quot;interesting&quot; &quot;interests&quot;  
## [41] &quot;into&quot;        &quot;is&quot;          &quot;it&quot;          &quot;its&quot;         &quot;itself&quot;</code></pre>
</div>
<div id="불용어-목록-만들기" class="section level4" number="7.2.1.4">
<h4><span class="header-section-number">7.2.1.4</span> 불용어 목록 만들기</h4>
<p>제거하고 싶은 불용어를 최소화하고 싶을 때는 불용어 목록을 직접 만들수도 있다. “the, for, and”등이 포함된 불용어 목록을 만들어 정제해 보자. “the, for, and”등 불용어목록을 데이터프레임에 저장한 다음, <code>anti_join()</code>함수를 이용해 토큰데이터프레임과 배제결합한다.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="clean.html#cb58-1" aria-hidden="true" tabindex="-1"></a>stop_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">word =</span> <span class="fu">c</span>(<span class="st">&quot;the&quot;</span>,<span class="st">&quot;for&quot;</span>, <span class="st">&quot;and&quot;</span>))</span>
<span id="cb58-2"><a href="clean.html#cb58-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-3"><a href="clean.html#cb58-3" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">text =</span> text_v) <span class="sc">%&gt;%</span> </span>
<span id="cb58-4"><a href="clean.html#cb58-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(<span class="at">output =</span> word, <span class="at">input =</span> text) <span class="sc">%&gt;%</span> </span>
<span id="cb58-5"><a href="clean.html#cb58-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(stop_df) <span class="sc">%&gt;%</span> </span>
<span id="cb58-6"><a href="clean.html#cb58-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_detect</span>(word, <span class="st">&quot;</span><span class="sc">\\</span><span class="st">d+&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb58-7"><a href="clean.html#cb58-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## Joining, by = &quot;word&quot;</code></pre>
<pre><code>## # A tibble: 15 x 2
##    word          n
##    &lt;chr&gt;     &lt;int&gt;
##  1 me            2
##  2 my            2
##  3 you           2
##  4 better        1
##  5 desire        1
##  6 earthly       1
##  7 existence     1
##  8 fascinate     1
##  9 influence     1
## 10 inspire       1
## 11 object        1
## 12 of            1
## 13 reason        1
## 14 still         1
## 15 you’re        1</code></pre>
</div>
</div>
<div id="filter" class="section level3" number="7.2.2">
<h3><span class="header-section-number">7.2.2</span> <code>filter()</code></h3>
<p><code>filter()</code>함수를 이용해 불용어사전을 수정하지 않고 불용어를 추가로 제거할 수 있다.</p>
<p>예를 들어, 숫자를 불용어로 취급해 제거하는 상황에서 숫자를 불용어 사전에 넣지 말고 <code>filter()</code>로 걸러보자. 정규표현식(regex: regular expression)에서 숫자를 의미하는 <code>[:digit:]</code> 또는 <code>\\d</code>를 이용해 <code>filter()</code>함수와 <code>str_detect()</code>함수 및 부정연산자 <code>!</code>를 이용해 걸러낸다.</p>
<p><code>filter()</code>함수를 <code>str_detect()</code>함수와 함께 이용하는 이유는 다음과 같다.</p>
<p><code>str_subset()</code>함수는 패턴이 일치하는 문자를 출력하는 반면, <code>str_detect()</code>함수는 패턴이 일치하는 문자에 대한 논리값(TRUE or FALSE)을 출력한다.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="clean.html#cb61-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">text =</span> text_v) <span class="sc">%&gt;%</span></span>
<span id="cb61-2"><a href="clean.html#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(<span class="at">output =</span> word, <span class="at">input =</span> text) <span class="sc">%&gt;%</span> </span>
<span id="cb61-3"><a href="clean.html#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(stop_words)</span></code></pre></div>
<pre><code>## Joining, by = &quot;word&quot;</code></pre>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="clean.html#cb63-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>word <span class="sc">%&gt;%</span> <span class="fu">str_subset</span>(<span class="at">pattern =</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">d+&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;1&quot;</code></pre>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="clean.html#cb65-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>word <span class="sc">%&gt;%</span> <span class="fu">str_detect</span>(<span class="at">pattern =</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">d+&quot;</span>)</span></code></pre></div>
<pre><code>##  [1] FALSE FALSE FALSE FALSE FALSE FALSE  TRUE FALSE FALSE FALSE</code></pre>
<p>불용어를 제거한 다음 추가로 본문에서 숫자와 홑낫표“’”가 포함된 문제를 제거하자.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="clean.html#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">text =</span> text_v) <span class="sc">%&gt;%</span></span>
<span id="cb67-2"><a href="clean.html#cb67-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(<span class="at">output =</span> word, <span class="at">input =</span> text) <span class="sc">%&gt;%</span> </span>
<span id="cb67-3"><a href="clean.html#cb67-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(stop_words) <span class="sc">%&gt;%</span> </span>
<span id="cb67-4"><a href="clean.html#cb67-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb67-5"><a href="clean.html#cb67-5" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span><span class="fu">str_detect</span>(word, <span class="at">pattern =</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">d+&quot;</span>),</span>
<span id="cb67-6"><a href="clean.html#cb67-6" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span><span class="fu">str_detect</span>(word, <span class="at">pattern =</span> <span class="st">&quot;you’re&quot;</span>)</span>
<span id="cb67-7"><a href="clean.html#cb67-7" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb67-8"><a href="clean.html#cb67-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## Joining, by = &quot;word&quot;</code></pre>
<pre><code>## # A tibble: 8 x 2
##   word          n
##   &lt;chr&gt;     &lt;int&gt;
## 1 desire        1
## 2 earthly       1
## 3 existence     1
## 4 fascinate     1
## 5 influence     1
## 6 inspire       1
## 7 object        1
## 8 reason        1</code></pre>
</div>
</div>
<div id="정규화normalization-1" class="section level2" number="7.3">
<h2><span class="header-section-number">7.3</span> 정규화(Normalization)</h2>
<div id="개괄-4" class="section level3" number="7.3.1">
<h3><span class="header-section-number">7.3.1</span> 개괄</h3>
<p>정규화는 추출한 단어를 일정한 틀로 규격화하는 작업이다. 한 단어는 문법적인 기능에 따라 다양한 표현이 있다. ‘먹다’에는 ’먹었니’ ‘먹었다’ ‘먹고’ 등의 표현이 있다. ‘I’는 격에 따라 ’my’ ‘me’ ‘mine’ 등의 변형이 있다. 다양한 표현이 같은 의미를 나타낸다면 정규화를 통해 일정한 틀로 규격화해야 한다.</p>
<p>정규화는 형태소(morpheme) 추출, 어간(stem) 추출, 표제어(lemme) 추출 등을 이용해 달성할 수 있다.</p>
<ul>
<li>단어(word): 형태소의 집합. 자립이 가능한 최소 형태(예: 사과나무)</li>
<li>형태소(morpheme): 뜻을 지닌 가장 작은 말의 단위. 예를 들어, ’사과나무’는 ’사과’와 ’나무’로 나눠도 뜻을 지니지만, ’사과’를 ’사’와 ’과’로 나누면 의미가 사라진다.</li>
<li>어기(base): 어근과 어간 등 단어에서 실질적인 의미를 나타내는 형태소
<ul>
<li>어근(root) 어미와 직접결합이 안되는 어기. 예: ‘급하다’의 ’급’ ‘시원하다’의 ’시원.’</li>
<li>어간(stem) 어미와 직접결합이 되는 어기. 예: ‘뛰어라’의 ’뛰-.’ ‘먹다’의 ’먹-.’</li>
</ul></li>
<li>표제어(lemme) 사전에 등재된 대표단어. 원형 혹은 기본형(canonical form)이라고도 한다.</li>
</ul>
</div>
<div id="형태소morpheme" class="section level3" number="7.3.2">
<h3><span class="header-section-number">7.3.2</span> 형태소(morpheme)</h3>
<p>형태소는 뜻을 지난 가장 작은 말의 단위다.
‘바지가 크다’는 문장에서 단어는 ’바지’ ‘가’ ‘크다’가 있다. 형태소는 ’바지’ ‘가’ ‘크’ ‘다’로 구분할 수 있다. 명사인 ’바지’를 ’바’와 ’지’로 나누면 ’아랫도리에 입는 옷’이란 의미가 사라진다. 반면 형용사인 ’크다’에는 어간인 ’크-’에 ’크다’는 의미가 담겨 있고,’-다’에는 문장을 마무리하는 의미가 담겨 있다.</p>
<div id="품사태깅parts-of-speech-tagging-pos-tagging" class="section level5" number="7.3.2.0.1">
<h5><span class="header-section-number">7.3.2.0.1</span> 품사태깅(Parts of Speech Tagging: PoS Tagging)</h5>
<p>형태소를 추출하기 위해서 문장의 단어에 품사를 붙인다(tag).</p>
<p>형태소 분석기마다 품사태깅의 방법이 조금씩 다르다. 한나눔(Hannaum)은 크게 9개 품사로 분류한뒤 22개로 세부 분류했다. Mecab-ko는 43개로 분류했다.</p>
<ul>
<li><a href="https://docs.google.com/spreadsheets/d/1OGAjUvalBuX-oZvZ_-9tEfYD2gQe7hTGsgUpiiBSXI8/edit#gid=0">한국어 품사 태그 비교표</a></li>
</ul>
<p>한나눔과 MeCab-ko의 품사태그 (Table <a href="clean.html#tab:postag">7.1</a>).</p>
<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:postag">Table 7.1: </span>한나눔과 MeCab-ko의 한국어 품사 태그 비교
</caption>
<thead>
<tr>
<th style="text-align:left;">
Hannanum09
</th>
<th style="text-align:left;">
(ntags=9)
</th>
<th style="text-align:left;">
Hannanum22
</th>
<th style="text-align:left;">
(ntags=22)
</th>
<th style="text-align:left;">
Mecab-ko
</th>
<th style="text-align:left;">
(ntags=43)
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Tag
</td>
<td style="text-align:left;">
Description
</td>
<td style="text-align:left;">
Tag
</td>
<td style="text-align:left;">
Description
</td>
<td style="text-align:left;">
Tag
</td>
<td style="text-align:left;">
Description
</td>
</tr>
<tr>
<td style="text-align:left;">
N
</td>
<td style="text-align:left;">
체언
</td>
<td style="text-align:left;">
NC
</td>
<td style="text-align:left;">
보통명사
</td>
<td style="text-align:left;">
NNG
</td>
<td style="text-align:left;">
일반 명사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
NQ
</td>
<td style="text-align:left;">
고유명사
</td>
<td style="text-align:left;">
NNP
</td>
<td style="text-align:left;">
고유 명사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
NB
</td>
<td style="text-align:left;">
의존명사
</td>
<td style="text-align:left;">
NNB
</td>
<td style="text-align:left;">
의존 명사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
NNBC
</td>
<td style="text-align:left;">
단위를 나타내는 명사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
NN
</td>
<td style="text-align:left;">
수사
</td>
<td style="text-align:left;">
NR
</td>
<td style="text-align:left;">
수사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
NP
</td>
<td style="text-align:left;">
대명사
</td>
<td style="text-align:left;">
NP
</td>
<td style="text-align:left;">
대명사
</td>
</tr>
<tr>
<td style="text-align:left;">
P
</td>
<td style="text-align:left;">
용언
</td>
<td style="text-align:left;">
PV
</td>
<td style="text-align:left;">
동사
</td>
<td style="text-align:left;">
VV
</td>
<td style="text-align:left;">
동사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
PA
</td>
<td style="text-align:left;">
형용사
</td>
<td style="text-align:left;">
VA
</td>
<td style="text-align:left;">
형용사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
PX
</td>
<td style="text-align:left;">
보조 용언
</td>
<td style="text-align:left;">
VX
</td>
<td style="text-align:left;">
보조 용언
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
VCP
</td>
<td style="text-align:left;">
긍정 지정사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
VCN
</td>
<td style="text-align:left;">
부정 지정사
</td>
</tr>
<tr>
<td style="text-align:left;">
M
</td>
<td style="text-align:left;">
수식언
</td>
<td style="text-align:left;">
MM
</td>
<td style="text-align:left;">
관형사
</td>
<td style="text-align:left;">
MM
</td>
<td style="text-align:left;">
관형사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
MA
</td>
<td style="text-align:left;">
부사
</td>
<td style="text-align:left;">
MAG
</td>
<td style="text-align:left;">
일반 부사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
MAJ
</td>
<td style="text-align:left;">
접속 부사
</td>
</tr>
<tr>
<td style="text-align:left;">
I
</td>
<td style="text-align:left;">
독립언
</td>
<td style="text-align:left;">
II
</td>
<td style="text-align:left;">
감탄사
</td>
<td style="text-align:left;">
IC
</td>
<td style="text-align:left;">
감탄사
</td>
</tr>
<tr>
<td style="text-align:left;">
J
</td>
<td style="text-align:left;">
관계언
</td>
<td style="text-align:left;">
JC
</td>
<td style="text-align:left;">
격조사
</td>
<td style="text-align:left;">
JKS
</td>
<td style="text-align:left;">
주격 조사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
JKC
</td>
<td style="text-align:left;">
보격 조사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
JKG
</td>
<td style="text-align:left;">
관형격 조사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
JKO
</td>
<td style="text-align:left;">
목적격 조사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
JKB
</td>
<td style="text-align:left;">
부사격 조사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
JKV
</td>
<td style="text-align:left;">
호격 조사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
JKQ
</td>
<td style="text-align:left;">
인용격 조사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
JC
</td>
<td style="text-align:left;">
접속 조사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
JX
</td>
<td style="text-align:left;">
보조사
</td>
<td style="text-align:left;">
JX
</td>
<td style="text-align:left;">
보조사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
JP
</td>
<td style="text-align:left;">
서술격 조사
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
E
</td>
<td style="text-align:left;">
어미
</td>
<td style="text-align:left;">
EP
</td>
<td style="text-align:left;">
선어말어미
</td>
<td style="text-align:left;">
EP
</td>
<td style="text-align:left;">
선어말어미
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
EF
</td>
<td style="text-align:left;">
종결 어미
</td>
<td style="text-align:left;">
EF
</td>
<td style="text-align:left;">
종결 어미
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
EC
</td>
<td style="text-align:left;">
연결 어미
</td>
<td style="text-align:left;">
EC
</td>
<td style="text-align:left;">
연결 어미
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
ET
</td>
<td style="text-align:left;">
전성 어미
</td>
<td style="text-align:left;">
ETN
</td>
<td style="text-align:left;">
명사형 전성 어미
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
ETM
</td>
<td style="text-align:left;">
관형형 전성 어미
</td>
</tr>
<tr>
<td style="text-align:left;">
X
</td>
<td style="text-align:left;">
접사
</td>
<td style="text-align:left;">
XP
</td>
<td style="text-align:left;">
접두사
</td>
<td style="text-align:left;">
XPN
</td>
<td style="text-align:left;">
체언 접두사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
XS
</td>
<td style="text-align:left;">
접미사
</td>
<td style="text-align:left;">
XSN
</td>
<td style="text-align:left;">
명사파생 접미사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
XSV
</td>
<td style="text-align:left;">
동사 파생 접미사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
XSA
</td>
<td style="text-align:left;">
형용사 파생 접미사
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
XR
</td>
<td style="text-align:left;">
어근
</td>
</tr>
<tr>
<td style="text-align:left;">
S
</td>
<td style="text-align:left;">
기호
</td>
<td style="text-align:left;">
S
</td>
<td style="text-align:left;">
기호
</td>
<td style="text-align:left;">
SF
</td>
<td style="text-align:left;">
마침표, 물음표, 느낌표
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
SE
</td>
<td style="text-align:left;">
줄임표 …
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
SSO
</td>
<td style="text-align:left;">
여는 괄호 (, [
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
SSC
</td>
<td style="text-align:left;">
닫는 괄호 ), ]
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
SC
</td>
<td style="text-align:left;">
구분자 , · / :
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
SY
</td>
<td style="text-align:left;">
기타 기호
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
SH
</td>
<td style="text-align:left;">
한자
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
SL
</td>
<td style="text-align:left;">
외국어
</td>
</tr>
<tr>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
SN
</td>
<td style="text-align:left;">
숫자
</td>
</tr>
<tr>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
외국어
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
외국어
</td>
<td style="text-align:left;">
</td>
<td style="text-align:left;">
</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="형태소-추출" class="section level3" number="7.3.3">
<h3><span class="header-section-number">7.3.3</span> 형태소 추출</h3>
<p>정규화는 형태소를 추출해 달성할 수 있다. R의 대표적인 형태소 분석기로는 <code>RcppMeCab</code>와 <code>KoNLP</code>가 있다.</p>
<div id="rcppmecab" class="section level4" number="7.3.3.1">
<h4><span class="header-section-number">7.3.3.1</span> <code>RcppMeCab</code></h4>
<p>한국어뿐 아니라 일본어와 중국어 형태소 분석도 가능하고 실행속도가 빠르다.<br />
일본교토대학정보학연구대학원과 일본전신전화의 커뮤니케이션기본과학연구소가 공동으로 개발한 오픈소스 형태소 분석기 <a href="https://taku910.github.io/mecab/"><code>MeCab</code></a> 기반이다. <a href="https://bitbucket.org/eunjeon/mecab-ko-dic/src/master/">은전</a> 프로젝트로 한국어 형태소를 분석할수 있게 개발했다. <a href="https://github.com/junhewk/RcppMeCab"><code>RcppMeCab</code>패키지</a>는 <code>MeCab</code>을 R에서 사용할 수 있도록 한 패키지다. 일본어 기반이라 띄어쓰기에 덜 민감하다.</p>
</div>
<div id="konlp" class="section level4" number="7.3.3.2">
<h4><span class="header-section-number">7.3.3.2</span> <code>KoNLP</code></h4>
<p>Java 기반의 한나눔(Hannanum) 분석기 기반이다. 널리 사용되는 형태소분석기다. NIADic, Sejong등 사전을 선택할 수 있다. <a href="https://github.com/haven-jeon/KoNLP/blob/master/etcs/KoNLP-API.md">사용설명서</a>가 있고, 사용자 사전을 수정하기 용이하다.</p>
</div>
</div>
<div id="rcppmecab-1" class="section level3" number="7.3.4">
<h3><span class="header-section-number">7.3.4</span> RcppMeCab</h3>
<p><code>RcppMeCab</code>패키지를 설치하고 실행하자. 설치되는 기본폴더는 <code>C:\mecab</code>다. 설치폴더를 변경하지 않는다.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="clean.html#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&#39;RcppMeCab&#39;</span>)</span></code></pre></div>
<p><strong>주의</strong></p>
<p>C드라이브에 <code>C:\mecab</code>폴더가 생성됐는지 확인한다. 사전파일이 이곳에 있다. 만일 <code>C:\mecab</code>폴더가 생성되지 않았다면 설치가 안된것이다. RStudio를 관리자권한으로 실행해 설치한다.</p>
<p>만일, RStudio를 관리자권한으로 실행해 설치해도 <code>C:\mecab</code>가 생성되지 않는경우, <a href="https://1drv.ms/u/s!AkK5d7f0xyCHkH1yCmXI_sHq4T8V?e=uZWpey">이 링크</a>에서 사전파일을 다운로드 받아 파일을 압축해제해 복사한다. <code>C:\mecab</code>가 생성되고, 이 폴더 바로 아래에 <code>libmecab.dll</code>파일과 <code>mecab-ko-dic</code>폴더가 생성돼 있어야 한다.</p>
<p>기본함수는 <code>pos()</code>다. 문자벡터를 받아 리스트로 산출한다.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="clean.html#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RcppMeCab)</span>
<span id="cb71-2"><a href="clean.html#cb71-2" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> <span class="st">&quot;한글 테스트 입니다.&quot;</span></span>
<span id="cb71-3"><a href="clean.html#cb71-3" aria-hidden="true" tabindex="-1"></a><span class="fu">pos</span>(test)</span></code></pre></div>
<pre><code>## $`&lt;c7&gt;&lt;U+0471&gt;&lt;db&gt; &lt;c5&gt;&lt;U+05FD&gt;&lt;U+00BA&gt;&lt;U+01AE&gt; &lt;c0&gt;&lt;U+0534&gt;&lt;U+03F4&gt;&lt;d9&gt;.`
## [1] &quot;&lt;c7&gt;&lt;d1&gt;/SL&quot; &quot;&lt;U+00B1&gt;&lt;db&gt; /SY&quot; &quot;&lt;c5&gt;&lt;d7&gt;/SL&quot; &quot;&lt;U+00BD&gt;&lt;U+00BA&gt;/SY&quot; &quot;&lt;U+01AE&gt;/SL&quot;
## [6] &quot;&lt;c0&gt;&lt;U+0534&gt;/SY&quot; &quot;&lt;U+03F4&gt;/SL&quot; &quot;&lt;d9&gt;./SY&quot;</code></pre>
<p>한글이 깨지는 경우가 있는데, 이는 한글인코딩 방식이 맞지 않기 때문이다. 윈도는 EUC-KR방식을 확장한 CP949방식을 사용하기 때문에 UTF-8방식과 호환이 안된다. 이 경우 <code>enc2utf8</code>함수를 이용해 한글인코딩 방식을 UTF-8으로 변경한다.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="clean.html#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb73-2"><a href="clean.html#cb73-2" aria-hidden="true" tabindex="-1"></a>test_v <span class="ot">&lt;-</span> <span class="fu">enc2utf8</span>(test)</span>
<span id="cb73-3"><a href="clean.html#cb73-3" aria-hidden="true" tabindex="-1"></a>test_v <span class="sc">%&gt;%</span> pos</span></code></pre></div>
<pre><code>## $`한글 테스트 입니다.`
## [1] &quot;한글/NNG&quot;      &quot;테스트/NNG&quot;    &quot;입니다/VCP+EF&quot; &quot;./SF&quot;</code></pre>
<p>참고: UTF-8을 CP949로 인코딩을 바꾸고 싶으면 <code>iconv</code>함수를 이용한다.</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="clean.html#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">iconv</span>(x, <span class="at">from =</span> <span class="st">&quot;UTF-8&quot;</span>, <span class="at">to =</span> <span class="st">&quot;CP949&quot;</span>)<span class="st">`</span></span></code></pre></div>
<p><code>x</code>는 문자벡터. 자세한 사용법은 <code>?iconv</code> 참조.</p>
<div id="join-false" class="section level4" number="7.3.4.1">
<h4><span class="header-section-number">7.3.4.1</span> <code>join = FALSE</code></h4>
<p><code>join = FALSE</code>인자를 이용하면 품사태그를 제외하고 형태소만 산출한다.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="clean.html#cb76-1" aria-hidden="true" tabindex="-1"></a>test_v <span class="sc">%&gt;%</span> <span class="fu">pos</span>(<span class="at">join =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## $`한글 테스트 입니다.`
##      NNG      NNG   VCP+EF       SF 
##   &quot;한글&quot; &quot;테스트&quot; &quot;입니다&quot;      &quot;.&quot;</code></pre>
</div>
<div id="format-data.frame" class="section level4" number="7.3.4.2">
<h4><span class="header-section-number">7.3.4.2</span> <code>format = "data.frame"</code></h4>
<p><code>format = "data.frame"</code>을 지정하면 데이터프레임으로 산출한다.</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="clean.html#cb78-1" aria-hidden="true" tabindex="-1"></a>test_v <span class="sc">%&gt;%</span> <span class="fu">pos</span>(<span class="at">format =</span> <span class="st">&quot;data.frame&quot;</span>)</span></code></pre></div>
<pre><code>##   doc_id sentence_id token_id  token    pos subtype
## 1      1           1        1   한글    NNG        
## 2      1           1        2 테스트    NNG    행위
## 3      1           1        3 입니다 VCP+EF        
## 4      1           1        4      .     SF</code></pre>
</div>
<div id="posparallelx" class="section level4" number="7.3.4.3">
<h4><span class="header-section-number">7.3.4.3</span> <code>posParallel(x)</code></h4>
<p><code>posParallel()</code>함수는 메모리를 많이 사용하지만 처리속도가 빠르다.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="clean.html#cb80-1" aria-hidden="true" tabindex="-1"></a>test_v <span class="sc">%&gt;%</span> <span class="fu">posParallel</span>(<span class="at">format =</span> <span class="st">&quot;data.frame&quot;</span>)</span></code></pre></div>
<pre><code>##   doc_id sentence_id token_id  token    pos subtype
## 1      1           1        1   한글    NNG        
## 2      1           1        2 테스트    NNG    행위
## 3      1           1        3 입니다 VCP+EF        
## 4      1           1        4      .     SF</code></pre>
</div>
</div>
<div id="konlp-1" class="section level3" number="7.3.5">
<h3><span class="header-section-number">7.3.5</span> <code>KoNLP</code></h3>
<p>형태소 분석기 한나눔(Hannanum)을 R에서 사용할 수 있도록한 패키지다. CRAN에서 내려져 있기 때문에 <a href="https://github.com/haven-jeon/KoNLP">개발자 깃헙</a>에서 <code>remote</code>패키지의 <code>install_github()</code>함수를 이용해 설치한다.</p>
<p><code>KoNLP</code>를 설치하기 위해서는 자바와 <code>rtools</code>가 필요하다.</p>
<div id="자바jdk" class="section level4" number="7.3.5.1">
<h4><span class="header-section-number">7.3.5.1</span> 자바JDK</h4>
<ol style="list-style-type: decimal">
<li><a href="https://www.oracle.com/java/technologies/javase-downloads.html">자바JDK</a>를 다운로드받아 설치한다.</li>
</ol>
<p><code>jdk</code>설치여부는 <code>C:\Program Files\Java\jdk-16</code>폴더에서 확인할 수 있다. Java SE 16보다 최신 버전이 있으면 최신버전으로 새로 설치한다.</p>
<ol start="2" style="list-style-type: decimal">
<li>윈도 <code>시스템 속성</code>창의 <code>환경변수</code>에서 <code>JAVA_HOME</code>을 설정한다.</li>
</ol>
<p><strong><code>시스템 속성</code>창 여는 방법</strong></p>
<ul>
<li>간단한 방법:</li>
</ul>
<p>윈도 실행창 단축키인 <code>윈도키</code>와 키보드의 <code>R</code>을 함께 누르면 윈도 실행창이 열린다. 실행창이 뜨면 <code>sysdm.cpl ,3</code>을 입력하고 엔터키를 누르면 <code>시스템 속성</code> 창이 열린다.</p>
<ul>
<li>복잡한 방법 (윈도10 기준):</li>
</ul>
<ol style="list-style-type: decimal">
<li><p>윈도탐색기에서 <code>내 PC</code>에 마우스 커서를 놓고 마우스 오른쪽 버튼 클릭 -&gt; <code>속성(R)</code> 클릭해 윈도설정에서 <code>정보</code>창이 열린다.</p></li>
<li><p>윈도설정에서 <code>정보</code>창이 열리면 <code>관련설정</code> 항목에서 <code>고급 시스템 설정</code> 클릭하면 <code>시스템 속성</code> 창의 <code>고급</code> 탭이 열린다.</p></li>
</ol>
<p><strong><code>환경변수</code> 설정하기</strong></p>
<ol style="list-style-type: decimal">
<li><p><code>시스템 속성</code>창 하단의 <code>환경설정</code>버튼을 클릭한다. <code>환경변수</code>창이 열리면 <code>시스템변수(S)</code>아래의 <code>새로만들기(W)</code>버튼을 클릭한다.</p></li>
<li><p><code>새 시스템 변수</code> 창이 열리면 <code>변수 이름(N):</code>에 <code>JAVA_HOME</code>을 기입하고, <code>변수 값(V)</code>에서 JDK설치 경로 <code>C:\Program Files\Java\jdk-16\</code>를 기입하고 <code>확인</code>을 클릭한다.</p></li>
</ol>
</div>
<div id="rtools-1" class="section level4" number="7.3.5.2">
<h4><span class="header-section-number">7.3.5.2</span> <code>rtools</code></h4>
<ol style="list-style-type: decimal">
<li><p>CRAN의 <a href="https://cran.r-project.org/bin/windows/Rtools/"><code>rtools</code>페이지</a>에 접속한다.</p></li>
<li><p>설치된 R버전과 일치하는 버전의 <code>rtools</code>를 다운로드받는다. R이 4.0대 버전이면 <code>rtools40</code>을 설치한다.</p></li>
</ol>
<ul>
<li><code>rtools</code>는 다른 패키지와 달리 <code>install.packages()</code>함수로 설치하지 않고, 설치파일을 컴퓨터에서 직접 실행해 설치한다.</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li>설치할때 경로변경하지 말고 <code>C:/Rtools</code>에 설치한다. 실치과정에서 <code>Add rtools to system PATH</code>가 체크돼 있는지 확인한다.</li>
</ol>
<ul>
<li>기타 KoNLP 설치이슈에 대해서는 <a href="https://www.facebook.com/notes/r-korea-krugkorean-r-user-group/konlp-%EC%84%A4%EC%B9%98-%EC%9D%B4%EC%8A%88-%EA%B3%B5%EC%9C%A0/1847510068715020/">이 문서</a> 참조</li>
</ul>
</div>
<div id="의존패키지" class="section level4" number="7.3.5.3">
<h4><span class="header-section-number">7.3.5.3</span> 의존패키지</h4>
<p>설치할 때 오류가 나는 경우가 있다. 의존패키지(패키지작동에 필요한 다른 패키지)가 설치돼 있지 않기 때문이다. 다음은 KoNLP의존 패키지다.</p>
<ul>
<li>rJava (&gt;= 0.9-8),</li>
<li>utils (&gt;= 3.3.1),</li>
<li>stringr (&gt;= 1.1.0),</li>
<li>hash (&gt;= 2.2.6),</li>
<li>tau (&gt;= 0.0-18),</li>
<li>Sejong (&gt;= 0.01),</li>
<li>RSQLite (&gt;= 1.0.0),</li>
<li>devtools (&gt;= 1.12.0)</li>
</ul>
<p>아래 코드로 필요한 패키지가 이미 설치돼 있는지 확인할 수 있다.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="clean.html#cb82-1" aria-hidden="true" tabindex="-1"></a>package_list <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;rJava&quot;</span>, <span class="st">&quot;utils&quot;</span>, <span class="st">&quot;stringr&quot;</span>, <span class="st">&quot;hash&quot;</span>, <span class="st">&quot;remote&quot;</span>,</span>
<span id="cb82-2"><a href="clean.html#cb82-2" aria-hidden="true" tabindex="-1"></a>                  <span class="st">&quot;tau&quot;</span>, <span class="st">&quot;Sejong&quot;</span>, <span class="st">&quot;RSQLite&quot;</span>, <span class="st">&quot;devtools&quot;</span>)</span>
<span id="cb82-3"><a href="clean.html#cb82-3" aria-hidden="true" tabindex="-1"></a>( package_list_installed <span class="ot">&lt;-</span> package_list <span class="sc">%in%</span> <span class="fu">installed.packages</span>()[,<span class="st">&quot;Package&quot;</span>] )</span></code></pre></div>
<pre><code>## [1] TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE TRUE</code></pre>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="clean.html#cb84-1" aria-hidden="true" tabindex="-1"></a>( new_pkg <span class="ot">&lt;-</span> package_list[<span class="sc">!</span>package_list_installed] )</span></code></pre></div>
<pre><code>## character(0)</code></pre>
<p>아래 코드로 미설치된 패키지를 한번에 설치할 수 있다. 만일 설치가 안되면 이 교재 <a href="https://bookdown.org/ahn_media/bookdown-demo/prep.html#%EC%98%A4%EB%A5%98error"><code>2.4 오류</code></a>를 참고해 개별적으로 설치한다.</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="clean.html#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="fu">length</span>(new_pkg)) <span class="fu">install.packages</span>(new_pkg)</span></code></pre></div>
<p>의존성 패키지가 의존하는 패키지가 있다. 만일 오류메시지가 나오면 메시지를 잘 읽어보고, 필요한 패키지를 추가로 설치한다.</p>
<p>KoNLP설치 준비가 됐으면 아래 코드로 설치한다.</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="clean.html#cb87-1" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&#39;haven-jeon/KoNLP&#39;</span>, </span>
<span id="cb87-2"><a href="clean.html#cb87-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">upgrade =</span> <span class="st">&quot;never&quot;</span>, </span>
<span id="cb87-3"><a href="clean.html#cb87-3" aria-hidden="true" tabindex="-1"></a>                        <span class="at">INSTALL_opts=</span><span class="fu">c</span>(<span class="st">&quot;--no-multiarch&quot;</span>))</span></code></pre></div>
<p>제대로 설치됐는지 확인해보자.</p>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="clean.html#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(KoNLP)</span></code></pre></div>
<pre><code>## Checking user defined dictionary!</code></pre>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="clean.html#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">extractNoun</span>(<span class="st">&quot;한글테스트입니다.&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;한글&quot;   &quot;테스트&quot;</code></pre>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="clean.html#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">SimplePos09</span>(<span class="st">&quot;한글테스트입니다.&quot;</span>)</span></code></pre></div>
<pre><code>## $한글테스트입니다
## [1] &quot;한글테스트/N+이/J+ㅂ니다/E&quot;
## 
## $.
## [1] &quot;./S&quot;</code></pre>
<p><code>KoNLP</code>에서 사용할 사전을 설치하자. <code>NIADic</code>이 <code>SejongDic</code>보다 더 많은 형태소를 포함하고 있다. 설치과정에서 기 설치된 패키지 업데이트 여부를 묻는다. 모두 최신버전으로 업데이트한다.</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="clean.html#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">useNIADic</span>()</span></code></pre></div>
<pre><code>## Backup was just finished!
## 1213109 words dictionary was built.</code></pre>
<p>한글띄어쓰기가 안돼 있는 문서는 <code>autoSpacing = T</code>인자를 투입한다.</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="clean.html#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;아버지가가방에들어가신다&quot;</span> <span class="sc">%&gt;%</span> <span class="fu">SimplePos09</span>()</span>
<span id="cb96-2"><a href="clean.html#cb96-2" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;아버지가가방에들어가신다&quot;</span> <span class="sc">%&gt;%</span> <span class="fu">SimplePos09</span>(<span class="at">autoSpacing =</span> T)</span></code></pre></div>
<p>띄어쓰기 안된 문서의 행태소 분석에는 <code>MeCab</code>이 유리하다.</p>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="clean.html#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;한글테스트입니다&quot;</span> <span class="sc">%&gt;%</span> <span class="fu">SimplePos09</span>(<span class="at">autoSpacing =</span> T)</span></code></pre></div>
<pre><code>## $한
## [1] &quot;한/N&quot;
## 
## $글테스트입니
## [1] &quot;글테스트입니/N&quot;
## 
## $다
## [1] &quot;다/M&quot;</code></pre>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="clean.html#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;한글테스트입니다&quot;</span> <span class="sc">%&gt;%</span> <span class="fu">enc2utf8</span>() <span class="sc">%&gt;%</span> RcppMeCab<span class="sc">::</span><span class="fu">pos</span>() </span></code></pre></div>
<pre><code>## $한글테스트입니다
## [1] &quot;한글/NNG&quot;      &quot;테스트/NNG&quot;    &quot;입니다/VCP+EC&quot;</code></pre>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="clean.html#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;아버지가가방에들어가신다&quot;</span> <span class="sc">%&gt;%</span> <span class="fu">enc2utf8</span>() <span class="sc">%&gt;%</span> RcppMeCab<span class="sc">::</span><span class="fu">pos</span>() </span></code></pre></div>
<pre><code>## $아버지가가방에들어가신다
## [1] &quot;아버지/NNG&quot; &quot;가/JKS&quot;     &quot;가방/NNG&quot;   &quot;에/JKB&quot;     &quot;들어가/VV&quot; 
## [6] &quot;신다/EP+EC&quot;</code></pre>
<p><code>KoNLP</code>를 이용해 띄어쓰기가 잘 안된 문서를 분석할 때는 <code>KoSpacing</code>패키지로 띄어쓰기를 조절할 수 있다(설치과정이 복잡하므로 선택 사항.)</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="clean.html#cb103-1" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">&quot;haven-jeon/KoSpacing&quot;</span>)</span>
<span id="cb103-2"><a href="clean.html#cb103-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(KoSpacing)</span>
<span id="cb103-3"><a href="clean.html#cb103-3" aria-hidden="true" tabindex="-1"></a><span class="fu">set_env</span>()</span>
<span id="cb103-4"><a href="clean.html#cb103-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-5"><a href="clean.html#cb103-5" aria-hidden="true" tabindex="-1"></a><span class="fu">spacing</span>(<span class="st">&quot;한글테스트입니다.&quot;</span>)</span></code></pre></div>
<p><code>KoNLP</code>의 장점은 기존 사전에 사용자사전을 추가할 수 있다는데 있다.</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="clean.html#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;힣탈로미를 어떻게 할까요&quot;</span> <span class="sc">%&gt;%</span> SimplePos09</span></code></pre></div>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="clean.html#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">buildDictionary</span>(<span class="at">ext_dic =</span> <span class="fu">c</span>(<span class="st">&#39;sejong&#39;</span>, <span class="st">&#39;woorimalsam&#39;</span>),</span>
<span id="cb105-2"><a href="clean.html#cb105-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">user_dic =</span> <span class="fu">data.frame</span>(<span class="at">term=</span><span class="st">&quot;전작권&quot;</span>, <span class="at">tag=</span><span class="st">&#39;ncn&#39;</span>),</span>
<span id="cb105-3"><a href="clean.html#cb105-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">category_dic_nms=</span><span class="fu">c</span>(<span class="st">&#39;political&#39;</span>))</span></code></pre></div>
<pre><code>## 718105 words dictionary was built.</code></pre>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="clean.html#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="fu">buildDictionary</span>(<span class="at">ext_dic =</span> <span class="st">&quot;woorimalsam&quot;</span>, </span>
<span id="cb107-2"><a href="clean.html#cb107-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">user_dic=</span><span class="fu">data.frame</span>(<span class="st">&quot;힣탈로미&quot;</span>, <span class="st">&quot;ncn&quot;</span>),</span>
<span id="cb107-3"><a href="clean.html#cb107-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">replace_usr_dic =</span> T)</span></code></pre></div>
<pre><code>## 629898 words dictionary was built.</code></pre>
</div>
</div>
<div id="konlpy" class="section level3" number="7.3.6">
<h3><span class="header-section-number">7.3.6</span> <code>KoNLPy</code></h3>
<p>형태소 분석기로는 한나눔(Hannanum)과 MeCab외 꼬꼬마(Kkma), 코모란(Komoran), Okt 등의 형태소는 파이썬 패키지인 <code>KoNLPy</code>로 추출가능하다.</p>
<p>구글 colab에서 파이썬을 구동하면 <code>KoNLPy</code>패키지를 설치해 다양한 패키지로 형태소를 분석할 수 있다.</p>
</div>
<div id="연습-5" class="section level3" number="7.3.7">
<h3><span class="header-section-number">7.3.7</span> 연습</h3>
<p>이상의 <code>오감도</code>를 <code>KoNLP</code>와 <code>RcppMeCab</code>을 이용해 각각 형태소분석해 자주 사용된 단어의 빈도를 비교하자. 이 결과를 형태소를 추출하지 않은 결과와도 비교하자.</p>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="clean.html#cb109-1" aria-hidden="true" tabindex="-1"></a>ogamdo_txt <span class="ot">&lt;-</span> <span class="st">&quot;13인의 아해가 도로로 질주하오.</span></span>
<span id="cb109-2"><a href="clean.html#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="st">(길은 막다른 골목이 적당하오.)</span></span>
<span id="cb109-3"><a href="clean.html#cb109-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-4"><a href="clean.html#cb109-4" aria-hidden="true" tabindex="-1"></a><span class="st">제1의 아해가 무섭다고 그리오.</span></span>
<span id="cb109-5"><a href="clean.html#cb109-5" aria-hidden="true" tabindex="-1"></a><span class="st">제2의 아해도 무섭다고 그리오.</span></span>
<span id="cb109-6"><a href="clean.html#cb109-6" aria-hidden="true" tabindex="-1"></a><span class="st">제3의 아해도 무섭다고 그리오.</span></span>
<span id="cb109-7"><a href="clean.html#cb109-7" aria-hidden="true" tabindex="-1"></a><span class="st">제4의 아해도 무섭다고 그리오.</span></span>
<span id="cb109-8"><a href="clean.html#cb109-8" aria-hidden="true" tabindex="-1"></a><span class="st">제5의 아해도 무섭다고 그리오.</span></span>
<span id="cb109-9"><a href="clean.html#cb109-9" aria-hidden="true" tabindex="-1"></a><span class="st">제6의 아해도 무섭다고 그리오.</span></span>
<span id="cb109-10"><a href="clean.html#cb109-10" aria-hidden="true" tabindex="-1"></a><span class="st">제7의 아해도 무섭다고 그리오.</span></span>
<span id="cb109-11"><a href="clean.html#cb109-11" aria-hidden="true" tabindex="-1"></a><span class="st">제8의 아해도 무섭다고 그리오.</span></span>
<span id="cb109-12"><a href="clean.html#cb109-12" aria-hidden="true" tabindex="-1"></a><span class="st">제9의 아해도 무섭다고 그리오.</span></span>
<span id="cb109-13"><a href="clean.html#cb109-13" aria-hidden="true" tabindex="-1"></a><span class="st">제10의 아해도 무섭다고 그리오.</span></span>
<span id="cb109-14"><a href="clean.html#cb109-14" aria-hidden="true" tabindex="-1"></a><span class="st">제11의 아해가 무섭다고 그리오.</span></span>
<span id="cb109-15"><a href="clean.html#cb109-15" aria-hidden="true" tabindex="-1"></a><span class="st">제12의 아해도 무섭다고 그리오.</span></span>
<span id="cb109-16"><a href="clean.html#cb109-16" aria-hidden="true" tabindex="-1"></a><span class="st">제13의 아해도 무섭다고 그리오.</span></span>
<span id="cb109-17"><a href="clean.html#cb109-17" aria-hidden="true" tabindex="-1"></a><span class="st">13인의 아해는 무서운 아해와 무서워하는 아해와 그렇게뿐이 모였소.(다른 사정은 없는 것이 차라리 나았소)</span></span>
<span id="cb109-18"><a href="clean.html#cb109-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-19"><a href="clean.html#cb109-19" aria-hidden="true" tabindex="-1"></a><span class="st">그중에 1인의 아해가 무서운 아해라도 좋소.</span></span>
<span id="cb109-20"><a href="clean.html#cb109-20" aria-hidden="true" tabindex="-1"></a><span class="st">그중에 2인의 아해가 무서운 아해라도 좋소.</span></span>
<span id="cb109-21"><a href="clean.html#cb109-21" aria-hidden="true" tabindex="-1"></a><span class="st">그중에 2인의 아해가 무서워하는 아해라도 좋소.</span></span>
<span id="cb109-22"><a href="clean.html#cb109-22" aria-hidden="true" tabindex="-1"></a><span class="st">그중에 1인의 아해가 무서워하는 아해라도 좋소.</span></span>
<span id="cb109-23"><a href="clean.html#cb109-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-24"><a href="clean.html#cb109-24" aria-hidden="true" tabindex="-1"></a><span class="st">(길은 뚫린 골목이라도 적당하오.)</span></span>
<span id="cb109-25"><a href="clean.html#cb109-25" aria-hidden="true" tabindex="-1"></a><span class="st">13인의 아해가 도로로 질주하지 아니하여도 좋소.&quot;</span></span></code></pre></div>
<div id="konlp-2" class="section level4" number="7.3.7.1">
<h4><span class="header-section-number">7.3.7.1</span> <code>KoNLP</code></h4>
<p><code>KoNLP</code>의 <code>SimplePos09()</code>함수를 <code>unnset_tokens()</code>의 <code>token =</code>인자로 투입하면 오류가 발생한다.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="clean.html#cb110-1" aria-hidden="true" tabindex="-1"></a>ogamdo_txt <span class="sc">%&gt;%</span> <span class="fu">tibble</span>(<span class="at">text =</span> .) <span class="sc">%&gt;%</span> </span>
<span id="cb110-2"><a href="clean.html#cb110-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, text, <span class="at">token =</span> SimplePos09)</span></code></pre></div>
<p>문자벡터에서 형태소 추출해 데이터프레임으로 저장한다.</p>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="clean.html#cb111-1" aria-hidden="true" tabindex="-1"></a>ogamdo_txt <span class="sc">%&gt;%</span> <span class="fu">SimplePos09</span>() <span class="sc">%&gt;%</span> <span class="fu">flatten_dfc</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb111-2"><a href="clean.html#cb111-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">everything</span>(), <span class="at">names_to =</span> <span class="st">&quot;header&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;value&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb111-3"><a href="clean.html#cb111-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate_rows</span>(value, <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">+&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb111-4"><a href="clean.html#cb111-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(value, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;word&quot;</span>, <span class="st">&quot;pos&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb111-5"><a href="clean.html#cb111-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb111-6"><a href="clean.html#cb111-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_length</span>(word) <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb111-7"><a href="clean.html#cb111-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(n, <span class="at">n =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb111-8"><a href="clean.html#cb111-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">word =</span> <span class="fu">reorder</span>(word, n)) <span class="sc">%&gt;%</span> </span>
<span id="cb111-9"><a href="clean.html#cb111-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">geom_col</span>(<span class="fu">aes</span>(word, n)) <span class="sc">+</span></span>
<span id="cb111-10"><a href="clean.html#cb111-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<pre><code>## New names:
## * `13인의` -&gt; `13인의...1`
## * 아해가 -&gt; 아해가...2
## * 도로로 -&gt; 도로로...3
## * . -&gt; ....5
## * `(길은` -&gt; `(길은...6`
## * ...</code></pre>
<p><img src="bookdown-demo_files/figure-html/clean43-1.png" width="672" /></p>
<p><code>KoNLP</code>의 <code>extractNoun()</code>함수 이용</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="clean.html#cb113-1" aria-hidden="true" tabindex="-1"></a>ogamdo_txt <span class="sc">%&gt;%</span> <span class="fu">extractNoun</span>() <span class="sc">%&gt;%</span> <span class="fu">tibble</span>(<span class="at">text =</span> .)</span></code></pre></div>
<pre><code>## # A tibble: 79 x 1
##    text 
##    &lt;chr&gt;
##  1 13   
##  2 인   
##  3 아해 
##  4 도로 
##  5 질주 
##  6 하오 
##  7 골목 
##  8 적당 
##  9 하오 
## 10 제1  
## # ... with 69 more rows</code></pre>
</div>
<div id="rcppmecab-2" class="section level4" number="7.3.7.2">
<h4><span class="header-section-number">7.3.7.2</span> <code>RcppMeCab</code></h4>
<p><code>RcppMeCab</code>의 <code>pos()</code>함수 이용</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="clean.html#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="fu">enc2utf8</span>(ogamdo_txt) <span class="sc">%&gt;%</span> <span class="fu">pos</span>(<span class="at">format =</span> <span class="st">&quot;data.frame&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb115-2"><a href="clean.html#cb115-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(token<span class="sc">:</span>pos) <span class="sc">%&gt;%</span> </span>
<span id="cb115-3"><a href="clean.html#cb115-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(token, <span class="at">sort =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb115-4"><a href="clean.html#cb115-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_length</span>(token) <span class="sc">&gt;</span><span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb115-5"><a href="clean.html#cb115-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(n, <span class="at">n =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb115-6"><a href="clean.html#cb115-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">token =</span> <span class="fu">reorder</span>(token, n)) <span class="sc">%&gt;%</span> </span>
<span id="cb115-7"><a href="clean.html#cb115-7" aria-hidden="true" tabindex="-1"></a>  ggplot <span class="sc">+</span> <span class="fu">geom_col</span>(<span class="fu">aes</span>(token, n)) <span class="sc">+</span></span>
<span id="cb115-8"><a href="clean.html#cb115-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/clean45-1.png" width="672" /></p>
<p><code>RcppMeCab</code>의 <code>pos()</code>함수는 <code>unnest_tokens()</code>의 <code>token =</code>인자에 투입해도 된다.</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="clean.html#cb116-1" aria-hidden="true" tabindex="-1"></a>ogamdo_txt <span class="sc">%&gt;%</span> enc2utf8 <span class="sc">%&gt;%</span> <span class="fu">tibble</span>(<span class="at">text =</span> .) <span class="sc">%&gt;%</span> </span>
<span id="cb116-2"><a href="clean.html#cb116-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, text, <span class="at">token =</span> pos) <span class="sc">%&gt;%</span> </span>
<span id="cb116-3"><a href="clean.html#cb116-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(<span class="at">col =</span> word, </span>
<span id="cb116-4"><a href="clean.html#cb116-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;word&quot;</span>, <span class="st">&quot;morph&quot;</span>), </span>
<span id="cb116-5"><a href="clean.html#cb116-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">sep =</span> <span class="st">&quot;/&quot;</span> ) <span class="sc">%&gt;%</span> </span>
<span id="cb116-6"><a href="clean.html#cb116-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb116-7"><a href="clean.html#cb116-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_length</span>(word) <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb116-8"><a href="clean.html#cb116-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(n, <span class="at">n =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb116-9"><a href="clean.html#cb116-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">word =</span> <span class="fu">reorder</span>(word, n)) <span class="sc">%&gt;%</span> </span>
<span id="cb116-10"><a href="clean.html#cb116-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">geom_col</span>(<span class="fu">aes</span>(word, n)) <span class="sc">+</span></span>
<span id="cb116-11"><a href="clean.html#cb116-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/clean46-1.png" width="672" /></p>
</div>
<div id="형태소-미추출" class="section level4" number="7.3.7.3">
<h4><span class="header-section-number">7.3.7.3</span> 형태소 미추출</h4>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="clean.html#cb117-1" aria-hidden="true" tabindex="-1"></a>ogamdo_txt <span class="sc">%&gt;%</span> <span class="fu">tibble</span>(<span class="at">text =</span> .) <span class="sc">%&gt;%</span> </span>
<span id="cb117-2"><a href="clean.html#cb117-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, text) <span class="sc">%&gt;%</span> </span>
<span id="cb117-3"><a href="clean.html#cb117-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb117-4"><a href="clean.html#cb117-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_length</span>(word) <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb117-5"><a href="clean.html#cb117-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(n, <span class="at">n =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb117-6"><a href="clean.html#cb117-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">word =</span> <span class="fu">reorder</span>(word, n)) <span class="sc">%&gt;%</span> </span>
<span id="cb117-7"><a href="clean.html#cb117-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">geom_col</span>(<span class="fu">aes</span>(word, n)) <span class="sc">+</span></span>
<span id="cb117-8"><a href="clean.html#cb117-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/clean47-1.png" width="672" /></p>
</div>
<div id="비교" class="section level4" number="7.3.7.4">
<h4><span class="header-section-number">7.3.7.4</span> 비교</h4>
<p>먼저 데이터프레임으로 결합한 후 행과 열 확인.</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="clean.html#cb118-1" aria-hidden="true" tabindex="-1"></a>KoNLP_df <span class="ot">&lt;-</span> ogamdo_txt <span class="sc">%&gt;%</span> <span class="fu">SimplePos09</span>() <span class="sc">%&gt;%</span> <span class="fu">flatten_dfc</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb118-2"><a href="clean.html#cb118-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">everything</span>(), <span class="at">names_to =</span> <span class="st">&quot;header&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;value&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb118-3"><a href="clean.html#cb118-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate_rows</span>(value, <span class="at">sep =</span> <span class="st">&quot;</span><span class="sc">\\</span><span class="st">+&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb118-4"><a href="clean.html#cb118-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(value, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;word&quot;</span>, <span class="st">&quot;pos&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;/&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb118-5"><a href="clean.html#cb118-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb118-6"><a href="clean.html#cb118-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_length</span>(word) <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb118-7"><a href="clean.html#cb118-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(n, <span class="at">n =</span> <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## New names:
## * `13인의` -&gt; `13인의...1`
## * 아해가 -&gt; 아해가...2
## * 도로로 -&gt; 도로로...3
## * . -&gt; ....5
## * `(길은` -&gt; `(길은...6`
## * ...</code></pre>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="clean.html#cb120-1" aria-hidden="true" tabindex="-1"></a>MeCab_df <span class="ot">&lt;-</span> ogamdo_txt <span class="sc">%&gt;%</span> enc2utf8 <span class="sc">%&gt;%</span> <span class="fu">tibble</span>(<span class="at">text =</span> .) <span class="sc">%&gt;%</span> </span>
<span id="cb120-2"><a href="clean.html#cb120-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, text, <span class="at">token =</span> pos) <span class="sc">%&gt;%</span> </span>
<span id="cb120-3"><a href="clean.html#cb120-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(<span class="at">col =</span> word, </span>
<span id="cb120-4"><a href="clean.html#cb120-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;word&quot;</span>, <span class="st">&quot;morph&quot;</span>), </span>
<span id="cb120-5"><a href="clean.html#cb120-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">sep =</span> <span class="st">&quot;/&quot;</span> ) <span class="sc">%&gt;%</span> </span>
<span id="cb120-6"><a href="clean.html#cb120-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb120-7"><a href="clean.html#cb120-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_length</span>(word) <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb120-8"><a href="clean.html#cb120-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(n, <span class="at">n =</span> <span class="dv">10</span>)</span>
<span id="cb120-9"><a href="clean.html#cb120-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-10"><a href="clean.html#cb120-10" aria-hidden="true" tabindex="-1"></a>word_df <span class="ot">&lt;-</span> ogamdo_txt <span class="sc">%&gt;%</span> <span class="fu">tibble</span>(<span class="at">text =</span> .) <span class="sc">%&gt;%</span> </span>
<span id="cb120-11"><a href="clean.html#cb120-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, text) <span class="sc">%&gt;%</span> </span>
<span id="cb120-12"><a href="clean.html#cb120-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb120-13"><a href="clean.html#cb120-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">str_length</span>(word) <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb120-14"><a href="clean.html#cb120-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(n, <span class="at">n =</span> <span class="dv">10</span>)</span>
<span id="cb120-15"><a href="clean.html#cb120-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-16"><a href="clean.html#cb120-16" aria-hidden="true" tabindex="-1"></a>KoNLP_df <span class="sc">%&gt;%</span> <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 12
## Columns: 2
## $ word &lt;chr&gt; &quot;아해&quot;, &quot;무섭&quot;, &quot;그리&quot;, &quot;좋소&quot;, &quot;그중&quot;, &quot;라도&quot;, &quot;13인&quot;, &quot;1인&quot;, &quot;2인&quot;, &quot;골목&quot;, &quot;...
## $ n    &lt;int&gt; 26, 19, 13, 5, 4, 4, 3, 2, 2, 2, 2, 2</code></pre>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="clean.html#cb122-1" aria-hidden="true" tabindex="-1"></a>MeCab_df <span class="sc">%&gt;%</span> <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 12
## Columns: 2
## $ word &lt;chr&gt; &quot;아해&quot;, &quot;그리&quot;, &quot;다고&quot;, &quot;무섭&quot;, &quot;라도&quot;, &quot;13&quot;, &quot;무서운&quot;, &quot;골목&quot;, &quot;도로&quot;, &quot;무서워하&quot;,...
## $ n    &lt;int&gt; 26, 13, 13, 13, 5, 4, 3, 2, 2, 2, 2, 2</code></pre>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="clean.html#cb124-1" aria-hidden="true" tabindex="-1"></a>word_df <span class="sc">%&gt;%</span> <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 11
## Columns: 2
## $ word &lt;chr&gt; &quot;그리오&quot;, &quot;무섭다고&quot;, &quot;아해도&quot;, &quot;아해가&quot;, &quot;인의&quot;, &quot;좋소&quot;, &quot;13&quot;, &quot;그중에&quot;, &quot;아해라도&quot;, ...
## $ n    &lt;int&gt; 13, 13, 11, 8, 7, 5, 4, 4, 4, 3, 3</code></pre>
<p>행의 수와 열의 이름이 같으므로 세 데이터프레임을 행방향 결합할 수 있다. 결합한 데이터프레임으로 막대도표로 시각화한다.</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="clean.html#cb126-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(<span class="at">KoNLP =</span> KoNLP_df, <span class="at">MeCab =</span> MeCab_df, <span class="at">word =</span> word_df, <span class="at">.id =</span> <span class="st">&quot;ID&quot;</span>)</span>
<span id="cb126-2"><a href="clean.html#cb126-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-3"><a href="clean.html#cb126-3" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">word =</span> <span class="fu">reorder</span>(word, n)) <span class="sc">%&gt;%</span> </span>
<span id="cb126-4"><a href="clean.html#cb126-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">geom_col</span>(<span class="fu">aes</span>(word, n, <span class="at">fill =</span> ID)) <span class="sc">+</span> </span>
<span id="cb126-5"><a href="clean.html#cb126-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>()</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/clean49-1.png" width="672" /></p>
<p>세 경우에 대해 <code>ID</code>열로 값이 부여돼 있으므로 <code>facet_wrap()</code>함수로 구분할 수 있다.</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="clean.html#cb127-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">word =</span> <span class="fu">reorder</span>(word, n)) <span class="sc">%&gt;%</span> </span>
<span id="cb127-2"><a href="clean.html#cb127-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">geom_col</span>(<span class="fu">aes</span>(word, n, <span class="at">fill =</span> ID), <span class="at">show.legend =</span> F) <span class="sc">+</span> </span>
<span id="cb127-3"><a href="clean.html#cb127-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb127-4"><a href="clean.html#cb127-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>ID)</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/clean50-1.png" width="672" /></p>
<p>라벨을 세개의 도표에 분리해 표시하자. scales =인자를 “free”로 지정한다. 기본값은 “fixed”다.</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="clean.html#cb128-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">word =</span> <span class="fu">reorder</span>(word, n)) <span class="sc">%&gt;%</span> </span>
<span id="cb128-2"><a href="clean.html#cb128-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">geom_col</span>(<span class="fu">aes</span>(word, n, <span class="at">fill =</span> ID), <span class="at">show.legend =</span> F) <span class="sc">+</span> </span>
<span id="cb128-3"><a href="clean.html#cb128-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb128-4"><a href="clean.html#cb128-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>ID, <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>) <span class="sc">+</span></span>
<span id="cb128-5"><a href="clean.html#cb128-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;형태소분석기 비교&quot;</span>) <span class="sc">+</span></span>
<span id="cb128-6"><a href="clean.html#cb128-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;단어&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">&quot;빈도&quot;</span>) <span class="sc">+</span></span>
<span id="cb128-7"><a href="clean.html#cb128-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">24</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb128-8"><a href="clean.html#cb128-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>),</span>
<span id="cb128-9"><a href="clean.html#cb128-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>))</span></code></pre></div>
<p><img src="bookdown-demo_files/figure-html/clean51-1.png" width="672" /></p>
</div>
</div>
<div id="어간stem-추출" class="section level3" number="7.3.8">
<h3><span class="header-section-number">7.3.8</span> 어간(stem) 추출</h3>
<ul>
<li><p>단어(word): 형태소의 집합. 자립이 가능한 최소 형태(예: 사과나무)</p></li>
<li><p>형태소(morpheme): 뜻을 지닌 가장 작은 말의 단위. 예를 들어, ’사과나무’는 ’사과’와 ’나무’로 나눠도 뜻을 지니지만, ’사과’를 ’사’와 ’과’로 나누면 의미가 사라진다.</p></li>
<li><p>어기(base): 어근과 어간 등 단어에서 실질적인 의미를 나타내는 형태소</p>
<ul>
<li><p>어근(root) 어미와 직접결합이 안되는 어기. 예: ‘급하다’의 ’급’ ‘시원하다’의 ’시원.’</p></li>
<li><p>어간(stem) 어미와 직접결합이 되는 어기. 예: ‘뛰어라’의 ’뛰-.’ ‘먹다’의 ’먹-.’</p></li>
</ul></li>
<li><p>표제어(lemme) 사전에 등재된 대표단어. 원형 혹은 기본형(canonical form)이라고도 한다.</p></li>
</ul>
<p>어간추출과 표제어 추출에 대한 설명 <a href="https://smltar.com/stemming.html">참고 문헌</a></p>
<p><strong>어간추출 패키지</strong></p>
<ul>
<li><code>SnowballC</code></li>
</ul>
<p>어간추출로 널리 사용되는 알고리듬인 포터 알고리듬 스테밍을 적용.</p>
<ul>
<li><code>hunspell</code></li>
</ul>
<p>포터알고리즘에 사전 방식 결합</p>
<p><code>SnowballC</code>와 <code>hunspell</code>은 <code>tidytext</code> 등 텍스트분석 패키지와 패키지로 함께 설치되나 함께 부착되지는 않는다.</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="clean.html#cb129-1" aria-hidden="true" tabindex="-1"></a>love_v <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;love&quot;</span>, <span class="st">&quot;loves&quot;</span>, <span class="st">&quot;loved&quot;</span>,<span class="st">&quot;love&#39;s&quot;</span> ,<span class="st">&quot;lovely&quot;</span>, </span>
<span id="cb129-2"><a href="clean.html#cb129-2" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;loving&quot;</span>, <span class="st">&quot;lovingly&quot;</span>, <span class="st">&quot;lover&quot;</span>, <span class="st">&quot;lovers&quot;</span>, <span class="st">&quot;lovers&#39;&quot;</span>, <span class="st">&quot;go&quot;</span>, <span class="st">&quot;went&quot;</span>) </span>
<span id="cb129-3"><a href="clean.html#cb129-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-4"><a href="clean.html#cb129-4" aria-hidden="true" tabindex="-1"></a>SnowballC<span class="sc">::</span><span class="fu">wordStem</span>(love_v)</span></code></pre></div>
<pre><code>##  [1] &quot;love&quot;     &quot;love&quot;     &quot;love&quot;     &quot;love&#39;&quot;    &quot;love&quot;     &quot;love&quot;    
##  [7] &quot;lovingli&quot; &quot;lover&quot;    &quot;lover&quot;    &quot;lovers&#39;&quot;  &quot;go&quot;       &quot;went&quot;</code></pre>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="clean.html#cb131-1" aria-hidden="true" tabindex="-1"></a>hunspell<span class="sc">::</span><span class="fu">hunspell_stem</span>(love_v)</span></code></pre></div>
<pre><code>## [[1]]
## [1] &quot;love&quot;
## 
## [[2]]
## [1] &quot;love&quot;
## 
## [[3]]
## [1] &quot;loved&quot; &quot;love&quot; 
## 
## [[4]]
## [1] &quot;love&quot;
## 
## [[5]]
## [1] &quot;lovely&quot; &quot;love&quot;  
## 
## [[6]]
## [1] &quot;loving&quot; &quot;love&quot;  
## 
## [[7]]
## [1] &quot;loving&quot;
## 
## [[8]]
## [1] &quot;lover&quot; &quot;love&quot; 
## 
## [[9]]
## [1] &quot;love&quot;
## 
## [[10]]
## character(0)
## 
## [[11]]
## [1] &quot;go&quot;
## 
## [[12]]
## [1] &quot;went&quot;</code></pre>
<p><code>hunspell</code>은 리스트로 산출하므로 <code>unnest()</code>함수로 리스트구조를 풀어준다. <code>unnest()</code>는 <code>flatten_()</code>계열과 달리 데이터프레임을 입력값으로 받는다.</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="clean.html#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hunspell)</span>
<span id="cb133-2"><a href="clean.html#cb133-2" aria-hidden="true" tabindex="-1"></a>love_v <span class="sc">%&gt;%</span> <span class="fu">tibble</span>(<span class="at">text =</span> .) <span class="sc">%&gt;%</span> <span class="fu">unnest_tokens</span>(word, text) <span class="sc">%&gt;%</span> </span>
<span id="cb133-3"><a href="clean.html#cb133-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">hunspell =</span> <span class="fu">hunspell_stem</span>(word)) </span></code></pre></div>
<pre><code>## # A tibble: 12 x 2
##    word     hunspell 
##    &lt;chr&gt;    &lt;list&gt;   
##  1 love     &lt;chr [1]&gt;
##  2 loves    &lt;chr [1]&gt;
##  3 loved    &lt;chr [2]&gt;
##  4 love&#39;s   &lt;chr [1]&gt;
##  5 lovely   &lt;chr [2]&gt;
##  6 loving   &lt;chr [2]&gt;
##  7 lovingly &lt;chr [1]&gt;
##  8 lover    &lt;chr [2]&gt;
##  9 lovers   &lt;chr [1]&gt;
## 10 lovers   &lt;chr [1]&gt;
## 11 go       &lt;chr [1]&gt;
## 12 went     &lt;chr [1]&gt;</code></pre>
<p><code>unnest()</code>로 리스트를 풀면 토큰의 수가 늘어난다. <code>hunspell_stem()</code>함수가 스테밍 전후의 단어를 모두 산출하기 때문이다. <code>hunspell</code>로 어간추출할때는 주의해야 한다. <code>hunspell</code>패키지의 목적이 텍스트분석이 아니라 철자확인이다.</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="clean.html#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(SnowballC)</span>
<span id="cb135-2"><a href="clean.html#cb135-2" aria-hidden="true" tabindex="-1"></a>love_v <span class="sc">%&gt;%</span> <span class="fu">tibble</span>(<span class="at">text =</span> .) <span class="sc">%&gt;%</span> <span class="fu">unnest_tokens</span>(word, text) <span class="sc">%&gt;%</span> </span>
<span id="cb135-3"><a href="clean.html#cb135-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">SnowballC =</span> <span class="fu">wordStem</span>(word)) <span class="sc">%&gt;%</span> </span>
<span id="cb135-4"><a href="clean.html#cb135-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">hunspell =</span> <span class="fu">hunspell_stem</span>(word)) <span class="sc">%&gt;%</span> </span>
<span id="cb135-5"><a href="clean.html#cb135-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(hunspell)</span></code></pre></div>
<pre><code>## # A tibble: 16 x 3
##    word     SnowballC hunspell
##    &lt;chr&gt;    &lt;chr&gt;     &lt;chr&gt;   
##  1 love     love      love    
##  2 loves    love      love    
##  3 loved    love      loved   
##  4 loved    love      love    
##  5 love&#39;s   love&#39;     love    
##  6 lovely   love      lovely  
##  7 lovely   love      love    
##  8 loving   love      loving  
##  9 loving   love      love    
## 10 lovingly lovingli  loving  
## 11 lover    lover     lover   
## 12 lover    lover     love    
## 13 lovers   lover     love    
## 14 lovers   lover     love    
## 15 go       go        go      
## 16 went     went      went</code></pre>
</div>
<div id="표제어lemme-추출" class="section level3" number="7.3.9">
<h3><span class="header-section-number">7.3.9</span> 표제어(lemme) 추출</h3>
<div id="어간stem과-표제어lemme의-차이" class="section level4" number="7.3.9.1">
<h4><span class="header-section-number">7.3.9.1</span> 어간(stem)과 표제어(lemme)의 차이</h4>
<p>어근은 단어의 일부로서 변하지 않는다. 예를 들어, “produced” “producing” “production”의 표제어는 “produce”이고 어근은 “produc-”다.</p>
<p>“me”와 “my” 그리고, “you”와 “you’re”는 형태는 다르지만, 같은 의미를 공유하하고 있다. 각각 같은 의미이므로 하나로 묶어 줄 필요가 있지만, 어근추출로는 그 목적을 달성할 수 없다. 형태가 달라 어근추출처럼 규칙성을 찾을 수 없기 때문이다.</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="clean.html#cb137-1" aria-hidden="true" tabindex="-1"></a>word_v <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;love&quot;</span>, <span class="st">&quot;loves&quot;</span>, <span class="st">&quot;loved&quot;</span>, <span class="st">&quot;You&quot;</span>, <span class="st">&quot;You&#39;re&quot;</span>, <span class="st">&quot;You&#39;ll&quot;</span>, <span class="st">&quot;me&quot;</span>, <span class="st">&quot;my&quot;</span>, <span class="st">&quot;myself&quot;</span>, <span class="st">&quot;go&quot;</span>, <span class="st">&quot;went&quot;</span>) </span>
<span id="cb137-2"><a href="clean.html#cb137-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-3"><a href="clean.html#cb137-3" aria-hidden="true" tabindex="-1"></a>SnowballC<span class="sc">::</span><span class="fu">wordStem</span>(word_v)</span></code></pre></div>
<pre><code>##  [1] &quot;love&quot;   &quot;love&quot;   &quot;love&quot;   &quot;You&quot;    &quot;You&#39;r&quot;  &quot;You&#39;ll&quot; &quot;me&quot;     &quot;my&quot;    
##  [9] &quot;myself&quot; &quot;go&quot;     &quot;went&quot;</code></pre>
</div>
<div id="spacyr" class="section level4" number="7.3.9.2">
<h4><span class="header-section-number">7.3.9.2</span> <code>spacyr</code></h4>
<p>표제어 추출에 사용하는 패키지는 <code>spacyr</code>이다. <a href="https://cran.r-project.org/web/packages/spacyr/vignettes/using_spacyr.html">사용자설명서</a></p>
<div id="미니콘다-설치" class="section level5" number="7.3.9.2.1">
<h5><span class="header-section-number">7.3.9.2.1</span> 미니콘다 설치</h5>
<p>(아나콘다 혹은 미니콘다가 이미 컴퓨터에 설치돼 있으면 곧바로 <code>spacyr</code> 패키지 설치로 이동)</p>
<p><code>spacyr</code>은 파이썬 <code>spaCy</code>패키지를 R에서 사용할 수 있도록한 패키지이므로, <code>spacyr</code>을 이용하기 위해서는 컴퓨터에 파이썬과 필요한 패키지가 설치돼 있어야 한다. 파이썬과 자주사용하는 패키지를 한번에 설치할 수 있는 것이 아나콘다와 미니콘다이다.</p>
<ul>
<li>아나콘다: 파이썬 + 자주 사용하는 패키지 1500여개 설치(3GB 이상 설치공간 필요)</li>
<li>미니콘다: 파이썬 + 필수 패키지 700여개 설치(260MB 설치공간 필요)
(<a href="https://docs.conda.io/en/latest/miniconda.html">미니콘다 설치 안내</a>)</li>
</ul>
<p>미니콘다 설치 안내 페이지에서 본인의 운영체제에 맞는 파일을 선택해 컴퓨터에 설치한다. 관리자권한으로 설치한다 (다운로드받은 파일에 마우스커서 올려 놓고 오른쪽 버튼 클릭해 ‘관리자권한으로 실행’ 선택)</p>
<p>설치후 Anaconda Prompt를 연다.</p>
<ul>
<li>윈도화면 왼쪽 아래의 <code>시작</code>버튼을 클릭하면 윈도 시작 메뉴가 열린다. 상단 ’최근에 추가한 앱’에서 Anaconda Prompt(Miniconda 3)을 클릭하면 Anaconda Prompt가 열린다. (Anaconda Powershell Prompt를 이용해도 된다)</li>
</ul>
<p>프롬프트가 열리면 <code>conda --version</code>을 입력한다. <code>conda 4.9.2</code>처럼 콘다의 버전 정보가 뜨면 설치에 성공.</p>
</div>
<div id="spacyr-패키지-설치" class="section level5" number="7.3.9.2.2">
<h5><span class="header-section-number">7.3.9.2.2</span> <code>spacyr</code> 패키지 설치</h5>
<p><code>spacyr</code> 패키지를 설치하고 구동한다. (패키지 설치할 때는 R이나 RStudio를 관리자 권한으로 실행해 설치한다.)</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="clean.html#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;spacyr&quot;</span>)</span>
<span id="cb139-2"><a href="clean.html#cb139-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(spacyr)</span></code></pre></div>
<p>패키지를 설치하고 구동했으면 <code>spacy_install()</code>을 실행한다. 콘솔에 Proceed여부를 묻는 화면이 나면 <code>2: Yes</code>를 선택해 진행한다.</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="clean.html#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="fu">spacy_install</span>()</span></code></pre></div>
<p><code>spacy_install()</code>은 시스템 파이썬(또는 아나콘다 파이썬)과는 별개로 R환경에서 파이썬을 실행할 수 있는 콘다환경이 생성된다.</p>
</div>
<div id="reticulate-패키지-설치" class="section level5" number="7.3.9.2.3">
<h5><span class="header-section-number">7.3.9.2.3</span> <code>reticulate</code> 패키지 설치</h5>
<p>파이썬 모듈을 R환경에서 실행할 수 있도록 하는 파이썬-R 인터페이스 패키지다.</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="clean.html#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;reticulate&quot;</span>)</span></code></pre></div>
</div>
<div id="spacy_initialize" class="section level5" number="7.3.9.2.4">
<h5><span class="header-section-number">7.3.9.2.4</span> <code>spacy_initialize()</code></h5>
<p><code>spacy_initialize()</code>로 R에서 <code>spaCy</code>를 초기화한다.</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="clean.html#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(spacyr)</span>
<span id="cb142-2"><a href="clean.html#cb142-2" aria-hidden="true" tabindex="-1"></a><span class="fu">spacy_initialize</span>()</span></code></pre></div>
</div>
<div id="파이썬-설정-오류" class="section level5" number="7.3.9.2.5">
<h5><span class="header-section-number">7.3.9.2.5</span> 파이썬 설정 오류</h5>
<p>과거에 파이썬을 설치했었거나 혹은 파이썬에 의존하는 R패키지를 설치했었던 경우 오류가 발생할 수있다.</p>
<p><code>spacy_initialize()</code>를 실행하면 아래와 같은 파이썬 설정 오류가 발생할 수 있다.</p>
<pre><code>spacy python option is already set, spacyr will use:
    condaenv = &quot;spacy_condaenv&quot;
ERROR: The requested version of Python
(&#39;C:\Users\[사용자ID]\AppData\Local\r-miniconda\envs\spacy_condaenv\python.exe&#39;)
cannot be used, as another version of Python
(&#39;새로 설치한 미니콘다 경로&#39;) has
already been initialized . Please restart the R
session if you need to attach reticulate to a
different version of Python.
Error in use_python(python, required = required) : 
  failed to initialize requested version of Python</code></pre>
<p><code>spacy_initialize()</code>함수가 파이썬을 <code>C:\Users\[사용자ID]\AppData\Local\r-miniconda\envs\spacy_condaenv\python.exe</code>에서 찾는다는 의미다.</p>
<p>이 곳으로 파이썬 환경을 설정한다. 세 가지 방법이 있다. (이 위치는 사용자별로 파이썬이 설치된 환경에 따라 다르다.)</p>
<div id="rstudio에서-설정" class="section level6" number="7.3.9.2.5.1">
<h6><span class="header-section-number">7.3.9.2.5.1</span> RStudio에서 설정</h6>
<ol style="list-style-type: decimal">
<li>RStudio의 <code>Tools</code> 메뉴 선택.</li>
<li>드롭다운 메뉴가 열리면, <code>Global Options</code> 선택</li>
<li><code>Options</code> 창이 뜨면 왼쪽 메뉴 하단의 <code>Python</code>선택</li>
<li><code>Python interpreter:</code>의 <code>Select</code>버튼 클릭</li>
<li><code>Python interpreter</code>를 선택할 수 있는 창이 열리면, <code>spacy_initialize()</code>함수가 찾는 파이썬 경로 선택(예: <code>C:\Users\[사용자ID]\AppData\Local\r-miniconda\envs\spacy_condaenv\python.exe</code>)</li>
</ol>
</div>
<div id="sys.setevn-함수-이용" class="section level6" number="7.3.9.2.5.2">
<h6><span class="header-section-number">7.3.9.2.5.2</span> <code>Sys.setevn()</code> 함수 이용</h6>
<pre><code>Sys.setenv(RETICULATE_PYTHON = &quot;`spacy_initialize()`함수가 찾는 파이썬 경로&quot;)

예:

Sys.setenv(RETICULATE_PYTHON = &quot;C:\Users\[사용자ID]\AppData\Local\r-miniconda\envs\spacy_condaenv\python.exe&quot;)
</code></pre>
</div>
<div id="reticulateuse_python-함수-이용" class="section level6" number="7.3.9.2.5.3">
<h6><span class="header-section-number">7.3.9.2.5.3</span> <code>reticulate::use_python()</code> 함수 이용</h6>
<pre><code>reticulate::use_python(&quot;`spacy_initialize()`함수가 찾는 파이썬 경로&quot;)

예: 

reticulate::use_python(&quot;C:\Users\[사용자ID]\AppData\Local\r-miniconda\envs\spacy_condaenv\python.exe&quot;)
</code></pre>
</div>
<div id="설정-변경-확인" class="section level6" number="7.3.9.2.5.4">
<h6><span class="header-section-number">7.3.9.2.5.4</span> 설정 변경 확인</h6>
<p><code>reticulate::py_config()</code>를 실행하면 파이썬 설정 환경을 확인할 수 있다.</p>
<pre><code>python: C:\Users\[사용자ID]\AppData\Local\r-miniconda\envs\spacy_condaenv\python.exe
...
</code></pre>
</div>
</div>
<div id="spacyr-설치-확인" class="section level5" number="7.3.9.2.6">
<h5><span class="header-section-number">7.3.9.2.6</span> <code>spacyr</code> 설치 확인</h5>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="clean.html#cb147-1" aria-hidden="true" tabindex="-1"></a>word_v <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;love&quot;</span>, <span class="st">&quot;loves&quot;</span>, <span class="st">&quot;loved&quot;</span>, <span class="st">&quot;You&quot;</span>, <span class="st">&quot;You&#39;re&quot;</span>, <span class="st">&quot;You&#39;ll&quot;</span>, <span class="st">&quot;me&quot;</span>, <span class="st">&quot;my&quot;</span>, <span class="st">&quot;myself&quot;</span>, <span class="st">&quot;go&quot;</span>, <span class="st">&quot;went&quot;</span>) </span>
<span id="cb147-2"><a href="clean.html#cb147-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb147-3"><a href="clean.html#cb147-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(spacyr)</span>
<span id="cb147-4"><a href="clean.html#cb147-4" aria-hidden="true" tabindex="-1"></a><span class="fu">spacy_initialize</span>()</span>
<span id="cb147-5"><a href="clean.html#cb147-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb147-6"><a href="clean.html#cb147-6" aria-hidden="true" tabindex="-1"></a>word_v <span class="sc">%&gt;%</span> <span class="fu">spacy_parse</span>()</span></code></pre></div>
<p>어간추출과 달리, went의 표제어인 go로 산출한다. me에 대해서는 I를 표제어로 산출하나, my에 대해서는 my를 표제어로 제시한다.</p>
</div>
</div>
</div>
<div id="연습-6" class="section level3" number="7.3.10">
<h3><span class="header-section-number">7.3.10</span> 연습</h3>
<p>셰익스피어의 소네트27을 <code>SnowbalC</code>와 <code>spacyr</code>을 이용해 분석해 보자</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="clean.html#cb148-1" aria-hidden="true" tabindex="-1"></a>s27_v <span class="ot">&lt;-</span> <span class="st">&quot;Weary with toil I haste me to my bed,</span></span>
<span id="cb148-2"><a href="clean.html#cb148-2" aria-hidden="true" tabindex="-1"></a><span class="st">The dear repose for limbs with travel tired;</span></span>
<span id="cb148-3"><a href="clean.html#cb148-3" aria-hidden="true" tabindex="-1"></a><span class="st">But then begins a journey in my head</span></span>
<span id="cb148-4"><a href="clean.html#cb148-4" aria-hidden="true" tabindex="-1"></a><span class="st">To work my mind when body&#39;s work&#39;s expired;</span></span>
<span id="cb148-5"><a href="clean.html#cb148-5" aria-hidden="true" tabindex="-1"></a><span class="st">For then my thoughts, from far where I abide,</span></span>
<span id="cb148-6"><a href="clean.html#cb148-6" aria-hidden="true" tabindex="-1"></a><span class="st">Intend a zealous pilgrimage to thee,</span></span>
<span id="cb148-7"><a href="clean.html#cb148-7" aria-hidden="true" tabindex="-1"></a><span class="st">And keep my drooping eyelids open wide</span></span>
<span id="cb148-8"><a href="clean.html#cb148-8" aria-hidden="true" tabindex="-1"></a><span class="st">Looking on darkness which the blind do see:</span></span>
<span id="cb148-9"><a href="clean.html#cb148-9" aria-hidden="true" tabindex="-1"></a><span class="st">Save that my soul&#39;s imaginary sight</span></span>
<span id="cb148-10"><a href="clean.html#cb148-10" aria-hidden="true" tabindex="-1"></a><span class="st">Presents thy shadow to my sightless view,</span></span>
<span id="cb148-11"><a href="clean.html#cb148-11" aria-hidden="true" tabindex="-1"></a><span class="st">Which like a jewel hung in ghastly night</span></span>
<span id="cb148-12"><a href="clean.html#cb148-12" aria-hidden="true" tabindex="-1"></a><span class="st">Makes black night beauteous and her old face new.</span></span>
<span id="cb148-13"><a href="clean.html#cb148-13" aria-hidden="true" tabindex="-1"></a><span class="st">Lo! thus by day my limbs, by night my mind,</span></span>
<span id="cb148-14"><a href="clean.html#cb148-14" aria-hidden="true" tabindex="-1"></a><span class="st">For thee, and for myself, no quietness find.&quot;</span></span></code></pre></div>
<div id="snowballc" class="section level4" number="7.3.10.1">
<h4><span class="header-section-number">7.3.10.1</span> <code>SnowballC</code></h4>
<p><code>unnest_tokens()</code>의 <code>token =</code>인자에 <code>wordStem()</code>함수를 투입하면 오류 발생.</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="clean.html#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(SnowballC)</span>
<span id="cb149-2"><a href="clean.html#cb149-2" aria-hidden="true" tabindex="-1"></a>s27_v <span class="sc">%&gt;%</span> <span class="fu">tibble</span>(<span class="at">text =</span> .) <span class="sc">%&gt;%</span> </span>
<span id="cb149-3"><a href="clean.html#cb149-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, text, <span class="at">token =</span> wordStem)</span></code></pre></div>
<p>어근추츨(stemming)을 먼저 한 다음 정돈텍스트(tidy text)로 전환한다.</p>
<ul>
<li>행(row) 하나에 토큰(token)이 하나만 할당 (one-token-per-row).</li>
</ul>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="clean.html#cb150-1" aria-hidden="true" tabindex="-1"></a>s27_v <span class="sc">%&gt;%</span> SnowballC<span class="sc">::</span><span class="fu">wordStem</span>()</span></code></pre></div>
<pre><code>## [1] &quot;Weary with toil I haste me to my bed,\nThe dear repose for limbs with travel tired;\nBut then begins a journey in my head\nTo work my mind when body&#39;s work&#39;s expired;\nFor then my thoughts, from far where I abide,\nIntend a zealous pilgrimage to thee,\nAnd keep my drooping eyelids open wide\nLooking on darkness which the blind do see:\nSave that my soul&#39;s imaginary sight\nPresents thy shadow to my sightless view,\nWhich like a jewel hung in ghastly night\nMakes black night beauteous and her old face new.\nLo! thus by day my limbs, by night my mind,\nFor thee, and for myself, no quietness find.&quot;</code></pre>
<p>토큰화를 먼저 한 다음에 어간을 추출한다.</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="clean.html#cb152-1" aria-hidden="true" tabindex="-1"></a>s27_v <span class="sc">%&gt;%</span> <span class="fu">tibble</span>(<span class="at">text =</span> . ) <span class="sc">%&gt;%</span> </span>
<span id="cb152-2"><a href="clean.html#cb152-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, text) <span class="sc">%&gt;%</span> </span>
<span id="cb152-3"><a href="clean.html#cb152-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">stemmed =</span> <span class="fu">wordStem</span>(word)) <span class="sc">%&gt;%</span> </span>
<span id="cb152-4"><a href="clean.html#cb152-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(stemmed, <span class="at">sort =</span> T)</span></code></pre></div>
<pre><code>## # A tibble: 81 x 2
##    stemmed     n
##    &lt;chr&gt;   &lt;int&gt;
##  1 my          9
##  2 for         4
##  3 to          4
##  4 a           3
##  5 and         3
##  6 night       3
##  7 by          2
##  8 i           2
##  9 in          2
## 10 limb        2
## # ... with 71 more rows</code></pre>
</div>
<div id="spacyr-1" class="section level4" number="7.3.10.2">
<h4><span class="header-section-number">7.3.10.2</span> <code>spacyr</code></h4>
<p><code>spacy_parse()</code>는 표제어(lemme)와 품사 태그(pos) 등의 정보가 포함된 데이터프레임으로 산출한다.</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="clean.html#cb154-1" aria-hidden="true" tabindex="-1"></a>s27_v <span class="sc">%&gt;%</span> <span class="fu">spacy_parse</span>()</span></code></pre></div>
<p>분석에 필요한 열만 선택한다.</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="clean.html#cb155-1" aria-hidden="true" tabindex="-1"></a>s27_v <span class="sc">%&gt;%</span> <span class="fu">spacy_parse</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb155-2"><a href="clean.html#cb155-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(token<span class="sc">:</span>pos) </span></code></pre></div>
<p><code>unnest_tokens()</code>로 출력 형식 통일</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="clean.html#cb156-1" aria-hidden="true" tabindex="-1"></a>s27_v <span class="sc">%&gt;%</span> <span class="fu">spacy_parse</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb156-2"><a href="clean.html#cb156-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(token<span class="sc">:</span>pos) <span class="sc">%&gt;%</span> </span>
<span id="cb156-3"><a href="clean.html#cb156-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, lemma) <span class="sc">%&gt;%</span> </span>
<span id="cb156-4"><a href="clean.html#cb156-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> T)</span></code></pre></div>
</div>
<div id="비교-1" class="section level4" number="7.3.10.3">
<h4><span class="header-section-number">7.3.10.3</span> 비교</h4>
<p>불용어를 제거하지 않고 SnowballC 및 spacyr를 이용한 정규화 결과와 정규화하지 않은 결과를 비교해보자.</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="clean.html#cb157-1" aria-hidden="true" tabindex="-1"></a>SnowballC_df <span class="ot">&lt;-</span> s27_v <span class="sc">%&gt;%</span> <span class="fu">tibble</span>(<span class="at">text =</span> . ) <span class="sc">%&gt;%</span> </span>
<span id="cb157-2"><a href="clean.html#cb157-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, text) <span class="sc">%&gt;%</span> </span>
<span id="cb157-3"><a href="clean.html#cb157-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">stemmed =</span> <span class="fu">wordStem</span>(word)) <span class="sc">%&gt;%</span> </span>
<span id="cb157-4"><a href="clean.html#cb157-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(stemmed, <span class="at">sort =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb157-5"><a href="clean.html#cb157-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(n, <span class="at">n =</span> <span class="dv">15</span>)</span>
<span id="cb157-6"><a href="clean.html#cb157-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-7"><a href="clean.html#cb157-7" aria-hidden="true" tabindex="-1"></a>spacyr_df <span class="ot">&lt;-</span> s27_v <span class="sc">%&gt;%</span> <span class="fu">spacy_parse</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb157-8"><a href="clean.html#cb157-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(token<span class="sc">:</span>pos) <span class="sc">%&gt;%</span> </span>
<span id="cb157-9"><a href="clean.html#cb157-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, lemma) <span class="sc">%&gt;%</span> </span>
<span id="cb157-10"><a href="clean.html#cb157-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb157-11"><a href="clean.html#cb157-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(n, <span class="at">n =</span> <span class="dv">15</span>)</span>
<span id="cb157-12"><a href="clean.html#cb157-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-13"><a href="clean.html#cb157-13" aria-hidden="true" tabindex="-1"></a>noNor_df <span class="ot">&lt;-</span> SnowballC_df <span class="ot">&lt;-</span> s27_v <span class="sc">%&gt;%</span> <span class="fu">tibble</span>(<span class="at">text =</span> . ) <span class="sc">%&gt;%</span> </span>
<span id="cb157-14"><a href="clean.html#cb157-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, text) <span class="sc">%&gt;%</span> </span>
<span id="cb157-15"><a href="clean.html#cb157-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb157-16"><a href="clean.html#cb157-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_max</span>(n, <span class="at">n =</span> <span class="dv">15</span>)</span>
<span id="cb157-17"><a href="clean.html#cb157-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-18"><a href="clean.html#cb157-18" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(<span class="at">SnowballC =</span> SnowballC_df, <span class="at">spacyr =</span> spacyr_df, <span class="at">noNor =</span> noNor_df,</span>
<span id="cb157-19"><a href="clean.html#cb157-19" aria-hidden="true" tabindex="-1"></a>                <span class="at">.id =</span> <span class="st">&quot;ID&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="clean.html#cb158-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">word =</span> <span class="fu">reorder</span>(word, n)) <span class="sc">%&gt;%</span> </span>
<span id="cb158-2"><a href="clean.html#cb158-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">geom_col</span>(<span class="fu">aes</span>(word, n, <span class="at">fill =</span> ID), <span class="at">show.legend =</span> F) <span class="sc">+</span> </span>
<span id="cb158-3"><a href="clean.html#cb158-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb158-4"><a href="clean.html#cb158-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>ID, <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>) <span class="sc">+</span></span>
<span id="cb158-5"><a href="clean.html#cb158-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;정규화 결과 비교&quot;</span>) <span class="sc">+</span></span>
<span id="cb158-6"><a href="clean.html#cb158-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;단어&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">&quot;빈도&quot;</span>) <span class="sc">+</span></span>
<span id="cb158-7"><a href="clean.html#cb158-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">24</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb158-8"><a href="clean.html#cb158-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>),</span>
<span id="cb158-9"><a href="clean.html#cb158-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>))</span></code></pre></div>
<p>불용어를 제거하고 SnowballC 및 spacyr를 이용한 정규화 결과와 정규화하지 않은 결과를 비교해보자.</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="clean.html#cb159-1" aria-hidden="true" tabindex="-1"></a>SnowballC_df <span class="ot">&lt;-</span> s27_v <span class="sc">%&gt;%</span> <span class="fu">tibble</span>(<span class="at">text =</span> . ) <span class="sc">%&gt;%</span> </span>
<span id="cb159-2"><a href="clean.html#cb159-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, text) <span class="sc">%&gt;%</span> </span>
<span id="cb159-3"><a href="clean.html#cb159-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">stemmed =</span> <span class="fu">wordStem</span>(word)) <span class="sc">%&gt;%</span> </span>
<span id="cb159-4"><a href="clean.html#cb159-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(stop_words) <span class="sc">%&gt;%</span> </span>
<span id="cb159-5"><a href="clean.html#cb159-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(stemmed, <span class="at">sort =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb159-6"><a href="clean.html#cb159-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">20</span>)</span>
<span id="cb159-7"><a href="clean.html#cb159-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-8"><a href="clean.html#cb159-8" aria-hidden="true" tabindex="-1"></a>spacyr_df <span class="ot">&lt;-</span> s27_v <span class="sc">%&gt;%</span> <span class="fu">spacy_parse</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb159-9"><a href="clean.html#cb159-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(token<span class="sc">:</span>pos) <span class="sc">%&gt;%</span> </span>
<span id="cb159-10"><a href="clean.html#cb159-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, lemma) <span class="sc">%&gt;%</span> </span>
<span id="cb159-11"><a href="clean.html#cb159-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(stop_words) <span class="sc">%&gt;%</span> </span>
<span id="cb159-12"><a href="clean.html#cb159-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb159-13"><a href="clean.html#cb159-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">20</span>)</span>
<span id="cb159-14"><a href="clean.html#cb159-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-15"><a href="clean.html#cb159-15" aria-hidden="true" tabindex="-1"></a>noNor_df <span class="ot">&lt;-</span> SnowballC_df <span class="ot">&lt;-</span> s27_v <span class="sc">%&gt;%</span> <span class="fu">tibble</span>(<span class="at">text =</span> . ) <span class="sc">%&gt;%</span> </span>
<span id="cb159-16"><a href="clean.html#cb159-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, text) <span class="sc">%&gt;%</span> </span>
<span id="cb159-17"><a href="clean.html#cb159-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(stop_words) <span class="sc">%&gt;%</span> </span>
<span id="cb159-18"><a href="clean.html#cb159-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word, <span class="at">sort =</span> T) <span class="sc">%&gt;%</span> </span>
<span id="cb159-19"><a href="clean.html#cb159-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">20</span>)</span>
<span id="cb159-20"><a href="clean.html#cb159-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-21"><a href="clean.html#cb159-21" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(<span class="at">SnowballC =</span> SnowballC_df, <span class="at">spacyr =</span> spacyr_df, <span class="at">noNor =</span> noNor_df,</span>
<span id="cb159-22"><a href="clean.html#cb159-22" aria-hidden="true" tabindex="-1"></a>                <span class="at">.id =</span> <span class="st">&quot;ID&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="clean.html#cb160-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">word =</span> <span class="fu">reorder</span>(word, n)) <span class="sc">%&gt;%</span> </span>
<span id="cb160-2"><a href="clean.html#cb160-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span> <span class="fu">geom_col</span>(<span class="fu">aes</span>(word, n, <span class="at">fill =</span> ID), <span class="at">show.legend =</span> F) <span class="sc">+</span> </span>
<span id="cb160-3"><a href="clean.html#cb160-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb160-4"><a href="clean.html#cb160-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>ID, <span class="at">scales =</span> <span class="st">&quot;free&quot;</span>) <span class="sc">+</span></span>
<span id="cb160-5"><a href="clean.html#cb160-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;정규화 결과 비교&quot;</span>) <span class="sc">+</span></span>
<span id="cb160-6"><a href="clean.html#cb160-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;단어&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">&quot;빈도&quot;</span>) <span class="sc">+</span></span>
<span id="cb160-7"><a href="clean.html#cb160-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">24</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb160-8"><a href="clean.html#cb160-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>),</span>
<span id="cb160-9"><a href="clean.html#cb160-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>))</span></code></pre></div>
<p>막대도표 대신 표를 만들어 비교해 보자. 이를 위해서는 데이터프레임을 행방향으로 결합해야 한다.</p>
<p>행결합하면 행의 이름이 구분할 필요가 있으므로, <code>unnest_tokens()</code>함수에서 <code>output =</code>인자를 설정할 때 해당 패키지 이름으로 설정한다.</p>
<p>불용어 처리 전과 후를 구분해서 비교해보자.</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="clean.html#cb161-1" aria-hidden="true" tabindex="-1"></a>SnowballC_df <span class="ot">&lt;-</span> s27_v <span class="sc">%&gt;%</span> <span class="fu">tibble</span>(<span class="at">text =</span> . ) <span class="sc">%&gt;%</span> </span>
<span id="cb161-2"><a href="clean.html#cb161-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(SnowballC, text) <span class="sc">%&gt;%</span> </span>
<span id="cb161-3"><a href="clean.html#cb161-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">SnowballC =</span> <span class="fu">wordStem</span>(SnowballC)) <span class="sc">%&gt;%</span> </span>
<span id="cb161-4"><a href="clean.html#cb161-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(SnowballC) <span class="sc">%&gt;%</span> </span>
<span id="cb161-5"><a href="clean.html#cb161-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(SnowballC) <span class="sc">%&gt;%</span> </span>
<span id="cb161-6"><a href="clean.html#cb161-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">40</span>)</span>
<span id="cb161-7"><a href="clean.html#cb161-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-8"><a href="clean.html#cb161-8" aria-hidden="true" tabindex="-1"></a>spacyr_df <span class="ot">&lt;-</span> s27_v <span class="sc">%&gt;%</span> <span class="fu">spacy_parse</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb161-9"><a href="clean.html#cb161-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(lemma) <span class="sc">%&gt;%</span> </span>
<span id="cb161-10"><a href="clean.html#cb161-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(spacyr, lemma) <span class="sc">%&gt;%</span> </span>
<span id="cb161-11"><a href="clean.html#cb161-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(spacyr) <span class="sc">%&gt;%</span> </span>
<span id="cb161-12"><a href="clean.html#cb161-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(spacyr) <span class="sc">%&gt;%</span> </span>
<span id="cb161-13"><a href="clean.html#cb161-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">40</span>)</span>
<span id="cb161-14"><a href="clean.html#cb161-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-15"><a href="clean.html#cb161-15" aria-hidden="true" tabindex="-1"></a>noNor_df <span class="ot">&lt;-</span> s27_v <span class="sc">%&gt;%</span> <span class="fu">tibble</span>(<span class="at">text =</span> . ) <span class="sc">%&gt;%</span> </span>
<span id="cb161-16"><a href="clean.html#cb161-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(noNor, text) <span class="sc">%&gt;%</span> </span>
<span id="cb161-17"><a href="clean.html#cb161-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(noNor) <span class="sc">%&gt;%</span> </span>
<span id="cb161-18"><a href="clean.html#cb161-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(noNor) <span class="sc">%&gt;%</span> </span>
<span id="cb161-19"><a href="clean.html#cb161-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">40</span>)</span>
<span id="cb161-20"><a href="clean.html#cb161-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-21"><a href="clean.html#cb161-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-22"><a href="clean.html#cb161-22" aria-hidden="true" tabindex="-1"></a><span class="fu">bind_cols</span>(noNor_df, SnowballC_df, spacyr_df)</span></code></pre></div>
<p>불용어 처리한 다음에도 결과를 비교해보자.</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="clean.html#cb162-1" aria-hidden="true" tabindex="-1"></a>SnowballC2_df <span class="ot">&lt;-</span> s27_v <span class="sc">%&gt;%</span> <span class="fu">tibble</span>(<span class="at">text =</span> . ) <span class="sc">%&gt;%</span> </span>
<span id="cb162-2"><a href="clean.html#cb162-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(SnowballC, text) <span class="sc">%&gt;%</span> </span>
<span id="cb162-3"><a href="clean.html#cb162-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">word =</span> <span class="fu">wordStem</span>(SnowballC)) <span class="sc">%&gt;%</span> </span>
<span id="cb162-4"><a href="clean.html#cb162-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(stop_words) <span class="sc">%&gt;%</span> </span>
<span id="cb162-5"><a href="clean.html#cb162-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">SnowballC =</span> word) <span class="sc">%&gt;%</span> </span>
<span id="cb162-6"><a href="clean.html#cb162-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(SnowballC) <span class="sc">%&gt;%</span> </span>
<span id="cb162-7"><a href="clean.html#cb162-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(SnowballC) <span class="sc">%&gt;%</span> </span>
<span id="cb162-8"><a href="clean.html#cb162-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">40</span>)</span>
<span id="cb162-9"><a href="clean.html#cb162-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-10"><a href="clean.html#cb162-10" aria-hidden="true" tabindex="-1"></a>spacyr2_df <span class="ot">&lt;-</span> s27_v <span class="sc">%&gt;%</span> <span class="fu">spacy_parse</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb162-11"><a href="clean.html#cb162-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(lemma) <span class="sc">%&gt;%</span> </span>
<span id="cb162-12"><a href="clean.html#cb162-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, lemma) <span class="sc">%&gt;%</span> </span>
<span id="cb162-13"><a href="clean.html#cb162-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(stop_words) <span class="sc">%&gt;%</span> </span>
<span id="cb162-14"><a href="clean.html#cb162-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">spacyr =</span> word) <span class="sc">%&gt;%</span> </span>
<span id="cb162-15"><a href="clean.html#cb162-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(spacyr) <span class="sc">%&gt;%</span> </span>
<span id="cb162-16"><a href="clean.html#cb162-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(spacyr) <span class="sc">%&gt;%</span> </span>
<span id="cb162-17"><a href="clean.html#cb162-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">40</span>)</span>
<span id="cb162-18"><a href="clean.html#cb162-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-19"><a href="clean.html#cb162-19" aria-hidden="true" tabindex="-1"></a>noNor2_df <span class="ot">&lt;-</span> s27_v <span class="sc">%&gt;%</span> <span class="fu">tibble</span>(<span class="at">text =</span> . ) <span class="sc">%&gt;%</span> </span>
<span id="cb162-20"><a href="clean.html#cb162-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_tokens</span>(word, text) <span class="sc">%&gt;%</span> </span>
<span id="cb162-21"><a href="clean.html#cb162-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">anti_join</span>(stop_words) <span class="sc">%&gt;%</span> </span>
<span id="cb162-22"><a href="clean.html#cb162-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(word) <span class="sc">%&gt;%</span> </span>
<span id="cb162-23"><a href="clean.html#cb162-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(word) <span class="sc">%&gt;%</span> </span>
<span id="cb162-24"><a href="clean.html#cb162-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">40</span>)</span>
<span id="cb162-25"><a href="clean.html#cb162-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-26"><a href="clean.html#cb162-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-27"><a href="clean.html#cb162-27" aria-hidden="true" tabindex="-1"></a><span class="fu">bind_cols</span>(noNor2_df, SnowballC2_df, spacyr2_df)</span></code></pre></div>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="clean.html#cb163-1" aria-hidden="true" tabindex="-1"></a>s27_v <span class="ot">&lt;-</span> <span class="st">&quot;Weary with toil I haste me to my bed,</span></span>
<span id="cb163-2"><a href="clean.html#cb163-2" aria-hidden="true" tabindex="-1"></a><span class="st">The dear repose for limbs with travel tired;</span></span>
<span id="cb163-3"><a href="clean.html#cb163-3" aria-hidden="true" tabindex="-1"></a><span class="st">But then begins a journey in my head</span></span>
<span id="cb163-4"><a href="clean.html#cb163-4" aria-hidden="true" tabindex="-1"></a><span class="st">To work my mind when body&#39;s work&#39;s expired;</span></span>
<span id="cb163-5"><a href="clean.html#cb163-5" aria-hidden="true" tabindex="-1"></a><span class="st">For then my thoughts, from far where I abide,</span></span>
<span id="cb163-6"><a href="clean.html#cb163-6" aria-hidden="true" tabindex="-1"></a><span class="st">Intend a zealous pilgrimage to thee,</span></span>
<span id="cb163-7"><a href="clean.html#cb163-7" aria-hidden="true" tabindex="-1"></a><span class="st">And keep my drooping eyelids open wide</span></span>
<span id="cb163-8"><a href="clean.html#cb163-8" aria-hidden="true" tabindex="-1"></a><span class="st">Looking on darkness which the blind do see:</span></span>
<span id="cb163-9"><a href="clean.html#cb163-9" aria-hidden="true" tabindex="-1"></a><span class="st">Save that my soul&#39;s imaginary sight</span></span>
<span id="cb163-10"><a href="clean.html#cb163-10" aria-hidden="true" tabindex="-1"></a><span class="st">Presents thy shadow to my sightless view,</span></span>
<span id="cb163-11"><a href="clean.html#cb163-11" aria-hidden="true" tabindex="-1"></a><span class="st">Which like a jewel hung in ghastly night</span></span>
<span id="cb163-12"><a href="clean.html#cb163-12" aria-hidden="true" tabindex="-1"></a><span class="st">Makes black night beauteous and her old face new.</span></span>
<span id="cb163-13"><a href="clean.html#cb163-13" aria-hidden="true" tabindex="-1"></a><span class="st">Lo! thus by day my limbs, by night my mind,</span></span>
<span id="cb163-14"><a href="clean.html#cb163-14" aria-hidden="true" tabindex="-1"></a><span class="st">For thee, and for myself, no quietness find.&quot;</span></span></code></pre></div>
</div>
</div>
<div id="과제-5" class="section level3" number="7.3.11">
<h3><span class="header-section-number">7.3.11</span> 과제</h3>
<p>구텐베르크 프로젝트에서 영문 문서 한편을 선택해 두 가지 방식의 정규화(<code>SnowballC</code>를 이용한 어근 추출과 <code>spacyr</code>을 이용한 표제어 추출)한 결과와 정규화하지 않은 결과를 비교한다.</p>
<ol style="list-style-type: decimal">
<li>막대도표로 시각화해 비교</li>
<li>표로 만들어 비교</li>
<li>3건의 결과에 대해 간략하게 설명</li>
</ol>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="cleantool.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="anal1freq.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/07-clean.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
